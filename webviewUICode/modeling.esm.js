var u=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var z=u((NT,$o)=>{var Do=e=>e.reduce((t,r)=>Array.isArray(r)?t.concat(Do(r)):t.concat(r),[]);$o.exports=Do});var Xo=u((FT,Zo)=>{var lq=e=>Object.assign({},e);Zo.exports=lq});var Yo=u((VT,Lo)=>{var uq=(e,t,r)=>(e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e);Lo.exports=uq});var er=u((RT,Uo)=>{var fq=()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Uo.exports=fq});var Wo=u((zT,Ho)=>{var hq=er(),pq=e=>{let t=hq();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};Ho.exports=pq});var on=u((BT,_o)=>{var dq=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e);_o.exports=dq});var Qo=u((CT,Ko)=>{var gq=(e,t)=>{let r=t[0],n=t[1],s=t[2],o=t[3],i=t[4],c=t[5],a=t[6],l=t[7],f=t[8],h=t[9],p=t[10],d=t[11],m=t[12],g=t[13],q=t[14],w=t[15],v=r*c-n*i,E=r*a-s*i,x=r*l-o*i,P=n*a-s*c,y=n*l-o*c,A=s*l-o*a,b=f*g-h*m,M=f*q-p*m,T=f*w-d*m,S=h*q-p*g,O=h*w-d*g,D=p*w-d*q,R=v*D-E*O+x*S+P*T-y*M+A*b;return R?(R=1/R,e[0]=(c*D-a*O+l*S)*R,e[1]=(s*O-n*D-o*S)*R,e[2]=(g*A-q*y+w*P)*R,e[3]=(p*y-h*A-d*P)*R,e[4]=(a*T-i*D-l*M)*R,e[5]=(r*D-s*T+o*M)*R,e[6]=(q*x-m*A-w*E)*R,e[7]=(f*A-p*x+d*E)*R,e[8]=(i*O-c*T+l*b)*R,e[9]=(n*T-r*O-o*b)*R,e[10]=(m*y-g*x+w*v)*R,e[11]=(h*x-f*y-d*v)*R,e[12]=(c*M-i*S-a*b)*R,e[13]=(r*S-n*M+s*b)*R,e[14]=(g*E-m*P-q*v)*R,e[15]=(f*P-h*E+p*v)*R,e):null};Ko.exports=gq});var jo=u((GT,Jo)=>{var mq=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15];Jo.exports=mq});var Z=u((IT,ei)=>{var qq=Math.PI*2;ei.exports={EPS:1e-5,NEPS:1e-13,TAU:qq,spatialResolution:1e5}});var J=u((DT,ri)=>{var{NEPS:xq}=Z(),ti=e=>Math.abs(e)<xq?0:e,wq=e=>ti(Math.sin(e)),vq=e=>ti(Math.cos(e));ri.exports={sin:wq,cos:vq}});var cn=u(($T,ni)=>{var yq=e=>(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e);ni.exports=yq});var an=u((ZT,si)=>{var{EPS:Eq}=Z(),{sin:Pq,cos:Aq}=J(),bq=cn(),Mq=(e,t,r)=>{let[n,s,o]=r,i=n*n+s*s+o*o;if(Math.abs(i)<Eq)return bq(e);let c=1/Math.sqrt(i);n*=c,s*=c,o*=c;let a=Pq(t),l=Aq(t),f=1-l;return e[0]=n*n*f+l,e[1]=s*n*f+o*a,e[2]=o*n*f-s*a,e[3]=0,e[4]=n*s*f-o*a,e[5]=s*s*f+l,e[6]=o*s*f+n*a,e[7]=0,e[8]=n*o*f+s*a,e[9]=s*o*f-n*a,e[10]=o*o*f+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};si.exports=Mq});var ii=u((XT,oi)=>{var Sq=(e,t)=>(e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e);oi.exports=Sq});var ai=u((LT,ci)=>{var{sin:ln,cos:un}=J(),Tq=(e,t,r,n)=>{let s=ln(t),o=un(t),i=ln(r),c=un(r),a=ln(n),l=un(n);return e[0]=c*o,e[1]=c*s,e[2]=-i,e[3]=0,e[4]=a*i*o-l*s,e[5]=l*o+a*i*s,e[6]=a*c,e[7]=0,e[8]=a*s+l*i*o,e[9]=l*i*s-a*o,e[10]=l*c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};ci.exports=Tq});var ui=u((YT,li)=>{var kq=(e,t)=>(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e);li.exports=kq});var hi=u((UT,fi)=>{var Oq=er(),Nq=(e,t,r,n,s,o,i,c,a,l,f,h,p,d,m,g)=>{let q=Oq();return q[0]=e,q[1]=t,q[2]=r,q[3]=n,q[4]=s,q[5]=o,q[6]=i,q[7]=c,q[8]=a,q[9]=l,q[10]=f,q[11]=h,q[12]=p,q[13]=d,q[14]=m,q[15]=g,q};fi.exports=Nq});var fn=u((HT,pi)=>{var Fq=(e,t)=>(e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e);pi.exports=Fq});var hn=u((WT,di)=>{var Vq=(e,t,r)=>(e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e);di.exports=Vq});var vt=u((_T,gi)=>{var Rq=(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2];gi.exports=Rq});var qi=u((KT,mi)=>{var zq=vt(),Bq=(e,t)=>{let r=e[0],n=e[1],s=e[2],o=t[0],i=t[1],c=t[2],a=Math.sqrt(r*r+n*n+s*s),l=Math.sqrt(o*o+i*i+c*c),f=a*l,h=f&&zq(e,t)/f;return Math.acos(Math.min(Math.max(h,-1),1))};mi.exports=Bq});var yt=u((QT,xi)=>{var Cq=()=>[0,0,0];xi.exports=Cq});var vi=u((JT,wi)=>{var Gq=yt(),Iq=e=>{let t=Gq();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t};wi.exports=Iq});var pn=u((jT,yi)=>{var Dq=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e);yi.exports=Dq});var He=u((ek,Ei)=>{var $q=(e,t,r)=>{let n=t[0],s=t[1],o=t[2],i=r[0],c=r[1],a=r[2];return e[0]=s*a-o*c,e[1]=o*i-n*a,e[2]=n*c-s*i,e};Ei.exports=$q});var dn=u((tk,Pi)=>{var Zq=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+n*n+s*s)};Pi.exports=Zq});var bi=u((rk,Ai)=>{var Xq=(e,t,r)=>(e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e);Ai.exports=Xq});var Si=u((nk,Mi)=>{var Lq=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2];Mi.exports=Lq});var ki=u((sk,Ti)=>{var Yq=(e,t)=>(e[0]=t,e[1]=t,e[2]=t,e);Ti.exports=Yq});var Ni=u((ok,Oi)=>{var Uq=yt(),Hq=(e,t,r)=>{let n=Uq();return n[0]=e,n[1]=t,n[2]=r,n};Oi.exports=Hq});var Vi=u((ik,Fi)=>{var Wq=(e,t,r=0)=>(e[0]=t[0],e[1]=t[1],e[2]=r,e);Fi.exports=Wq});var gn=u((ck,Ri)=>{var _q=e=>{let t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)};Ri.exports=_q});var Bi=u((ak,zi)=>{var Kq=(e,t,r,n)=>(e[0]=t[0]+n*(r[0]-t[0]),e[1]=t[1]+n*(r[1]-t[1]),e[2]=t[2]+n*(r[2]-t[2]),e);zi.exports=Kq});var mn=u((lk,Ci)=>{var Qq=(e,t,r)=>(e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e);Ci.exports=Qq});var qn=u((uk,Gi)=>{var Jq=(e,t,r)=>(e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e);Gi.exports=Jq});var Di=u((fk,Ii)=>{var jq=(e,t,r)=>(e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e);Ii.exports=jq});var Zi=u((hk,$i)=>{var e3=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e);$i.exports=e3});var tr=u((pk,Xi)=>{var t3=(e,t)=>{let r=t[0],n=t[1],s=t[2],o=r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o)),e[0]=r*o,e[1]=n*o,e[2]=s*o,e};Xi.exports=t3});var Yi=u((dk,Li)=>{var r3=fn(),n3=yt(),s3=He(),o3=(e,t)=>{let r=r3(n3(),t),n=0+(r[0]<r[1]&&r[0]<r[2]),s=0+(r[1]<=r[0]&&r[1]<r[2]),o=0+(r[2]<=r[0]&&r[2]<=r[1]);return s3(e,t,[n,s,o])};Li.exports=o3});var Hi=u((gk,Ui)=>{var i3=(e,t,r,n)=>{let s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[0],o[1]=s[1]*Math.cos(n)-s[2]*Math.sin(n),o[2]=s[1]*Math.sin(n)+s[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e};Ui.exports=i3});var _i=u((mk,Wi)=>{var c3=(e,t,r,n)=>{let s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[2]*Math.sin(n)+s[0]*Math.cos(n),o[1]=s[1],o[2]=s[2]*Math.cos(n)-s[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e};Wi.exports=c3});var Qi=u((qk,Ki)=>{var a3=(e,t,r,n)=>{let s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],o[0]=s[0]*Math.cos(n)-s[1]*Math.sin(n),o[1]=s[0]*Math.sin(n)+s[1]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=t[2],e};Ki.exports=a3});var xn=u((xk,Ji)=>{var l3=(e,t,r)=>(e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e);Ji.exports=l3});var ec=u((wk,ji)=>{var u3=(e,t,r)=>(e[0]=Math.round(t[0]/r)*r+0,e[1]=Math.round(t[1]/r)*r+0,e[2]=Math.round(t[2]/r)*r+0,e);ji.exports=u3});var wn=u((vk,tc)=>{var f3=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2];return r*r+n*n+s*s};tc.exports=f3});var vn=u((yk,rc)=>{var h3=e=>{let t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n};rc.exports=h3});var Et=u((Ek,nc)=>{var p3=(e,t,r)=>(e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e);nc.exports=p3});var oc=u((Pk,sc)=>{var d3=e=>`[${e[0].toFixed(7)}, ${e[1].toFixed(7)}, ${e[2].toFixed(7)}]`;sc.exports=d3});var cc=u((Ak,ic)=>{var g3=(e,t,r)=>{let n=t[0],s=t[1],o=t[2],i=r[3]*n+r[7]*s+r[11]*o+r[15];return i=i||1,e[0]=(r[0]*n+r[4]*s+r[8]*o+r[12])/i,e[1]=(r[1]*n+r[5]*s+r[9]*o+r[13])/i,e[2]=(r[2]*n+r[6]*s+r[10]*o+r[14])/i,e};ic.exports=g3});var F=u((bk,ac)=>{ac.exports={abs:fn(),add:hn(),angle:qi(),clone:vi(),copy:pn(),create:yt(),cross:He(),distance:dn(),divide:bi(),dot:vt(),equals:Si(),fromScalar:ki(),fromValues:Ni(),fromVec2:Vi(),length:gn(),lerp:Bi(),max:mn(),min:qn(),multiply:Di(),negate:Zi(),normalize:tr(),orthogonal:Yi(),rotateX:Hi(),rotateY:_i(),rotateZ:Qi(),scale:xn(),snap:ec(),squaredDistance:wn(),squaredLength:vn(),subtract:Et(),toString:oc(),transform:cc()}});var uc=u((Mk,lc)=>{var be=F(),m3=an(),q3=(e,t,r)=>{let n=be.normalize(be.create(),t),s=be.normalize(be.create(),r),o=be.cross(be.create(),s,n),i=be.dot(s,n);if(i===-1)return m3(e,Math.PI,be.orthogonal(o,n));let c=1/(1+i);return e[0]=o[0]*o[0]*c+i,e[1]=o[1]*o[0]*c-o[2],e[2]=o[2]*o[0]*c+o[1],e[3]=0,e[4]=o[0]*o[1]*c+o[2],e[5]=o[1]*o[1]*c+i,e[6]=o[2]*o[1]*c-o[0],e[7]=0,e[8]=o[0]*o[2]*c-o[1],e[9]=o[1]*o[2]*c+o[0],e[10]=o[2]*o[2]*c+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};lc.exports=q3});var hc=u((Sk,fc)=>{var{sin:x3,cos:w3}=J(),v3=(e,t)=>{let r=x3(t),n=w3(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};fc.exports=v3});var dc=u((Tk,pc)=>{var{sin:y3,cos:E3}=J(),P3=(e,t)=>{let r=y3(t),n=E3(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};pc.exports=P3});var mc=u((kk,gc)=>{var{sin:A3,cos:b3}=J(),M3=(e,t)=>{let r=A3(t),n=b3(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};gc.exports=M3});var xc=u((Ok,qc)=>{var S3=e=>e[0]===1&&e[1]===0&&e[2]===0&&e[3]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[7]===0&&e[8]===0&&e[9]===0&&e[10]===1&&e[11]===0&&e[12]===0&&e[13]===0&&e[14]===0&&e[15]===1;qc.exports=S3});var vc=u((Nk,wc)=>{var T3=e=>we(e[1])&&we(e[2])&&we(e[3])&&we(e[4])&&we(e[6])&&we(e[7])&&we(e[8])&&we(e[9])&&we(e[11])&&e[15]===1,we=e=>Math.abs(e)<Number.EPSILON;wc.exports=T3});var Ec=u((Fk,yc)=>{var k3=e=>{let t=e[4]*e[9]-e[8]*e[5],r=e[8]*e[1]-e[0]*e[9],n=e[0]*e[5]-e[4]*e[1];return t*e[2]+r*e[6]+n*e[10]<0};yc.exports=k3});var Ac=u((Vk,Pc)=>{var O3=(e,t)=>{let[r,n,s,o]=t;return e[0]=1-2*r*r,e[1]=-2*n*r,e[2]=-2*s*r,e[3]=0,e[4]=-2*r*n,e[5]=1-2*n*n,e[6]=-2*s*n,e[7]=0,e[8]=-2*r*s,e[9]=-2*n*s,e[10]=1-2*s*s,e[11]=0,e[12]=2*r*o,e[13]=2*n*o,e[14]=2*s*o,e[15]=1,e};Pc.exports=O3});var Mc=u((Rk,bc)=>{var N3=(e,t,r)=>{let n=t[0],s=t[1],o=t[2],i=t[3],c=t[4],a=t[5],l=t[6],f=t[7],h=t[8],p=t[9],d=t[10],m=t[11],g=t[12],q=t[13],w=t[14],v=t[15],E=r[0],x=r[1],P=r[2],y=r[3];return e[0]=E*n+x*c+P*h+y*g,e[1]=E*s+x*a+P*p+y*q,e[2]=E*o+x*l+P*d+y*w,e[3]=E*i+x*f+P*m+y*v,E=r[4],x=r[5],P=r[6],y=r[7],e[4]=E*n+x*c+P*h+y*g,e[5]=E*s+x*a+P*p+y*q,e[6]=E*o+x*l+P*d+y*w,e[7]=E*i+x*f+P*m+y*v,E=r[8],x=r[9],P=r[10],y=r[11],e[8]=E*n+x*c+P*h+y*g,e[9]=E*s+x*a+P*p+y*q,e[10]=E*o+x*l+P*d+y*w,e[11]=E*i+x*f+P*m+y*v,E=r[12],x=r[13],P=r[14],y=r[15],e[12]=E*n+x*c+P*h+y*g,e[13]=E*s+x*a+P*p+y*q,e[14]=E*o+x*l+P*d+y*w,e[15]=E*i+x*f+P*m+y*v,e};bc.exports=N3});var Tc=u((zk,Sc)=>{var{EPS:F3}=Z(),{sin:V3,cos:R3}=J(),z3=on(),B3=(e,t,r,n)=>{let[s,o,i]=n,c=s*s+o*o+i*i;if(Math.abs(c)<F3)return z3(e,t);let a=1/Math.sqrt(c);s*=a,o*=a,i*=a;let l=V3(r),f=R3(r),h=1-f,p=t[0],d=t[1],m=t[2],g=t[3],q=t[4],w=t[5],v=t[6],E=t[7],x=t[8],P=t[9],y=t[10],A=t[11],b=s*s*h+f,M=o*s*h+i*l,T=i*s*h-o*l,S=s*o*h-i*l,O=o*o*h+f,D=i*o*h+s*l,R=s*i*h+o*l,G=o*i*h-s*l,N=i*i*h+f;return e[0]=p*b+q*M+x*T,e[1]=d*b+w*M+P*T,e[2]=m*b+v*M+y*T,e[3]=g*b+E*M+A*T,e[4]=p*S+q*O+x*D,e[5]=d*S+w*O+P*D,e[6]=m*S+v*O+y*D,e[7]=g*S+E*O+A*D,e[8]=p*R+q*G+x*N,e[9]=d*R+w*G+P*N,e[10]=m*R+v*G+y*N,e[11]=g*R+E*G+A*N,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e};Sc.exports=B3});var Oc=u((Bk,kc)=>{var{sin:C3,cos:G3}=J(),I3=(e,t,r)=>{let n=C3(r),s=G3(r),o=t[4],i=t[5],c=t[6],a=t[7],l=t[8],f=t[9],h=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*s+l*n,e[5]=i*s+f*n,e[6]=c*s+h*n,e[7]=a*s+p*n,e[8]=l*s-o*n,e[9]=f*s-i*n,e[10]=h*s-c*n,e[11]=p*s-a*n,e};kc.exports=I3});var Fc=u((Ck,Nc)=>{var{sin:D3,cos:$3}=J(),Z3=(e,t,r)=>{let n=D3(r),s=$3(r),o=t[0],i=t[1],c=t[2],a=t[3],l=t[8],f=t[9],h=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s-l*n,e[1]=i*s-f*n,e[2]=c*s-h*n,e[3]=a*s-p*n,e[8]=o*n+l*s,e[9]=i*n+f*s,e[10]=c*n+h*s,e[11]=a*n+p*s,e};Nc.exports=Z3});var Rc=u((Gk,Vc)=>{var{sin:X3,cos:L3}=J(),Y3=(e,t,r)=>{let n=X3(r),s=L3(r),o=t[0],i=t[1],c=t[2],a=t[3],l=t[4],f=t[5],h=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s+l*n,e[1]=i*s+f*n,e[2]=c*s+h*n,e[3]=a*s+p*n,e[4]=l*s-o*n,e[5]=f*s-i*n,e[6]=h*s-c*n,e[7]=p*s-a*n,e};Vc.exports=Y3});var Bc=u((Ik,zc)=>{var U3=(e,t,r)=>{let n=r[0],s=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};zc.exports=U3});var Gc=u((Dk,Cc)=>{var H3=(e,t,r)=>(e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e);Cc.exports=H3});var Dc=u(($k,Ic)=>{var W3=e=>e.map(t=>t.toFixed(7)).toString();Ic.exports=W3});var Zc=u((Zk,$c)=>{var _3=(e,t,r)=>{let n=r[0],s=r[1],o=r[2],i,c,a,l,f,h,p,d,m,g,q,w;return t===e?(e[12]=t[0]*n+t[4]*s+t[8]*o+t[12],e[13]=t[1]*n+t[5]*s+t[9]*o+t[13],e[14]=t[2]*n+t[6]*s+t[10]*o+t[14],e[15]=t[3]*n+t[7]*s+t[11]*o+t[15]):(i=t[0],c=t[1],a=t[2],l=t[3],f=t[4],h=t[5],p=t[6],d=t[7],m=t[8],g=t[9],q=t[10],w=t[11],e[0]=i,e[1]=c,e[2]=a,e[3]=l,e[4]=f,e[5]=h,e[6]=p,e[7]=d,e[8]=m,e[9]=g,e[10]=q,e[11]=w,e[12]=i*n+f*s+m*o+t[12],e[13]=c*n+h*s+g*o+t[13],e[14]=a*n+p*s+q*o+t[14],e[15]=l*n+d*s+w*o+t[15]),e};$c.exports=_3});var L=u((Xk,Xc)=>{Xc.exports={add:Yo(),clone:Wo(),copy:on(),create:er(),invert:Qo(),equals:jo(),fromRotation:an(),fromScaling:ii(),fromTaitBryanRotation:ai(),fromTranslation:ui(),fromValues:hi(),fromVectorRotation:uc(),fromXRotation:hc(),fromYRotation:dc(),fromZRotation:mc(),identity:cn(),isIdentity:xc(),isOnlyTransformScale:vc(),isMirroring:Ec(),mirrorByPlane:Ac(),multiply:Mc(),rotate:Tc(),rotateX:Oc(),rotateY:Fc(),rotateZ:Rc(),scale:Bc(),subtract:Gc(),toString:Dc(),translate:Zc()}});var Pt=u((Lk,Lc)=>{var K3=L(),Q3=e=>(e===void 0&&(e=[]),{sides:e,transforms:K3.create()});Lc.exports=Q3});var Uc=u((Yk,Yc)=>{var J3=(e,t)=>(e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e);Yc.exports=J3});var Wc=u((Uk,Hc)=>{var j3=(e,t,r)=>(e[0]=t[0]+r[0],e[1]=t[1]+r[1],e);Hc.exports=j3});var rr=u((Hk,_c)=>{var ex=e=>Math.atan2(e[1],e[0]);_c.exports=ex});var Qc=u((Wk,Kc)=>{Kc.exports=rr()});var jc=u((_k,Jc)=>{var tx=rr(),rx=e=>tx(e)*57.29577951308232;Jc.exports=rx});var At=u((Kk,ea)=>{var nx=()=>[0,0];ea.exports=nx});var ra=u((Qk,ta)=>{var sx=At(),ox=e=>{let t=sx();return t[0]=e[0],t[1]=e[1],t};ta.exports=ox});var sa=u((Jk,na)=>{var ix=(e,t)=>(e[0]=t[0],e[1]=t[1],e);na.exports=ix});var ia=u((jk,oa)=>{var cx=(e,t,r)=>(e[0]=0,e[1]=0,e[2]=t[0]*r[1]-t[1]*r[0],e);oa.exports=cx});var aa=u((eO,ca)=>{var ax=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)};ca.exports=ax});var ua=u((tO,la)=>{var lx=(e,t,r)=>(e[0]=t[0]/r[0],e[1]=t[1]/r[1],e);la.exports=lx});var ha=u((rO,fa)=>{var ux=(e,t)=>e[0]*t[0]+e[1]*t[1];fa.exports=ux});var da=u((nO,pa)=>{var fx=(e,t)=>e[0]===t[0]&&e[1]===t[1];pa.exports=fx});var yn=u((sO,ga)=>{var{sin:hx,cos:px}=J(),dx=(e,t)=>(e[0]=px(t),e[1]=hx(t),e);ga.exports=dx});var qa=u((oO,ma)=>{var gx=yn(),mx=(e,t)=>gx(e,t*.017453292519943295);ma.exports=mx});var wa=u((iO,xa)=>{var qx=(e,t)=>(e[0]=t,e[1]=t,e);xa.exports=qx});var ya=u((cO,va)=>{var xx=At(),wx=(e,t)=>{let r=xx();return r[0]=e,r[1]=t,r};va.exports=wx});var Pa=u((aO,Ea)=>{var vx=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]);Ea.exports=vx});var ba=u((lO,Aa)=>{var yx=(e,t,r,n)=>{let s=t[0],o=t[1];return e[0]=s+n*(r[0]-s),e[1]=o+n*(r[1]-o),e};Aa.exports=yx});var Sa=u((uO,Ma)=>{var Ex=(e,t,r)=>(e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e);Ma.exports=Ex});var ka=u((fO,Ta)=>{var Px=(e,t,r)=>(e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e);Ta.exports=Px});var Na=u((hO,Oa)=>{var Ax=(e,t,r)=>(e[0]=t[0]*r[0],e[1]=t[1]*r[1],e);Oa.exports=Ax});var Va=u((pO,Fa)=>{var bx=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e);Fa.exports=bx});var En=u((dO,Ra)=>{var Mx=(e,t,r,n)=>{let s=t[0]-r[0],o=t[1]-r[1],i=Math.cos(n),c=Math.sin(n);return e[0]=s*i-o*c+r[0],e[1]=s*c+o*i+r[1],e};Ra.exports=Mx});var Ba=u((gO,za)=>{var{TAU:Sx}=Z(),Tx=At(),kx=En(),Ox=(e,t)=>kx(e,t,Tx(),Sx/4);za.exports=Ox});var Ga=u((mO,Ca)=>{var Nx=(e,t)=>{let r=t[0],n=t[1],s=r*r+n*n;return s>0&&(s=1/Math.sqrt(s)),e[0]=r*s,e[1]=n*s,e};Ca.exports=Nx});var Da=u((qO,Ia)=>{var Fx=(e,t,r)=>(e[0]=t[0]*r,e[1]=t[1]*r,e);Ia.exports=Fx});var Za=u((xO,$a)=>{var Vx=(e,t,r)=>(e[0]=Math.round(t[0]/r)*r+0,e[1]=Math.round(t[1]/r)*r+0,e);$a.exports=Vx});var La=u((wO,Xa)=>{var Rx=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n};Xa.exports=Rx});var Ua=u((vO,Ya)=>{var zx=e=>{let t=e[0],r=e[1];return t*t+r*r};Ya.exports=zx});var Wa=u((yO,Ha)=>{var Bx=(e,t,r)=>(e[0]=t[0]-r[0],e[1]=t[1]-r[1],e);Ha.exports=Bx});var Ka=u((EO,_a)=>{var Cx=e=>`[${e[0].toFixed(7)}, ${e[1].toFixed(7)}]`;_a.exports=Cx});var Ja=u((PO,Qa)=>{var Gx=(e,t,r)=>{let n=t[0],s=t[1];return e[0]=r[0]*n+r[4]*s+r[12],e[1]=r[1]*n+r[5]*s+r[13],e};Qa.exports=Gx});var I=u((AO,ja)=>{ja.exports={abs:Uc(),add:Wc(),angle:Qc(),angleDegrees:jc(),angleRadians:rr(),clone:ra(),copy:sa(),create:At(),cross:ia(),distance:aa(),divide:ua(),dot:ha(),equals:da(),fromAngleDegrees:qa(),fromAngleRadians:yn(),fromScalar:wa(),fromValues:ya(),length:Pa(),lerp:ba(),max:Sa(),min:ka(),multiply:Na(),negate:Va(),normal:Ba(),normalize:Ga(),rotate:En(),scale:Da(),snap:Za(),squaredDistance:La(),squaredLength:Ua(),subtract:Wa(),toString:Ka(),transform:Ja()}});var tl=u((bO,el)=>{var Pn=I(),Ix=Pt(),Dx=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");let t=e.length;if(t<3)throw new Error("the given points must define a closed geometry with three or more points");Pn.equals(e[0],e[t-1])&&--t;let r=[],n=e[t-1];for(let s=0;s<t;s++){let o=e[s];r.push([Pn.clone(n),Pn.clone(o)]),n=o}return Ix(r)};el.exports=Dx});var sl=u((MO,nl)=>{var $x=L(),rl=I(),Zx=Pt(),Xx=e=>{if(e[0]!==0)throw new Error("invalid compact binary data");let t=Zx();t.transforms=$x.clone(e.slice(1,17));for(let r=21;r<e.length;r+=4){let n=rl.fromValues(e[r+0],e[r+1]),s=rl.fromValues(e[r+2],e[r+3]);t.sides.push([n,s])}return e[17]>=0&&(t.color=[e[17],e[18],e[19],e[20]]),t};nl.exports=Xx});var An=u((SO,ol)=>{var Lx=e=>!!(e&&typeof e=="object"&&"sides"in e&&"transforms"in e&&Array.isArray(e.sides)&&"length"in e.transforms);ol.exports=Lx});var al=u((TO,cl)=>{var il=L(),nr=I(),Yx=e=>(il.isIdentity(e.transforms)||(e.sides=e.sides.map(t=>{let r=nr.transform(nr.create(),t[0],e.transforms),n=nr.transform(nr.create(),t[1],e.transforms);return[r,n]}),e.transforms=il.create()),e);cl.exports=Yx});var We=u((kO,ll)=>{var Ux=al(),Hx=e=>Ux(e).sides;ll.exports=Hx});var bn=u((OO,ul)=>{var Wx=Pt(),_x=We(),Kx=e=>{let r=_x(e).map(n=>[n[1],n[0]]);return r.reverse(),Wx(r)};ul.exports=Kx});var Mn=u((NO,fl)=>{var bt=I(),Qx=We(),Jx=e=>{let t=new Map,r=n=>{let s=n.toString();return t.has(s)?t.get(s):(t.set(s,n),n)};return e.map(n=>n.map(r))},jx=e=>{let t=new Map;return Jx(e).forEach(n=>{t.has(n[0])?t.get(n[0]).push(n):t.set(n[0],[n])}),t},ew=e=>{let t=jx(Qx(e)),r=[];for(;;){let n;for(let[i,c]of t){if(n=c.shift(),!n){t.delete(i);continue}break}if(n===void 0)break;let s=[],o=n[0];for(;;){s.push(n[0]);let i=n[1];if(i===o)break;let c=t.get(i);if(!c)throw new Error(`geometry is not closed at vertex ${i}`);let a=tw(n,c);c.length===0&&t.delete(i),n=a}s.length>0&&s.push(s.shift()),r.push(s)}return t.clear(),r},tw=(e,t)=>{if(t.length===1)return t.pop();let r=bt.create(),n=bt.angleDegrees(bt.subtract(r,e[1],e[0])),s,o;t.forEach((c,a)=>{let f=bt.angleDegrees(bt.subtract(r,c[1],c[0]))-n;f<-180&&(f+=360),f>=180&&(f-=360),(o===void 0||f>s)&&(o=a,s=f)});let i=t[o];return t.splice(o,1),i};fl.exports=ew});var pl=u((FO,hl)=>{var rw=We(),nw=e=>{let r=rw(e).map(n=>n[0]);return r.length>0&&r.push(r.shift()),r};hl.exports=nw});var ml=u((VO,gl)=>{var dl=I(),sw=We(),ow=e=>{let t=sw(e),r="geom2 ("+t.length+` sides):
[
`;return t.forEach(n=>{r+="  ["+dl.toString(n[0])+", "+dl.toString(n[1])+`]
`}),r+=`]
`,r};gl.exports=ow});var xl=u((RO,ql)=>{var iw=e=>{let t=e.sides,r=e.transforms,n=[-1,-1,-1,-1];e.color&&(n=e.color);let s=new Float32Array(21+t.length*4);s[0]=0,s[1]=r[0],s[2]=r[1],s[3]=r[2],s[4]=r[3],s[5]=r[4],s[6]=r[5],s[7]=r[6],s[8]=r[7],s[9]=r[8],s[10]=r[9],s[11]=r[10],s[12]=r[11],s[13]=r[12],s[14]=r[13],s[15]=r[14],s[16]=r[15],s[17]=n[0],s[18]=n[1],s[19]=n[2],s[20]=n[3];for(let o=0;o<t.length;o++){let i=o*4+21,c=t[o][0],a=t[o][1];s[i+0]=c[0],s[i+1]=c[1],s[i+2]=a[0],s[i+3]=a[1]}return s};ql.exports=iw});var yl=u((zO,vl)=>{var wl=L(),cw=bn(),aw=(e,t)=>{let r=wl.multiply(wl.create(),e,t.transforms),n=Object.assign({},t,{transforms:r});return e[0]*e[5]-e[4]*e[1]<0?cw(n):n};vl.exports=aw});var Pl=u((BO,El)=>{var lw=I(),uw=An(),fw=Mn(),hw=e=>{if(!uw(e))throw new Error("invalid geom2 structure");if(fw(e),e.sides.forEach(t=>{if(lw.equals(t[0],t[1]))throw new Error(`geom2 self-edge ${t[0]}`)}),!e.transforms.every(Number.isFinite))throw new Error(`geom2 invalid transforms ${e.transforms}`)};El.exports=hw});var B=u((CO,Al)=>{Al.exports={clone:Xo(),create:Pt(),fromPoints:tl(),fromCompactBinary:sl(),isA:An(),reverse:bn(),toOutlines:Mn(),toPoints:pl(),toSides:We(),toString:ml(),toCompactBinary:xl(),transform:yl(),validate:Pl()}});var Ml=u((GO,bl)=>{var pw=e=>Object.assign({},e);bl.exports=pw});var _e=u((IO,Sl)=>{var dw=L(),gw=e=>(e===void 0&&(e=[]),{polygons:e,transforms:dw.create()});Sl.exports=gw});var Nl=u((DO,Ol)=>{var mw=He(),Tl=Et(),kl=vn(),qw=(e,t,r)=>{let n=[],s=[],o=[];Tl(n,r,t),Tl(s,e,t);let i=kl(mw(o,s,n)),c=kl(n);if(c===0)throw Error("a and b are the same point");return i/c},xw=(e,t,r)=>Math.sqrt(qw(e,t,r));Ol.exports=xw});var Rl=u(($O,Vl)=>{var ww=He(),vw=tr(),Fl=Et(),yw=(e,t,r,n)=>{let s=[0,0,0];return Fl(e,t,r),Fl(s,r,n),ww(e,e,s),vw(e,e)};Vl.exports=yw});var Bl=u((ZO,zl)=>{var Sn=class{constructor(){this.head=null,this.tail=null}clear(){this.head=this.tail=null}insertBefore(t,r){r.prev=t.prev,r.next=t,r.prev?r.prev.next=r:this.head=r,t.prev=r}insertAfter(t,r){r.prev=t,r.next=t.next,r.next?r.next.prev=r:this.tail=r,t.next=r}add(t){this.head?this.tail.next=t:this.head=t,t.prev=this.tail,t.next=null,this.tail=t}addAll(t){for(this.head?this.tail.next=t:this.head=t,t.prev=this.tail;t.next;)t=t.next;this.tail=t}remove(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev}removeChain(t,r){t.prev?t.prev.next=r.next:this.head=r.next,r.next?r.next.prev=t.prev:this.tail=t.prev}first(){return this.head}isEmpty(){return!this.head}};zl.exports=Sn});var Gl=u((XO,Cl)=>{var Tn=class{constructor(t,r){this.point=t,this.index=r,this.next=null,this.prev=null,this.face=null}};Cl.exports=Tn});var Dl=u((LO,Il)=>{var Ew=dn(),Pw=wn(),kn=class{constructor(t,r){this.vertex=t,this.face=r,this.next=null,this.prev=null,this.opposite=null}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){return this.tail()?Ew(this.tail().point,this.head().point):-1}lengthSquared(){return this.tail()?Pw(this.tail().point,this.head().point):-1}setOpposite(t){this.opposite=t,t.opposite=this}};Il.exports=kn});var Xl=u((YO,Zl)=>{var On=hn(),Aw=pn(),bw=He(),Nn=vt(),Mw=gn(),Sw=tr(),sr=xn(),Fn=Et(),Vn=Dl(),$l=0,Tw=1,Rn=2,zn=class e{constructor(){this.normal=[],this.centroid=[],this.offset=0,this.outside=null,this.mark=$l,this.edge=null,this.nVertices=0}getEdge(t){if(typeof t!="number")throw Error("requires a number");let r=this.edge;for(;t>0;)r=r.next,t-=1;for(;t<0;)r=r.prev,t+=1;return r}computeNormal(){let t=this.edge,r=t.next,n=r.next,s=Fn([],r.head().point,t.head().point),o=[],i=[];for(this.nVertices=2,this.normal=[0,0,0];n!==t;)Aw(i,s),Fn(s,n.head().point,t.head().point),On(this.normal,this.normal,bw(o,i,s)),n=n.next,this.nVertices+=1;this.area=Mw(this.normal),this.normal=sr(this.normal,this.normal,1/this.area)}computeNormalMinArea(t){if(this.computeNormal(),this.area<t){let r,n=0,s=this.edge;do{let f=s.lengthSquared();f>n&&(r=s,n=f),s=s.next}while(s!==this.edge);let o=r.tail().point,i=r.head().point,c=Fn([],i,o),a=Math.sqrt(n);sr(c,c,1/a);let l=Nn(this.normal,c);sr(c,c,-l),On(this.normal,this.normal,c),Sw(this.normal,this.normal)}}computeCentroid(){this.centroid=[0,0,0];let t=this.edge;do On(this.centroid,this.centroid,t.head().point),t=t.next;while(t!==this.edge);sr(this.centroid,this.centroid,1/this.nVertices)}computeNormalAndCentroid(t){typeof t<"u"?this.computeNormalMinArea(t):this.computeNormal(),this.computeCentroid(),this.offset=Nn(this.normal,this.centroid)}distanceToPlane(t){return Nn(this.normal,t)-this.offset}connectHalfEdges(t,r){let n;if(t.opposite.face===r.opposite.face){let s=r.opposite.face,o;t===this.edge&&(this.edge=r),s.nVertices===3?(o=r.opposite.prev.opposite,s.mark=Rn,n=s):(o=r.opposite.next,s.edge===o.prev&&(s.edge=o),o.prev=o.prev.prev,o.prev.next=o),r.prev=t.prev,r.prev.next=r,r.setOpposite(o),s.computeNormalAndCentroid()}else t.next=r,r.prev=t;return n}mergeAdjacentFaces(t,r){let n=t.opposite,s=n.face;r.push(s),s.mark=Rn;let o=t.prev,i=t.next,c=n.prev,a=n.next;for(;o.opposite.face===s;)o=o.prev,a=a.next;for(;i.opposite.face===s;)i=i.next,c=c.prev;let l;for(l=a;l!==c.next;l=l.next)l.face=this;this.edge=i;let f;return f=this.connectHalfEdges(c,i),f&&r.push(f),f=this.connectHalfEdges(o,a),f&&r.push(f),this.computeNormalAndCentroid(),r}collectIndices(){let t=[],r=this.edge;do t.push(r.head().index),r=r.next;while(r!==this.edge);return t}static createTriangle(t,r,n,s=0){let o=new e,i=new Vn(t,o),c=new Vn(r,o),a=new Vn(n,o);return i.next=a.prev=c,c.next=i.prev=a,a.next=c.prev=i,o.edge=i,o.computeNormalAndCentroid(s),o}};Zl.exports={VISIBLE:$l,NON_CONVEX:Tw,DELETED:Rn,Face:zn}});var Wl=u((UO,Hl)=>{var Bn=vt(),kw=Nl(),Ow=Rl(),Ll=Bl(),Nw=Gl(),{Face:ve,VISIBLE:Ke,NON_CONVEX:Yl,DELETED:Fw}=Xl(),Vw=1,Ul=2,Cn=class{constructor(t){if(!Array.isArray(t))throw TypeError("input is not a valid array");if(t.length<4)throw Error("cannot build a simplex out of <4 points");this.tolerance=-1,this.nFaces=0,this.nPoints=t.length,this.faces=[],this.newFaces=[],this.claimed=new Ll,this.unclaimed=new Ll,this.vertices=[];for(let r=0;r<t.length;r+=1)this.vertices.push(new Nw(t[r],r));this.discardedFaces=[],this.vertexPointIndices=[]}addVertexToFace(t,r){t.face=r,r.outside?this.claimed.insertBefore(r.outside,t):this.claimed.add(t),r.outside=t}removeVertexFromFace(t,r){t===r.outside&&(t.next&&t.next.face===r?r.outside=t.next:r.outside=null),this.claimed.remove(t)}removeAllVerticesFromFace(t){if(t.outside){let r=t.outside;for(;r.next&&r.next.face===t;)r=r.next;return this.claimed.removeChain(t.outside,r),r.next=null,t.outside}}deleteFaceVertices(t,r){let n=this.removeAllVerticesFromFace(t);if(n)if(!r)this.unclaimed.addAll(n);else{let s;for(let o=n;o;o=s)s=o.next,r.distanceToPlane(o.point)>this.tolerance?this.addVertexToFace(o,r):this.unclaimed.add(o)}}resolveUnclaimedPoints(t){let r=this.unclaimed.first();for(let n=r;n;n=r){r=n.next;let s=this.tolerance,o;for(let i=0;i<t.length;i+=1){let c=t[i];if(c.mark===Ke){let a=c.distanceToPlane(n.point);if(a>s&&(s=a,o=c),s>1e3*this.tolerance)break}}o&&this.addVertexToFace(n,o)}}computeExtremes(){let t=[],r=[],n=[],s=[],o,i;for(o=0;o<3;o+=1)n[o]=s[o]=this.vertices[0];for(o=0;o<3;o+=1)t[o]=r[o]=this.vertices[0].point[o];for(o=1;o<this.vertices.length;o+=1){let c=this.vertices[o],a=c.point;for(i=0;i<3;i+=1)a[i]<t[i]&&(t[i]=a[i],n[i]=c);for(i=0;i<3;i+=1)a[i]>r[i]&&(r[i]=a[i],s[i]=c)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(t[0]),Math.abs(r[0]))+Math.max(Math.abs(t[1]),Math.abs(r[1]))+Math.max(Math.abs(t[2]),Math.abs(r[2]))),[n,s]}createInitialSimplex(){let t=this.vertices,[r,n]=this.computeExtremes(),s,o,i,c,a=0,l=0;for(i=0;i<3;i+=1){let g=n[i].point[i]-r[i].point[i];g>a&&(a=g,l=i)}let f=r[l],h=n[l];for(a=0,i=0;i<this.vertices.length;i+=1){let g=this.vertices[i];if(g!==f&&g!==h){let q=kw(g.point,f.point,h.point);q>a&&(a=q,s=g)}}let p=Ow([],f.point,h.point,s.point),d=Bn(f.point,p);for(a=-1,i=0;i<this.vertices.length;i+=1){let g=this.vertices[i];if(g!==f&&g!==h&&g!==s){let q=Math.abs(Bn(p,g.point)-d);q>a&&(a=q,o=g)}}let m=[];if(Bn(o.point,p)-d<0)for(m.push(ve.createTriangle(f,h,s),ve.createTriangle(o,h,f),ve.createTriangle(o,s,h),ve.createTriangle(o,f,s)),i=0;i<3;i+=1){let g=(i+1)%3;m[i+1].getEdge(2).setOpposite(m[0].getEdge(g)),m[i+1].getEdge(1).setOpposite(m[g+1].getEdge(0))}else for(m.push(ve.createTriangle(f,s,h),ve.createTriangle(o,f,h),ve.createTriangle(o,h,s),ve.createTriangle(o,s,f)),i=0;i<3;i+=1){let g=(i+1)%3;m[i+1].getEdge(2).setOpposite(m[0].getEdge((3-i)%3)),m[i+1].getEdge(0).setOpposite(m[g+1].getEdge(1))}for(i=0;i<4;i+=1)this.faces.push(m[i]);for(i=0;i<t.length;i+=1){let g=t[i];if(g!==f&&g!==h&&g!==s&&g!==o){a=this.tolerance;let q;for(c=0;c<4;c+=1){let w=m[c].distanceToPlane(g.point);w>a&&(a=w,q=m[c])}q&&this.addVertexToFace(g,q)}}}reindexFaceAndVertices(){let t=[];for(let r=0;r<this.faces.length;r+=1){let n=this.faces[r];n.mark===Ke&&t.push(n)}this.faces=t}collectFaces(t){let r=[];for(let n=0;n<this.faces.length;n+=1){if(this.faces[n].mark!==Ke)throw Error("attempt to include a destroyed face in the hull");let s=this.faces[n].collectIndices();if(t)r.push(s);else for(let o=0;o<s.length-2;o+=1)r.push([s[0],s[o+1],s[o+2]])}return r}nextVertexToAdd(){if(!this.claimed.isEmpty()){let t,r,n=0,s=this.claimed.first().face;for(r=s.outside;r&&r.face===s;r=r.next){let o=s.distanceToPlane(r.point);o>n&&(n=o,t=r)}return t}}computeHorizon(t,r,n,s){this.deleteFaceVertices(n),n.mark=Fw;let o;r?o=r.next:o=r=n.getEdge(0);do{let i=o.opposite,c=i.face;c.mark===Ke&&(c.distanceToPlane(t)>this.tolerance?this.computeHorizon(t,i,c,s):s.push(o)),o=o.next}while(o!==r)}addAdjoiningFace(t,r){let n=ve.createTriangle(t,r.tail(),r.head());return this.faces.push(n),n.getEdge(-1).setOpposite(r.opposite),n.getEdge(0)}addNewFaces(t,r){this.newFaces=[];let n,s;for(let o=0;o<r.length;o+=1){let i=r[o],c=this.addAdjoiningFace(t,i);n?c.next.setOpposite(s):n=c,this.newFaces.push(c.face),s=c}n.next.setOpposite(s)}oppositeFaceDistance(t){return t.face.distanceToPlane(t.opposite.face.centroid)}doAdjacentMerge(t,r){let n=t.edge,s=!0,o=0;do{if(o>=t.nVertices)throw Error("merge recursion limit exceeded");let i=n.opposite.face,c=!1;if(r===Ul?(this.oppositeFaceDistance(n)>-this.tolerance||this.oppositeFaceDistance(n.opposite)>-this.tolerance)&&(c=!0):t.area>i.area?this.oppositeFaceDistance(n)>-this.tolerance?c=!0:this.oppositeFaceDistance(n.opposite)>-this.tolerance&&(s=!1):this.oppositeFaceDistance(n.opposite)>-this.tolerance?c=!0:this.oppositeFaceDistance(n)>-this.tolerance&&(s=!1),c){let a=t.mergeAdjacentFaces(n,[]);for(let l=0;l<a.length;l+=1)this.deleteFaceVertices(a[l],t);return!0}n=n.next,o+=1}while(n!==t.edge);return s||(t.mark=Yl),!1}addVertexToHull(t){let r=[];this.unclaimed.clear(),this.removeVertexFromFace(t,t.face),this.computeHorizon(t.point,null,t.face,r),this.addNewFaces(t,r);for(let n=0;n<this.newFaces.length;n+=1){let s=this.newFaces[n];if(s.mark===Ke)for(;this.doAdjacentMerge(s,Vw););}for(let n=0;n<this.newFaces.length;n+=1){let s=this.newFaces[n];if(s.mark===Yl)for(s.mark=Ke;this.doAdjacentMerge(s,Ul););}this.resolveUnclaimedPoints(this.newFaces)}build(){let t;for(this.createInitialSimplex();t=this.nextVertexToAdd();)this.addVertexToHull(t);this.reindexFaceAndVertices()}};Hl.exports=Cn});var Gn=u((HO,_l)=>{var Rw=Wl(),zw=(e,t={})=>{let r=new Rw(e);return r.build(),r.collectFaces(t.skipTriangulation)};_l.exports=zw});var Be=u((WO,Kl)=>{var Bw=e=>((e===void 0||e.length<3)&&(e=[]),{vertices:e});Kl.exports=Bw});var Jl=u((_O,Ql)=>{var Cw=Be(),Gw=F(),Iw=(...e)=>{let t,r;return e.length===1?(t=Cw(),r=e[0]):(t=e[0],r=e[1]),t.vertices=r.vertices.map(n=>Gw.clone(n)),t};Ql.exports=Iw});var eu=u((KO,jl)=>{var Dw=F(),$w=Be(),Zw=e=>{let t=e.map(r=>Dw.clone(r));return $w(t)};jl.exports=Zw});var ru=u((QO,tu)=>{var Xw=Be(),Lw=(e,t)=>{let r=Xw(e);return r.plane=t,r};tu.exports=Lw});var Mt=u((JO,nu)=>{var Yw=()=>[0,0,0,0];nu.exports=Yw});var In=u((jO,su)=>{var Uw=Mt(),Hw=e=>{let t=Uw();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t};su.exports=Hw});var Dn=u((eN,ou)=>{var Ww=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e);ou.exports=Ww});var $n=u((tN,iu)=>{var _w=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3];iu.exports=_w});var Zn=u((rN,cu)=>{var Kw=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e);cu.exports=Kw});var Ln=u((nN,au)=>{var Xn=F(),Qw=(e,t,r)=>{let n=Xn.normalize(Xn.create(),t),s=Xn.dot(r,n);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=s,e};au.exports=Qw});var Yn=u((sN,lu)=>{var Jw=Mt(),jw=(e,t,r,n)=>{let s=Jw();return s[0]=e,s[1]=t,s[2]=r,s[3]=n,s};lu.exports=jw});var fu=u((oN,uu)=>{var le=F(),ev=Ln(),tv=(e,...t)=>{e[0]=0,e[1]=0,e[2]=0,e[3]=0;let r=t.length;t.forEach(d=>{le.add(e,e,d)}),le.scale(e,e,1/r);let n=0,s=0,o=0,i=0,c=0,a=0,l=le.create();t.forEach(d=>{le.subtract(l,d,e),n+=l[0]*l[0],s+=l[0]*l[1],o+=l[0]*l[2],i+=l[1]*l[1],c+=l[1]*l[2],a+=l[2]*l[2]}),n/=r,s/=r,o/=r,i/=r,c/=r,a/=r,l[0]=0,l[1]=0,l[2]=0;let f=le.create(),h=i*a-c*c;f[0]=h,f[1]=o*c-s*a,f[2]=s*c-o*i;let p=h*h;return le.add(l,l,le.scale(f,f,p)),h=n*a-o*o,f[0]=o*c-s*a,f[1]=h,f[2]=s*o-c*n,p=h*h,le.dot(l,f)<0&&(p=-p),le.add(l,l,le.scale(f,f,p)),h=n*i-s*s,f[0]=s*c-o*i,f[1]=s*o-c*n,f[2]=h,p=h*h,le.dot(l,f)<0&&(p=-p),le.add(l,l,le.scale(f,f,p)),ev(e,l,e)};uu.exports=tv});var Un=u((iN,hu)=>{var de=F(),rv=(e,...t)=>{let r=t.length,n=de.create(),s=de.create(),o=i=>{let c=t[i],a=t[(i+1)%r],l=t[(i+2)%r];return de.subtract(n,a,c),de.subtract(s,l,c),de.cross(n,n,s),de.normalize(n,n),n};return e[0]=0,e[1]=0,e[2]=0,r===3?de.copy(e,o(0)):(t.forEach((i,c)=>{de.add(e,e,o(c))}),de.normalize(e,e)),e[3]=de.dot(e,t[0]),e};hu.exports=rv});var du=u((cN,pu)=>{var{EPS:Hn}=Z(),se=F(),nv=(e,t,r,n)=>{let s=se.subtract(se.create(),r,t),o=se.subtract(se.create(),n,t);se.length(s)<Hn&&(s=se.orthogonal(s,o)),se.length(o)<Hn&&(o=se.orthogonal(o,s));let i=se.cross(se.create(),s,o);se.length(i)<Hn&&(o=se.orthogonal(o,s),i=se.cross(i,s,o)),i=se.normalize(i,i);let c=se.dot(i,t);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=c,e};pu.exports=nv});var mu=u((aN,gu)=>{var sv=F(),ov=(e,t)=>{let r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]-e[3],n=t[0]-r*e[0],s=t[1]-r*e[1],o=t[2]-r*e[2];return sv.fromValues(n,s,o)};gu.exports=ov});var Wn=u((lN,qu)=>{var iv=F(),cv=(e,t)=>iv.dot(e,t)-e[3];qu.exports=cv});var _n=u((uN,xu)=>{var av=e=>`(${e[0].toFixed(9)}, ${e[1].toFixed(9)}, ${e[2].toFixed(9)}, ${e[3].toFixed(9)})`;xu.exports=av});var vu=u((fN,wu)=>{var lv=L(),oe=F(),uv=Un(),fv=Zn(),hv=(e,t,r)=>{let n=lv.isMirroring(r),s=oe.orthogonal(oe.create(),t),o=oe.cross(s,t,s),i=oe.cross(oe.create(),t,o),c=oe.fromScalar(oe.create(),t[3]);oe.multiply(c,c,t);let a=oe.add(oe.create(),c,o),l=oe.add(oe.create(),c,i);return c=oe.transform(c,c,r),a=oe.transform(a,a,r),l=oe.transform(l,l,r),uv(e,c,a,l),n&&fv(e,e),e};wu.exports=hv});var he=u((hN,yu)=>{yu.exports={clone:In(),copy:Dn(),create:Mt(),equals:$n(),flip:Zn(),fromNormalAndPoint:Ln(),fromValues:Yn(),fromNoisyPoints:fu(),fromPoints:Un(),fromPointsRandom:du(),projectionOfPoint:mu(),signedDistanceToPoint:Wn(),toString:_n(),transform:vu()}});var Au=u((pN,Pu)=>{var Eu=he(),pv=Be(),dv=e=>{let t=e.vertices.slice().reverse(),r=pv(t);return e.plane&&(r.plane=Eu.flip(Eu.create(),e.plane)),r};Pu.exports=dv});var Kn=u((dN,bu)=>{var gv=e=>!!(e&&typeof e=="object"&&"vertices"in e&&Array.isArray(e.vertices));bu.exports=gv});var Qn=u((gN,Su)=>{var Mu=he(),Ce=F(),mv=e=>qv(e.vertices),qv=e=>{let t=e.length;if(t>2){let r=Mu.fromPoints(Mu.create(),...e),n=e[t-2],s=e[t-1];for(let o=0;o<t;o++){let i=e[o];if(!xv(n,s,i,r))return!1;n=s,s=i}}return!0},xv=(e,t,r,n)=>{let s=Ce.cross(Ce.create(),Ce.subtract(Ce.create(),t,e),Ce.subtract(Ce.create(),r,t));return Ce.dot(s,n)>=0};Su.exports=mv});var or=u((mN,ku)=>{var Tu=he(),wv=e=>(e.plane||(e.plane=Tu.fromPoints(Tu.create(),...e.vertices)),e.plane);ku.exports=wv});var Jn=u((qN,Ou)=>{var vv=or(),yv=e=>{let t=e.vertices.length;if(t<3)return 0;let r=e.vertices,n=vv(e),s=Math.abs(n[0]),o=Math.abs(n[1]),i=Math.abs(n[2]);if(s+o+i===0)return 0;let c=3;s>o&&s>i?c=1:o>i&&(c=2);let a=0,l=0,f=1,h=2;switch(c){case 1:for(f=1;f<t;f++)l=f-1,h=(f+1)%t,a+=r[f][1]*(r[h][2]-r[l][2]);a+=r[0][1]*(r[1][2]-r[t-1][2]),a/=2*n[0];break;case 2:for(f=1;f<t;f++)l=f-1,h=(f+1)%t,a+=r[f][2]*(r[h][0]-r[l][0]);a+=r[0][2]*(r[1][0]-r[t-1][0]),a/=2*n[1];break;case 3:default:for(f=1;f<t;f++)l=f-1,h=(f+1)%t,a+=r[f][0]*(r[h][1]-r[l][1]);a+=r[0][0]*(r[1][1]-r[t-1][1]),a/=2*n[2];break}return a};Ou.exports=yv});var Fu=u((xN,Nu)=>{var St=F(),Ev=e=>{let t=e.vertices,r=t.length,n=r===0?St.create():St.clone(t[0]),s=St.clone(n);for(let o=1;o<r;o++)St.min(n,n,t[o]),St.max(s,s,t[o]);return[n,s]};Nu.exports=Ev});var Ru=u((wN,Vu)=>{var Pv=(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3];Vu.exports=Pv});var Bu=u((vN,zu)=>{var Av=(e,t)=>(e[0]=t,e[1]=t,e[2]=t,e[3]=t,e);zu.exports=Av});var Gu=u((yN,Cu)=>{var bv=(e,t,r)=>{let[n,s,o,i]=t;return e[0]=r[0]*n+r[4]*s+r[8]*o+r[12]*i,e[1]=r[1]*n+r[5]*s+r[9]*o+r[13]*i,e[2]=r[2]*n+r[6]*s+r[10]*o+r[14]*i,e[3]=r[3]*n+r[7]*s+r[11]*o+r[15]*i,e};Cu.exports=bv});var jn=u((EN,Iu)=>{Iu.exports={clone:In(),copy:Dn(),create:Mt(),dot:Ru(),equals:$n(),fromScalar:Bu(),fromValues:Yn(),toString:_n(),transform:Gu()}});var Zu=u((PN,$u)=>{var Mv=jn(),Du=new WeakMap,Sv=e=>{let t=Du.get(e);if(t)return t;let r=e.vertices,n=Mv.create();if(r.length===0)return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n;let s=r[0],o=s,i=s,c=s,a=s,l=s;r.forEach(d=>{s[0]>d[0]&&(s=d),o[1]>d[1]&&(o=d),i[2]>d[2]&&(i=d),c[0]<d[0]&&(c=d),a[1]<d[1]&&(a=d),l[2]<d[2]&&(l=d)}),n[0]=(s[0]+c[0])*.5,n[1]=(o[1]+a[1])*.5,n[2]=(i[2]+l[2])*.5;let f=n[0]-c[0],h=n[1]-a[1],p=n[2]-l[2];return n[3]=Math.sqrt(f*f+h*h+p*p),Du.set(e,n),n};$u.exports=Sv});var Lu=u((AN,Xu)=>{var es=F(),Tv=e=>{let t=0,r=e.vertices,n=es.create();for(let s=0;s<r.length-2;s++)es.cross(n,r[s+1],r[s+2]),t+=es.dot(r[0],n);return t/=6,t};Xu.exports=Tv});var Uu=u((bN,Yu)=>{var kv=e=>e.vertices;Yu.exports=kv});var Wu=u((MN,Hu)=>{var Ov=F(),Nv=e=>{let t="poly3: vertices: [";return e.vertices.forEach(r=>{t+=`${Ov.toString(r)}, `}),t+="]",t};Hu.exports=Nv});var Qu=u((SN,Ku)=>{var Fv=L(),_u=F(),Vv=Be(),Rv=(e,t)=>{let r=t.vertices.map(n=>_u.transform(_u.create(),n,e));return Fv.isMirroring(e)&&r.reverse(),Vv(r)};Ku.exports=Rv});var ju=u((TN,Ju)=>{var zv=Wn(),{NEPS:Bv}=Z(),Cv=F(),Gv=Kn(),Iv=Qn(),Dv=Jn(),$v=or(),Zv=e=>{if(!Gv(e))throw new Error("invalid poly3 structure");if(e.vertices.length<3)throw new Error(`poly3 not enough vertices ${e.vertices.length}`);if(Dv(e)<=0)throw new Error("poly3 area must be greater than zero");for(let t=0;t<e.vertices.length;t++)if(Cv.equals(e.vertices[t],e.vertices[(t+1)%e.vertices.length]))throw new Error(`poly3 duplicate vertex ${e.vertices[t]}`);if(!Iv(e))throw new Error("poly3 must be convex");if(e.vertices.forEach(t=>{if(!t.every(Number.isFinite))throw new Error(`poly3 invalid vertex ${t}`)}),e.vertices.length>3){let t=$v(e);e.vertices.forEach(r=>{let n=Math.abs(zv(t,r));if(n>Bv)throw new Error(`poly3 must be coplanar: vertex ${r} distance ${n}`)})}};Ju.exports=Zv});var $=u((kN,e1)=>{e1.exports={clone:Jl(),create:Be(),fromPoints:eu(),fromPointsAndPlane:ru(),invert:Au(),isA:Kn(),isConvex:Qn(),measureArea:Jn(),measureBoundingBox:Fu(),measureBoundingSphere:Zu(),measureSignedVolume:Lu(),plane:or(),toPoints:Uu(),toString:Wu(),transform:Qu(),validate:ju()}});var r1=u((ON,t1)=>{var Xv=Gn(),Lv=_e(),Yv=$(),Uv=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");let r=Xv(e,{skipTriangulation:!0}).map(n=>{let s=n.map(o=>e[o]);return Yv.create(s)});return Lv(r)};t1.exports=Uv});var s1=u((NN,n1)=>{var Hv=$(),Wv=_e(),_v=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");let t=e.map((n,s)=>Hv.create(n));return Wv(t)};n1.exports=_v});var i1=u((FN,o1)=>{var Kv=F(),Qv=L(),Jv=$(),jv=_e(),ey=e=>{if(e[0]!==1)throw new Error("invalid compact binary data");let t=jv();t.transforms=Qv.clone(e.slice(1,17));let r=e[21],n=22,s=e.length-r*3;for(;s<e.length;){let o=e[n];n++;let i=[];for(let c=0;c<o;c++)i.push(Kv.fromValues(e[s],e[s+1],e[s+2])),s+=3;t.polygons.push(Jv.create(i))}return e[17]>=0&&(t.color=[e[17],e[18],e[19],e[20]]),t};o1.exports=ey});var l1=u((VN,a1)=>{var c1=L(),ty=$(),ry=e=>(c1.isIdentity(e.transforms)||(e.polygons=e.polygons.map(t=>ty.transform(e.transforms,t)),e.transforms=c1.create()),e);a1.exports=ry});var Tt=u((RN,u1)=>{var ny=l1(),sy=e=>ny(e).polygons;u1.exports=sy});var h1=u((zN,f1)=>{var oy=$(),iy=_e(),cy=Tt(),ay=e=>{let r=cy(e).map(n=>oy.invert(n));return iy(r)};f1.exports=ay});var ts=u((BN,p1)=>{var ly=e=>!!(e&&typeof e=="object"&&"polygons"in e&&"transforms"in e&&Array.isArray(e.polygons)&&"length"in e.transforms);p1.exports=ly});var g1=u((CN,d1)=>{var uy=$(),fy=Tt(),hy=e=>fy(e).map(n=>uy.toPoints(n));d1.exports=hy});var q1=u((GN,m1)=>{var py=$(),dy=Tt(),gy=e=>{let t=dy(e),r="geom3 ("+t.length+` polygons):
`;return t.forEach(n=>{r+="  "+py.toString(n)+`
`}),r};m1.exports=gy});var w1=u((IN,x1)=>{var my=$(),qy=e=>{let t=e.polygons,r=e.transforms,n=t.length,s=t.reduce((l,f)=>l+f.vertices.length,0),o=[-1,-1,-1,-1];e.color&&(o=e.color);let i=new Float32Array(22+n+s*3);i[0]=1,i[1]=r[0],i[2]=r[1],i[3]=r[2],i[4]=r[3],i[5]=r[4],i[6]=r[5],i[7]=r[6],i[8]=r[7],i[9]=r[8],i[10]=r[9],i[11]=r[10],i[12]=r[11],i[13]=r[12],i[14]=r[13],i[15]=r[14],i[16]=r[15],i[17]=o[0],i[18]=o[1],i[19]=o[2],i[20]=o[3],i[21]=s;let c=22,a=c+n;return t.forEach(l=>{let f=my.toPoints(l);i[c]=f.length,c++;for(let h=0;h<f.length;h++){let p=f[h];i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],a+=3}}),i};x1.exports=qy});var E1=u((DN,y1)=>{var v1=L(),xy=(e,t)=>{let r=v1.multiply(v1.create(),e,t.transforms);return Object.assign({},t,{transforms:r})};y1.exports=xy});var A1=u(($N,P1)=>{var wy=$(),vy=ts(),yy=e=>{if(!vy(e))throw new Error("invalid geom3 structure");if(e.polygons.forEach(wy.validate),Ey(e),!e.transforms.every(Number.isFinite))throw new Error(`geom3 invalid transforms ${e.transforms}`)},Ey=e=>{let t=new Map;e.polygons.forEach(({vertices:n})=>{n.forEach((s,o)=>{let i=`${s}`,c=`${n[(o+1)%n.length]}`,a=`${i}/${c}`,l=t.has(a)?t.get(a):0;t.set(a,l+1)})});let r=[];if(t.forEach((n,s)=>{let o=s.split("/").reverse().join("/"),i=t.get(o);n!==i&&r.push(s.replace("/"," -> "))}),r.length>0)throw new Error(`non-manifold edges ${r.length}
${r.join(`
`)}`)};P1.exports=yy});var C=u((ZN,b1)=>{b1.exports={clone:Ml(),create:_e(),fromPointsConvex:r1(),fromPoints:s1(),fromCompactBinary:i1(),invert:h1(),isA:ts(),toPoints:g1(),toPolygons:Tt(),toString:q1(),toCompactBinary:w1(),transform:E1(),validate:A1()}});var ir=u((XN,M1)=>{var Py=e=>Object.assign({},e);M1.exports=Py});var rs=u((LN,T1)=>{var{EPS:S1}=Z(),Ay=I(),by=ir(),My=e=>{if(e.isClosed)return e;let t=by(e);if(t.isClosed=!0,t.points.length>1){let r=t.points,n=r[0],s=r[r.length-1];for(;Ay.distance(n,s)<S1*S1&&(r.pop(),r.length!==1);)s=r[r.length-1]}return t};T1.exports=My});var kt=u((YN,k1)=>{var Sy=L(),Ty=e=>(e===void 0&&(e=[]),{points:e,isClosed:!1,transforms:Sy.create()});k1.exports=Ty});var cr=u((UN,F1)=>{var{EPS:O1}=Z(),N1=I(),ky=rs(),Oy=kt(),Ny=(e,t)=>{let r={closed:!1},{closed:n}=Object.assign({},r,e),s=Oy();if(s.points=t.map(o=>N1.clone(o)),s.points.length>1){let o=s.points[0],i=s.points[s.points.length-1];N1.distance(o,i)<O1*O1&&(n=!0)}return n===!0&&(s=ky(s)),s};F1.exports=Ny});var B1=u((HN,z1)=>{var V1=L(),R1=I(),Fy=e=>(V1.isIdentity(e.transforms)||(e.points=e.points.map(t=>R1.transform(R1.create(),t,e.transforms)),e.transforms=V1.create()),e);z1.exports=Fy});var Ge=u((WN,C1)=>{var Vy=B1(),Ry=e=>Vy(e).points;C1.exports=Ry});var I1=u((_N,G1)=>{var{TAU:ar}=Z(),_=I(),zy=cr(),By=Ge(),Cy=(e,t)=>{let r={radius:[0,0],xaxisrotation:0,clockwise:!1,large:!1,segments:16},{endpoint:n,radius:s,xaxisrotation:o,clockwise:i,large:c,segments:a}=Object.assign({},r,e);if(!Array.isArray(n))throw new Error("endpoint must be an array of X and Y values");if(n.length<2)throw new Error("endpoint must contain X and Y values");if(n=_.clone(n),!Array.isArray(s))throw new Error("radius must be an array of X and Y values");if(s.length<2)throw new Error("radius must contain X and Y values");if(a<4)throw new Error("segments must be four or more");let l=1e5;if(t.isClosed)throw new Error("the given path cannot be closed");let f=By(t);if(f.length<1)throw new Error("the given path must contain one or more points (as the starting point for the arc)");let h=s[0],p=s[1],d=f[f.length-1];h=Math.round(h*l)/l,p=Math.round(p*l)/l,n=_.fromValues(Math.round(n[0]*l)/l,Math.round(n[1]*l)/l);let m=!i,g=[];if(h===0||p===0)g.push(n);else{h=Math.abs(h),p=Math.abs(p);let w=o,v=Math.cos(w),E=Math.sin(w),x=_.subtract(_.create(),d,n);_.scale(x,x,.5);let P=Math.round((v*x[0]+E*x[1])*l)/l,y=Math.round((-E*x[0]+v*x[1])*l)/l,A=_.fromValues(P,y),b=A[0]*A[0]/(h*h)+A[1]*A[1]/(p*p);if(b>1){let ne=Math.sqrt(b);h*=ne,p*=ne,h=Math.round(h*l)/l,p=Math.round(p*l)/l}let M=Math.sqrt((h*h*p*p-h*h*A[1]*A[1]-p*p*A[0]*A[0])/(h*h*A[1]*A[1]+p*p*A[0]*A[0]));m===c&&(M=-M);let T=_.fromValues(h*A[1]/p,-p*A[0]/h);_.scale(T,T,M);let S=_.fromValues(v*T[0]-E*T[1],E*T[0]+v*T[1]);S=_.add(S,S,_.scale(_.create(),_.add(_.create(),d,n),.5));let O=_.fromValues((A[0]-T[0])/h,(A[1]-T[1])/p),D=_.fromValues((-A[0]-T[0])/h,(-A[1]-T[1])/p),R=_.angleRadians(O),N=_.angleRadians(D)-R;N=N%ar,!m&&N>0?N-=ar:m&&N<0&&(N+=ar);let ee=Math.ceil(Math.abs(N)/ar*a)+1;ee<1&&(ee=1);for(let ne=1;ne<ee;ne++){let Ae=R+ne/ee*N,wt=Math.cos(Ae),Jt=Math.sin(Ae),Ue=_.fromValues(v*h*wt-E*p*Jt,E*h*wt+v*p*Jt);_.add(Ue,Ue,S),g.push(Ue)}ee&&g.push(e.endpoint)}return g=f.concat(g),zy({},g)};G1.exports=Cy});var ns=u((KN,D1)=>{var Gy=cr(),Iy=Ge(),{equals:Dy}=I(),$y=(...e)=>{let t=!1,r=[];return e.forEach((n,s)=>{let o=Iy(n).slice();if(r.length>0&&o.length>0&&Dy(o[0],r[r.length-1])&&o.shift(),o.length>0&&t)throw new Error(`Cannot concatenate to a closed path; check the ${s}th path`);t=n.isClosed,r=r.concat(o)}),Gy({closed:t},r)};D1.exports=$y});var ss=u((QN,$1)=>{var Zy=ns(),Xy=kt(),Ly=(e,t)=>Zy(t,Xy(e));$1.exports=Ly});var X1=u((JN,Z1)=>{var{TAU:Yy}=Z(),ue=I(),Uy=I(),Hy=ss(),Wy=Ge(),_y=(e,t)=>{let r={segments:16},{controlPoints:n,segments:s}=Object.assign({},r,e);if(!Array.isArray(n))throw new Error("controlPoints must be an array of one or more points");if(n.length<1)throw new Error("controlPoints must be an array of one or more points");if(s<4)throw new Error("segments must be four or more");if(t.isClosed)throw new Error("the given geometry cannot be closed");let o=Wy(t);if(o.length<1)throw new Error("the given path must contain one or more points (as the starting point for the bezier curve)");if(n=n.slice(),n[0]===null){if(n.length<2)throw new Error("a null control point must be passed with one more control points");let y=o[o.length-2];if("lastBezierControlPoint"in t&&(y=t.lastBezierControlPoint),!Array.isArray(y))throw new Error("the given path must contain TWO or more points if given a null control point");let A=ue.scale(ue.create(),o[o.length-1],2);ue.subtract(A,A,y),n[0]=A}n.unshift(o[o.length-1]);let c=n.length-1,a=[],l=1;for(let y=0;y<=c;++y)y>0&&(l*=y),a.push(l);let f=[];for(let y=0;y<=c;++y){let A=a[c]/(a[y]*a[c-y]);f.push(A)}let h=ue.create(),p=ue.create(),d=Uy.create(),m=y=>{let A=1,b=Math.pow(1-y,c),M=y!==1?1/(1-y):1,T=ue.create();for(let S=0;S<=c;++S){S===c&&(b=1);let O=f[S]*A*b,D=ue.scale(h,n[S],O);ue.add(T,T,D),A*=y,b*=M}return T},g=[],q=[],w=c+1;for(let y=0;y<w;++y){let A=y/(w-1),b=m(A);g.push(b),q.push(A)}let v=1,E=Yy/s,x=Math.sin(E);for(;v<g.length-1;){let y=ue.subtract(h,g[v],g[v-1]);ue.normalize(y,y);let A=ue.subtract(p,g[v+1],g[v]);ue.normalize(A,A);let b=ue.cross(d,y,A);if(Math.abs(b[2])>x){let M=q[v-1],T=q[v+1],S=M+(T-M)*1/3,O=M+(T-M)*2/3,D=m(S),R=m(O);g.splice(v,1,D,R),q.splice(v,1,S,O),v--,v<1&&(v=1)}else++v}g.shift();let P=Hy(g,t);return P.lastBezierControlPoint=n[n.length-2],P};Z1.exports=_y});var U1=u((jN,Y1)=>{var Ky=I(),L1=Ge(),Qy=(e,t)=>{if(e.isClosed!==t.isClosed||e.points.length!==t.points.length)return!1;let r=L1(e),n=L1(t),s=r.length,o=0;do{let i=!1;for(let c=0;c<s;c++)if(!Ky.equals(r[c],n[(c+o)%s])){i=!0;break}if(i===!1)return!0;if(!e.isClosed)return!1}while(++o<s);return!1};Y1.exports=Qy});var W1=u((eF,H1)=>{var Jy=L(),jy=I(),e4=kt(),t4=e=>{if(e[0]!==2)throw new Error("invalid compact binary data");let t=e4();t.transforms=Jy.clone(e.slice(1,17)),t.isClosed=!!e[17];for(let r=22;r<e.length;r+=2){let n=jy.fromValues(e[r],e[r+1]);t.points.push(n)}return e[18]>=0&&(t.color=[e[18],e[19],e[20],e[21]]),t};H1.exports=t4});var os=u((tF,_1)=>{var r4=e=>!!(e&&typeof e=="object"&&"points"in e&&"transforms"in e&&"isClosed"in e&&Array.isArray(e.points)&&"length"in e.transforms);_1.exports=r4});var Q1=u((rF,K1)=>{var n4=ir(),s4=e=>{let t=n4(e);return t.points=e.points.slice().reverse(),t};K1.exports=s4});var j1=u((nF,J1)=>{var o4=I(),i4=Ge(),c4=e=>{let t=i4(e),r="path ("+t.length+" points, "+e.isClosed+`):
[
`;return t.forEach(n=>{r+="  "+o4.toString(n)+`,
`}),r+=`]
`,r};J1.exports=c4});var t0=u((sF,e0)=>{var a4=e=>{let t=e.points,r=e.transforms,n=[-1,-1,-1,-1];e.color&&(n=e.color);let s=new Float32Array(22+t.length*2);s[0]=2,s[1]=r[0],s[2]=r[1],s[3]=r[2],s[4]=r[3],s[5]=r[4],s[6]=r[5],s[7]=r[6],s[8]=r[7],s[9]=r[8],s[10]=r[9],s[11]=r[10],s[12]=r[11],s[13]=r[12],s[14]=r[13],s[15]=r[14],s[16]=r[15],s[17]=e.isClosed?1:0,s[18]=n[0],s[19]=n[1],s[20]=n[2],s[21]=n[3];for(let o=0;o<t.length;o++){let i=o*2+22,c=t[o];s[i]=c[0],s[i+1]=c[1]}return s};e0.exports=a4});var s0=u((oF,n0)=>{var r0=L(),l4=(e,t)=>{let r=r0.multiply(r0.create(),e,t.transforms);return Object.assign({},t,{transforms:r})};n0.exports=l4});var i0=u((iF,o0)=>{var u4=I(),f4=os(),h4=e=>{if(!f4(e))throw new Error("invalid path2 structure");if(e.points.length>1){for(let t=0;t<e.points.length;t++)if(u4.equals(e.points[t],e.points[(t+1)%e.points.length]))throw new Error(`path2 duplicate points ${e.points[t]}`)}if(e.points.forEach(t=>{if(!t.every(Number.isFinite))throw new Error(`path2 invalid point ${t}`)}),!e.transforms.every(Number.isFinite))throw new Error(`path2 invalid transforms ${e.transforms}`)};o0.exports=h4});var X=u((cF,c0)=>{c0.exports={appendArc:I1(),appendBezier:X1(),appendPoints:ss(),clone:ir(),close:rs(),concat:ns(),create:kt(),equals:U1(),fromPoints:cr(),fromCompactBinary:W1(),isA:os(),reverse:Q1(),toPoints:Ge(),toString:j1(),toCompactBinary:t0(),transform:s0(),validate:i0()}});var p0=u((aF,h0)=>{var p4=z(),a0=B(),l0=C(),u0=X(),f0=$(),d4=(e,t)=>{let r=a0.clone(t);return r.color=e,r},g4=(e,t)=>{let r=l0.clone(t);return r.color=e,r},m4=(e,t)=>{let r=u0.clone(t);return r.color=e,r},q4=(e,t)=>{let r=f0.clone(t);return r.color=e,r},x4=(e,...t)=>{if(!Array.isArray(e))throw new Error("color must be an array");if(e.length<3)throw new Error("color must contain R, G and B values");if(e.length===3&&(e=[e[0],e[1],e[2],1]),t=p4(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>a0.isA(n)?d4(e,n):l0.isA(n)?g4(e,n):u0.isA(n)?m4(e,n):f0.isA(n)?q4(e,n):(n.color=e,n));return r.length===1?r[0]:r};h0.exports=x4});var is=u((lF,d0)=>{var w4={black:[0,0,0],silver:[.7529411764705882,.7529411764705882,.7529411764705882],gray:[.5019607843137255,.5019607843137255,.5019607843137255],white:[1,1,1],maroon:[.5019607843137255,0,0],red:[1,0,0],purple:[.5019607843137255,0,.5019607843137255],fuchsia:[1,0,1],green:[0,.5019607843137255,0],lime:[0,1,0],olive:[.5019607843137255,.5019607843137255,0],yellow:[1,1,0],navy:[0,0,.5019607843137255],blue:[0,0,1],teal:[0,.5019607843137255,.5019607843137255],aqua:[0,1,1],aliceblue:[.9411764705882353,.9725490196078431,1],antiquewhite:[.9803921568627451,.9215686274509803,.8431372549019608],aquamarine:[.4980392156862745,1,.8313725490196079],azure:[.9411764705882353,1,1],beige:[.9607843137254902,.9607843137254902,.8627450980392157],bisque:[1,.8941176470588236,.7686274509803922],blanchedalmond:[1,.9215686274509803,.803921568627451],blueviolet:[.5411764705882353,.16862745098039217,.8862745098039215],brown:[.6470588235294118,.16470588235294117,.16470588235294117],burlywood:[.8705882352941177,.7215686274509804,.5294117647058824],cadetblue:[.37254901960784315,.6196078431372549,.6274509803921569],chartreuse:[.4980392156862745,1,0],chocolate:[.8235294117647058,.4117647058823529,.11764705882352941],coral:[1,.4980392156862745,.3137254901960784],cornflowerblue:[.39215686274509803,.5843137254901961,.9294117647058824],cornsilk:[1,.9725490196078431,.8627450980392157],crimson:[.8627450980392157,.0784313725490196,.23529411764705882],cyan:[0,1,1],darkblue:[0,0,.5450980392156862],darkcyan:[0,.5450980392156862,.5450980392156862],darkgoldenrod:[.7215686274509804,.5254901960784314,.043137254901960784],darkgray:[.6627450980392157,.6627450980392157,.6627450980392157],darkgreen:[0,.39215686274509803,0],darkgrey:[.6627450980392157,.6627450980392157,.6627450980392157],darkkhaki:[.7411764705882353,.7176470588235294,.4196078431372549],darkmagenta:[.5450980392156862,0,.5450980392156862],darkolivegreen:[.3333333333333333,.4196078431372549,.1843137254901961],darkorange:[1,.5490196078431373,0],darkorchid:[.6,.19607843137254902,.8],darkred:[.5450980392156862,0,0],darksalmon:[.9137254901960784,.5882352941176471,.47843137254901963],darkseagreen:[.5607843137254902,.7372549019607844,.5607843137254902],darkslateblue:[.2823529411764706,.23921568627450981,.5450980392156862],darkslategray:[.1843137254901961,.30980392156862746,.30980392156862746],darkslategrey:[.1843137254901961,.30980392156862746,.30980392156862746],darkturquoise:[0,.807843137254902,.8196078431372549],darkviolet:[.5803921568627451,0,.8274509803921568],deeppink:[1,.0784313725490196,.5764705882352941],deepskyblue:[0,.7490196078431373,1],dimgray:[.4117647058823529,.4117647058823529,.4117647058823529],dimgrey:[.4117647058823529,.4117647058823529,.4117647058823529],dodgerblue:[.11764705882352941,.5647058823529412,1],firebrick:[.6980392156862745,.13333333333333333,.13333333333333333],floralwhite:[1,.9803921568627451,.9411764705882353],forestgreen:[.13333333333333333,.5450980392156862,.13333333333333333],gainsboro:[.8627450980392157,.8627450980392157,.8627450980392157],ghostwhite:[.9725490196078431,.9725490196078431,1],gold:[1,.8431372549019608,0],goldenrod:[.8549019607843137,.6470588235294118,.12549019607843137],greenyellow:[.6784313725490196,1,.1843137254901961],grey:[.5019607843137255,.5019607843137255,.5019607843137255],honeydew:[.9411764705882353,1,.9411764705882353],hotpink:[1,.4117647058823529,.7058823529411765],indianred:[.803921568627451,.3607843137254902,.3607843137254902],indigo:[.29411764705882354,0,.5098039215686274],ivory:[1,1,.9411764705882353],khaki:[.9411764705882353,.9019607843137255,.5490196078431373],lavender:[.9019607843137255,.9019607843137255,.9803921568627451],lavenderblush:[1,.9411764705882353,.9607843137254902],lawngreen:[.48627450980392156,.9882352941176471,0],lemonchiffon:[1,.9803921568627451,.803921568627451],lightblue:[.6784313725490196,.8470588235294118,.9019607843137255],lightcoral:[.9411764705882353,.5019607843137255,.5019607843137255],lightcyan:[.8784313725490196,1,1],lightgoldenrodyellow:[.9803921568627451,.9803921568627451,.8235294117647058],lightgray:[.8274509803921568,.8274509803921568,.8274509803921568],lightgreen:[.5647058823529412,.9333333333333333,.5647058823529412],lightgrey:[.8274509803921568,.8274509803921568,.8274509803921568],lightpink:[1,.7137254901960784,.7568627450980392],lightsalmon:[1,.6274509803921569,.47843137254901963],lightseagreen:[.12549019607843137,.6980392156862745,.6666666666666666],lightskyblue:[.5294117647058824,.807843137254902,.9803921568627451],lightslategray:[.4666666666666667,.5333333333333333,.6],lightslategrey:[.4666666666666667,.5333333333333333,.6],lightsteelblue:[.6901960784313725,.7686274509803922,.8705882352941177],lightyellow:[1,1,.8784313725490196],limegreen:[.19607843137254902,.803921568627451,.19607843137254902],linen:[.9803921568627451,.9411764705882353,.9019607843137255],magenta:[1,0,1],mediumaquamarine:[.4,.803921568627451,.6666666666666666],mediumblue:[0,0,.803921568627451],mediumorchid:[.7294117647058823,.3333333333333333,.8274509803921568],mediumpurple:[.5764705882352941,.4392156862745098,.8588235294117647],mediumseagreen:[.23529411764705882,.7019607843137254,.44313725490196076],mediumslateblue:[.4823529411764706,.40784313725490196,.9333333333333333],mediumspringgreen:[0,.9803921568627451,.6039215686274509],mediumturquoise:[.2823529411764706,.8196078431372549,.8],mediumvioletred:[.7803921568627451,.08235294117647059,.5215686274509804],midnightblue:[.09803921568627451,.09803921568627451,.4392156862745098],mintcream:[.9607843137254902,1,.9803921568627451],mistyrose:[1,.8941176470588236,.8823529411764706],moccasin:[1,.8941176470588236,.7098039215686275],navajowhite:[1,.8705882352941177,.6784313725490196],oldlace:[.9921568627450981,.9607843137254902,.9019607843137255],olivedrab:[.4196078431372549,.5568627450980392,.13725490196078433],orange:[1,.6470588235294118,0],orangered:[1,.27058823529411763,0],orchid:[.8549019607843137,.4392156862745098,.8392156862745098],palegoldenrod:[.9333333333333333,.9098039215686274,.6666666666666666],palegreen:[.596078431372549,.984313725490196,.596078431372549],paleturquoise:[.6862745098039216,.9333333333333333,.9333333333333333],palevioletred:[.8588235294117647,.4392156862745098,.5764705882352941],papayawhip:[1,.9372549019607843,.8352941176470589],peachpuff:[1,.8549019607843137,.7254901960784313],peru:[.803921568627451,.5215686274509804,.24705882352941178],pink:[1,.7529411764705882,.796078431372549],plum:[.8666666666666667,.6274509803921569,.8666666666666667],powderblue:[.6901960784313725,.8784313725490196,.9019607843137255],rosybrown:[.7372549019607844,.5607843137254902,.5607843137254902],royalblue:[.2549019607843137,.4117647058823529,.8823529411764706],saddlebrown:[.5450980392156862,.27058823529411763,.07450980392156863],salmon:[.9803921568627451,.5019607843137255,.4470588235294118],sandybrown:[.9568627450980393,.6431372549019608,.3764705882352941],seagreen:[.1803921568627451,.5450980392156862,.3411764705882353],seashell:[1,.9607843137254902,.9333333333333333],sienna:[.6274509803921569,.3215686274509804,.17647058823529413],skyblue:[.5294117647058824,.807843137254902,.9215686274509803],slateblue:[.41568627450980394,.35294117647058826,.803921568627451],slategray:[.4392156862745098,.5019607843137255,.5647058823529412],slategrey:[.4392156862745098,.5019607843137255,.5647058823529412],snow:[1,.9803921568627451,.9803921568627451],springgreen:[0,1,.4980392156862745],steelblue:[.27450980392156865,.5098039215686274,.7058823529411765],tan:[.8235294117647058,.7058823529411765,.5490196078431373],thistle:[.8470588235294118,.7490196078431373,.8470588235294118],tomato:[1,.38823529411764707,.2784313725490196],turquoise:[.25098039215686274,.8784313725490196,.8156862745098039],violet:[.9333333333333333,.5098039215686274,.9333333333333333],wheat:[.9607843137254902,.8705882352941177,.7019607843137254],whitesmoke:[.9607843137254902,.9607843137254902,.9607843137254902],yellowgreen:[.6039215686274509,.803921568627451,.19607843137254902]};d0.exports=w4});var m0=u((uF,g0)=>{var v4=is(),y4=e=>v4[e.toLowerCase()];g0.exports=y4});var x0=u((fF,q0)=>{var E4=e=>{if(e=e.replace("#",""),e.length<6)throw new Error("the given notation must contain 3 or more hex values");let t=parseInt(e.substring(0,2),16)/255,r=parseInt(e.substring(2,4),16)/255,n=parseInt(e.substring(4,6),16)/255;if(e.length>=8){let s=parseInt(e.substring(6,8),16)/255;return[t,r,n,s]}return[t,r,n]};q0.exports=E4});var cs=u((hF,w0)=>{var P4=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?e+(t-e)*6*r:r<.5?t:r<.6666666666666666?e+(t-e)*(.6666666666666666-r)*6:e);w0.exports=P4});var y0=u((pF,v0)=>{var A4=z(),as=cs(),b4=(...e)=>{if(e=A4(e),e.length<3)throw new Error("values must contain H, S and L values");let t=e[0],r=e[1],n=e[2],s=n,o=n,i=n;if(r!==0){let c=n<.5?n*(1+r):n+r-n*r,a=2*n-c;s=as(a,c,t+1/3),o=as(a,c,t),i=as(a,c,t-1/3)}if(e.length>3){let c=e[3];return[s,o,i,c]}return[s,o,i]};v0.exports=b4});var P0=u((dF,E0)=>{var M4=z(),S4=(...e)=>{if(e=M4(e),e.length<3)throw new Error("values must contain H, S and V values");let t=e[0],r=e[1],n=e[2],s=0,o=0,i=0,c=Math.floor(t*6),a=t*6-c,l=n*(1-r),f=n*(1-a*r),h=n*(1-(1-a)*r);switch(c%6){case 0:s=n,o=h,i=l;break;case 1:s=f,o=n,i=l;break;case 2:s=l,o=n,i=h;break;case 3:s=l,o=f,i=n;break;case 4:s=h,o=l,i=n;break;case 5:s=n,o=l,i=f;break}if(e.length>3){let p=e[3];return[s,o,i,p]}return[s,o,i]};E0.exports=S4});var b0=u((gF,A0)=>{var T4=z(),k4=(...e)=>{if(e=T4(e),e.length<3)throw new Error("values must contain R, G and B values");let t=e[0]*255,r=e[1]*255,n=e[2]*255,s=`#${Number(16777216+t*65536+r*256+n).toString(16).substring(1,7)}`;return e.length>3&&(s=s+Number(e[3]*255).toString(16)),s};A0.exports=k4});var S0=u((mF,M0)=>{var O4=z(),N4=(...e)=>{if(e=O4(e),e.length<3)throw new Error("values must contain R, G and B values");let t=e[0],r=e[1],n=e[2],s=Math.max(t,r,n),o=Math.min(t,r,n),i,c,a=(s+o)/2;if(s===o)i=c=0;else{let l=s-o;switch(c=a>.5?l/(2-s-o):l/(s+o),s){case t:i=(r-n)/l+(r<n?6:0);break;case r:i=(n-t)/l+2;break;case n:i=(t-r)/l+4;break}i/=6}if(e.length>3){let l=e[3];return[i,c,a,l]}return[i,c,a]};M0.exports=N4});var k0=u((qF,T0)=>{var F4=z(),V4=(...e)=>{if(e=F4(e),e.length<3)throw new Error("values must contain R, G and B values");let t=e[0],r=e[1],n=e[2],s=Math.max(t,r,n),o=Math.min(t,r,n),i,c=s,a=s-o,l=s===0?0:a/s;if(s===o)i=0;else{switch(s){case t:i=(r-n)/a+(r<n?6:0);break;case r:i=(n-t)/a+2;break;case n:i=(t-r)/a+4;break}i/=6}if(e.length>3){let f=e[3];return[i,l,c,f]}return[i,l,c]};T0.exports=V4});var N0=u((xF,O0)=>{O0.exports={colorize:p0(),colorNameToRgb:m0(),cssColors:is(),hexToRgb:x0(),hslToRgb:y0(),hsvToRgb:P0(),hueToColorComponent:cs(),rgbToHex:b0(),rgbToHsl:S0(),rgbToHsv:k0()}});var R0=u((wF,V0)=>{var R4=e=>{if(!Array.isArray(e))throw new Error("Bezier points must be a valid array/");if(e.length<2)throw new Error("Bezier points must contain at least 2 values.");let t=z4(e);return{points:e,pointType:t,dimensions:t==="float_single"?0:e[0].length,permutations:F0(e.length-1),tangentPermutations:F0(e.length-2)}},z4=function(e){let t=null;return e.forEach(r=>{let n="";if(Number.isFinite(r))n="float_single";else if(Array.isArray(r))r.forEach(s=>{if(!Number.isFinite(s))throw new Error("Bezier point values must all be numbers.")}),n="float_"+r.length;else throw new Error("Bezier points must all be numbers or arrays of number.");if(t==null)t=n;else if(t!==n)throw new Error("Bezier points must be either all numbers or all arrays of numbers of the same size.")}),t},F0=function(e){let t=[];for(let r=0;r<=e;r++)t.push(ls(e)/(ls(r)*ls(e-r)));return t},ls=function(e){let t=1;for(let r=2;r<=e;r++)t*=r;return t};V0.exports=R4});var us=u((vF,B0)=>{var B4=(e,t)=>{if(e<0||e>1)throw new Error("Bezier valueAt() input must be between 0 and 1");if(t.pointType==="float_single")return z0(t,t.points,e);{let r=[];for(let n=0;n<t.dimensions;n++){let s=[];for(let o=0;o<t.points.length;o++)s.push(t.points[o][n]);r.push(z0(t,s,e))}return r}},z0=function(e,t,r){let n=t.length-1,s=0;for(let o=0;o<=n;o++)s+=e.permutations[o]*Math.pow(1-r,n-o)*Math.pow(r,o)*t[o];return s};B0.exports=B4});var I0=u((yF,G0)=>{var C4=(e,t)=>{if(e<0||e>1)throw new Error("Bezier tangentAt() input must be between 0 and 1");if(t.pointType==="float_single")return C0(t,t.points,e);{let r=[];for(let n=0;n<t.dimensions;n++){let s=[];for(let o=0;o<t.points.length;o++)s.push(t.points[o][n]);r.push(C0(t,s,e))}return r}},C0=function(e,t,r){let n=t.length-1,s=0;for(let o=0;o<n;o++){let i=n*(t[o+1]-t[o]);s+=e.tangentPermutations[o]*Math.pow(1-r,n-1-o)*Math.pow(r,o)*i}return s};G0.exports=C4});var lr=u((EF,$0)=>{var D0=us(),G4=(e,t)=>{let r=0,n=[0],s=D0(0,t);for(let o=1;o<=e;o++){let i=D0(o/e,t);r+=I4(i,s),n.push(r),s=i}return n},I4=(e,t)=>{if(Number.isFinite(e)&&Number.isFinite(t))return Math.abs(e-t);if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)throw new Error("The operands must have the same number of dimensions.");let r=0;for(let n=0;n<e.length;n++)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)}else throw new Error("The operands must be of the same type, either number or array.")};$0.exports=G4});var X0=u((PF,Z0)=>{var D4=lr(),$4=(e,t)=>D4(e,t)[e];Z0.exports=$4});var Y0=u((AF,L0)=>{var Z4=lr(),X4=(e,t)=>{let r={distance:0,segments:100},{distance:n,segments:s}=Object.assign({},r,e),o=Z4(s,t),i=0,c=s;for(;i<=c;){let d=Math.floor(i+(c-i)/2),m=o[d]-n;if(m<0)i=d+1;else if(m>0)c=d-1;else{c=d;break}}let a=c;if(o[a]===n)return a/s;let l=o[a],h=o[a+1]-l,p=(n-l)/h;return(a+p)/s};L0.exports=X4});var H0=u((bF,U0)=>{U0.exports={create:R0(),valueAt:us(),tangentAt:I0(),lengths:lr(),length:X0(),arcLengthToT:Y0()}});var _0=u((MF,W0)=>{W0.exports={bezier:H0()}});var Ot=u((SF,K0)=>{var L4=e=>{let t=0;for(let r=0;r<e.length;r++){let n=(r+1)%e.length;t+=e[r][0]*e[n][1],t-=e[n][0]*e[r][1]}return t/2};K0.exports=L4});var fs=u((TF,Q0)=>{var Y4=Ot(),U4=e=>Y4(e.vertices);Q0.exports=U4});var hs=u((kF,J0)=>{var H4=e=>((e===void 0||e.length<3)&&(e=[]),{vertices:e});J0.exports=H4});var ps=u((OF,j0)=>{var W4=hs(),_4=e=>{let t=e.vertices.slice().reverse();return W4(t)};j0.exports=_4});var tf=u((NF,ef)=>{var K4=fs(),Q4=ps(),J4=(e,t)=>{if(e.length===0)return 0;let r=t.vertices;return r.length<3?0:(K4(t)<0&&(t=Q4(t)),e.reduce((s,o)=>s+j4(o,r),0)===e.length?1:0)},j4=(e,t)=>{let r=t.length,n=e[0],s=e[1],o=t[r-1],i=t[0],c=o[1]>s,a=0,l=0;for(let f=r+1;--f;){let h=i[1]>s;if(c!==h){let p=o[0]>n,d=i[0]>n;(p&&d||i[0]-(i[1]-s)*(o[0]-i[0])/(o[1]-i[1])>=n)&&(a=!a)}c=h,o=i,i=t[++l]}return a};ef.exports=J4});var ur=u((FF,rf)=>{rf.exports={arePointsInside:tf(),create:hs(),flip:ps(),measureArea:fs()}});var fr=u((VF,nf)=>{nf.exports={geom2:B(),geom3:C(),path2:X(),poly2:ur(),poly3:$()}});var hr=u((RF,sf)=>{var eE=()=>[0,1,0];sf.exports=eE});var cf=u((zF,of)=>{var tE=hr(),rE=e=>{let t=tE();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t};of.exports=rE});var pr=u((BF,af)=>{var ds=I(),nE=e=>{let t=ds.normal(ds.create(),e);return ds.negate(t,t),t};af.exports=nE});var Nt=u((CF,uf)=>{var lf=I(),sE=e=>lf.scale(lf.create(),e,e[2]);uf.exports=sE});var hf=u((GF,ff)=>{var Ft=I(),oE=pr(),iE=Nt(),cE=(e,t)=>{let r=iE(e),n=oE(e),s=Ft.subtract(Ft.create(),t,r),o=Ft.dot(s,n);return Ft.scale(s,n,o),Ft.add(s,s,r),s};ff.exports=cE});var gs=u((IF,pf)=>{var aE=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e);pf.exports=aE});var gf=u((DF,df)=>{var lE=I(),uE=(e,t)=>{let r=lE.dot(t,e);return r=Math.abs(r-e[2]),r};df.exports=uE});var qf=u(($F,mf)=>{var fE=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2];mf.exports=fE});var ms=u((ZF,xf)=>{var Vt=I(),hE=(e,t,r)=>{let n=Vt.subtract(Vt.create(),r,t);Vt.normal(n,n),Vt.normalize(n,n);let s=Vt.dot(t,n);return e[0]=n[0],e[1]=n[1],e[2]=s,e};xf.exports=hE});var qs=u((XF,wf)=>{var pE=hr(),dE=(e,t,r)=>{let n=pE();return n[0]=e,n[1]=t,n[2]=r,n};wf.exports=dE});var dr=u((LF,vf)=>{var{NEPS:xs}=Z(),gE=(e,t)=>Math.abs(e[0]-t[0])<=xs&&Math.abs(e[1]-t[1])<=xs&&Math.abs(e[2]-t[2])<=xs;vf.exports=gE});var ws=u((YF,yf)=>{var mE=(e,t,r)=>{let n=r-e[1],s=t[1]-e[1];s<0&&(n=-n,s=-s);let o;return n<=0?o=0:n>=s?o=1:s<1e-10?o=.5:o=n/s,e[0]+o*(t[0]-e[0])};yf.exports=mE});var vs=u((UF,Ef)=>{var qE=(e,t,r,n)=>{if(e[0]===t[0]&&e[1]===t[1]||r[0]===n[0]&&r[1]===n[1])return;let s=(n[1]-r[1])*(t[0]-e[0])-(n[0]-r[0])*(t[1]-e[1]);if(Math.abs(s)<Number.MIN_VALUE)return;let o=((n[0]-r[0])*(e[1]-r[1])-(n[1]-r[1])*(e[0]-r[0]))/s,i=((t[0]-e[0])*(e[1]-r[1])-(t[1]-e[1])*(e[0]-r[0]))/s;if(o<0||o>1||i<0||i>1)return;let c=e[0]+o*(t[0]-e[0]),a=e[1]+o*(t[1]-e[1]);return[c,a]};Ef.exports=qE});var Af=u((HF,Pf)=>{var xE=(e,t,r,n,s,o)=>{let c=1/(e*n-t*r),a=s*n-t*o,l=-s*r+e*o;return a*=c,l*=c,[a,l]};Pf.exports=xE});var Qe=u((WF,bf)=>{bf.exports={aboutEqualNormals:dr(),area:Ot(),cos:J().cos,interpolateBetween2DPointsForY:ws(),intersect:vs(),sin:J().sin,solve2Linear:Af()}});var Sf=u((_F,Mf)=>{var wE=I(),{solve2Linear:vE}=Qe(),yE=(e,t)=>{let r=vE(e[0],e[1],t[0],t[1],e[2],t[2]);return wE.clone(r)};Mf.exports=yE});var Of=u((KF,kf)=>{var Tf=I(),EE=gs(),PE=qs(),AE=(e,t)=>{let r=Tf.negate(Tf.create(),t),n=-t[2];return EE(e,PE(r[0],r[1],n))};kf.exports=AE});var Ff=u((QF,Nf)=>{var bE=e=>`line2: (${e[0].toFixed(7)}, ${e[1].toFixed(7)}, ${e[2].toFixed(7)})`;Nf.exports=bE});var zf=u((JF,Rf)=>{var Vf=I(),ME=ms(),SE=Nt(),TE=pr(),kE=(e,t,r)=>{let n=SE(t),s=TE(t);return Vf.transform(n,n,r),Vf.transform(s,s,r),ME(e,n,s)};Rf.exports=kE});var Cf=u((jF,Bf)=>{var OE=Nt(),NE=(e,t)=>{let r=(e[2]-e[1]*t)/e[0];return Number.isNaN(r)&&(r=OE(e)[0]),r};Bf.exports=NE});var gr=u((eV,Gf)=>{Gf.exports={clone:cf(),closestPoint:hf(),copy:gs(),create:hr(),direction:pr(),distanceToPoint:gf(),equals:qf(),fromPoints:ms(),fromValues:qs(),intersectPointOfLines:Sf(),origin:Nt(),reverse:Of(),toString:Ff(),transform:zf(),xAtY:Cf()}});var ys=u((tV,Df)=>{var If=F(),FE=()=>[If.fromValues(0,0,0),If.fromValues(0,0,1)];Df.exports=FE});var Xf=u((rV,Zf)=>{var $f=F(),VE=ys(),RE=e=>{let t=VE();return $f.copy(t[0],e[0]),$f.copy(t[1],e[1]),t};Zf.exports=RE});var Es=u((nV,Lf)=>{var Ie=F(),zE=(e,t)=>{let r=e[0],n=e[1],s=Ie.dot(Ie.subtract(Ie.create(),t,r),n),o=Ie.dot(n,n),i=s/o,c=Ie.scale(Ie.create(),n,i);return Ie.add(c,c,r),c};Lf.exports=zE});var Hf=u((sV,Uf)=>{var Yf=F(),BE=(e,t)=>(Yf.copy(e[0],t[0]),Yf.copy(e[1],t[1]),e);Uf.exports=BE});var _f=u((oV,Wf)=>{var CE=e=>e[1];Wf.exports=CE});var Qf=u((iV,Kf)=>{var Ps=F(),GE=Es(),IE=(e,t)=>{let r=GE(e,t),n=Ps.subtract(Ps.create(),t,r);return Ps.length(n)};Kf.exports=IE});var eh=u((cV,jf)=>{var Jf=F(),DE=(e,t)=>!(!Jf.equals(e[1],t[1])||!Jf.equals(e[0],t[0]));jf.exports=DE});var Je=u((aV,th)=>{var mr=F(),$E=(e,t,r)=>{let n=mr.normalize(mr.create(),r);return mr.copy(e[0],t),mr.copy(e[1],n),e};th.exports=$E});var nh=u((lV,rh)=>{var De=F(),{solve2Linear:As}=Qe(),{EPS:ZE}=Z(),XE=Je(),LE=(e,t,r)=>{let n=De.cross(De.create(),t,r),s=De.length(n);if(s<ZE)throw new Error("parallel planes do not intersect");s=1/s,n=De.scale(n,n,s);let o=Math.abs(n[0]),i=Math.abs(n[1]),c=Math.abs(n[2]),a,l;return o>=i&&o>=c?(l=As(t[1],t[2],r[1],r[2],t[3],r[3]),a=De.fromValues(0,l[0],l[1])):i>=o&&i>=c?(l=As(t[0],t[2],r[0],r[2],t[3],r[3]),a=De.fromValues(l[0],0,l[1])):(l=As(t[0],t[1],r[0],r[1],t[3],r[3]),a=De.fromValues(l[0],l[1],0)),XE(e,a,n)};rh.exports=LE});var ih=u((uV,oh)=>{var sh=F(),YE=Je(),UE=(e,t,r)=>{let n=sh.subtract(sh.create(),r,t);return YE(e,t,n)};oh.exports=UE});var ah=u((fV,ch)=>{var je=F(),HE=(e,t)=>{let r=t,n=t[3],s=e[0],o=e[1],i=(n-je.dot(r,s))/je.dot(r,o);return je.add(je.create(),s,je.scale(je.create(),o,i))};ch.exports=HE});var uh=u((hV,lh)=>{var WE=e=>e[0];lh.exports=WE});var hh=u((pV,fh)=>{var bs=F(),_E=Je(),KE=(e,t)=>{let r=bs.clone(t[0]),n=bs.negate(bs.create(),t[1]);return _E(e,r,n)};fh.exports=KE});var dh=u((dV,ph)=>{var QE=e=>{let t=e[0],r=e[1];return`line3: point: (${t[0].toFixed(7)}, ${t[1].toFixed(7)}, ${t[2].toFixed(7)}) direction: (${r[0].toFixed(7)}, ${r[1].toFixed(7)}, ${r[2].toFixed(7)})`};ph.exports=QE});var mh=u((gV,gh)=>{var et=F(),JE=Je(),jE=(e,t,r)=>{let n=t[0],s=t[1],o=et.add(et.create(),n,s),i=et.transform(et.create(),n,r),c=et.transform(o,o,r),a=et.subtract(c,c,i);return JE(e,i,a)};gh.exports=jE});var xh=u((mV,qh)=>{qh.exports={clone:Xf(),closestPoint:Es(),copy:Hf(),create:ys(),direction:_f(),distanceToPoint:Qf(),equals:eh(),fromPlanes:nh(),fromPointAndDirection:Je(),fromPoints:ih(),intersectPointOfLineAndPlane:ah(),origin:uh(),reverse:hh(),toString:dh(),transform:mh()}});var vh=u((qV,wh)=>{wh.exports={constants:Z(),line2:gr(),line3:xh(),mat4:L(),plane:he(),utils:Qe(),vec2:I(),vec3:F(),vec4:jn()}});var Ms=u((xV,Ph)=>{var eP=z(),yh=B(),Eh=C(),tP=X(),rP=$(),qr=new WeakMap,nP=()=>0,sP=e=>{let t=qr.get(e);return t||(t=yh.toSides(e).reduce((n,s)=>n+(s[0][0]*s[1][1]-s[0][1]*s[1][0]),0),t*=.5,qr.set(e,t),t)},oP=e=>{let t=qr.get(e);return t||(t=Eh.toPolygons(e).reduce((n,s)=>n+rP.measureArea(s),0),qr.set(e,t),t)},iP=(...e)=>{if(e=eP(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>tP.isA(r)?nP(r):yh.isA(r)?sP(r):Eh.isA(r)?oP(r):0);return t.length===1?t[0]:t};Ph.exports=iP});var bh=u((wV,Ah)=>{var cP=z(),aP=Ms(),lP=(...e)=>{if(e=cP(e),e.length===0)throw new Error("measureAggregateArea: no geometries supplied");let t=aP(e);return e.length===1?t:t.reduce((n,s)=>n+s,0)};Ah.exports=lP});var Me=u((vV,Oh)=>{var uP=z(),ge=I(),Rt=F(),Sh=B(),Th=C(),kh=X(),Mh=$(),tt=new WeakMap,fP=e=>{let t=tt.get(e);if(t)return t;let r=kh.toPoints(e),n;r.length===0?n=ge.create():n=ge.clone(r[0]);let s=ge.clone(n);return r.forEach(o=>{ge.min(n,n,o),ge.max(s,s,o)}),n=[n[0],n[1],0],s=[s[0],s[1],0],t=[n,s],tt.set(e,t),t},hP=e=>{let t=tt.get(e);if(t)return t;let r=Sh.toPoints(e),n;r.length===0?n=ge.create():n=ge.clone(r[0]);let s=ge.clone(n);return r.forEach(o=>{ge.min(n,n,o),ge.max(s,s,o)}),n=[n[0],n[1],0],s=[s[0],s[1],0],t=[n,s],tt.set(e,t),t},pP=e=>{let t=tt.get(e);if(t)return t;let r=Th.toPolygons(e),n=Rt.create();if(r.length>0){let o=Mh.toPoints(r[0]);Rt.copy(n,o[0])}let s=Rt.clone(n);return r.forEach(o=>{Mh.toPoints(o).forEach(i=>{Rt.min(n,n,i),Rt.max(s,s,i)})}),n=[n[0],n[1],n[2]],s=[s[0],s[1],s[2]],t=[n,s],tt.set(e,t),t},dP=(...e)=>{if(e=uP(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>kh.isA(r)?fP(r):Sh.isA(r)?hP(r):Th.isA(r)?pP(r):[[0,0,0],[0,0,0]]);return t.length===1?t[0]:t};Oh.exports=dP});var xr=u((yV,Nh)=>{var gP=z(),mP=qn(),qP=mn(),xP=Me(),wP=(...e)=>{if(e=gP(e),e.length===0)throw new Error("measureAggregateBoundingBox: no geometries supplied");let t=xP(e);if(e.length===1)return t;let r=[[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]];return t.reduce((n,s)=>(n=[mP(n[0],n[0],s[0]),qP(n[1],n[1],s[1])],n),r)};Nh.exports=wP});var Ss=u((EV,Fh)=>{var{EPS:vP}=Z(),yP=(e,t)=>{let r=0;for(let n=0;n<t;n++)r+=e[1][n]-e[0][n];return vP*r/t};Fh.exports=yP});var Rh=u((PV,Vh)=>{var EP=z(),PP=xr(),AP=Ss(),{geom2:bP,geom3:MP,path2:SP}=fr(),TP=(...e)=>{if(e=EP(e),e.length===0)throw new Error("measureAggregateEpsilon: no geometries supplied");let t=PP(e),r=0;return r=e.reduce((n,s)=>SP.isA(s)||bP.isA(s)?Math.max(n,2):MP.isA(s)?Math.max(n,3):0,r),AP(t,r)};Vh.exports=TP});var Ts=u((AV,Ch)=>{var kP=z(),OP=B(),Bh=C(),NP=X(),FP=$(),zh=new WeakMap,VP=()=>0,RP=()=>0,zP=e=>{let t=zh.get(e);return t||(t=Bh.toPolygons(e).reduce((n,s)=>n+FP.measureSignedVolume(s),0),zh.set(e,t),t)},BP=(...e)=>{if(e=kP(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>NP.isA(r)?VP(r):OP.isA(r)?RP(r):Bh.isA(r)?zP(r):0);return t.length===1?t[0]:t};Ch.exports=BP});var Ih=u((bV,Gh)=>{var CP=z(),GP=Ts(),IP=(...e)=>{if(e=CP(e),e.length===0)throw new Error("measureAggregateVolume: no geometries supplied");let t=GP(e);return e.length===1?t:t.reduce((n,s)=>n+s,0)};Gh.exports=IP});var Uh=u((MV,Yh)=>{var DP=z(),$h=I(),ie=F(),Zh=B(),Xh=C(),Lh=X(),Dh=$(),rt=new WeakMap,$P=e=>{let t=rt.get(e);if(t!==void 0)return t;let r=ie.create(),n=0,s=Lh.toPoints(e);if(s.length>0){let o=0,i=ie.create();s.forEach(c=>{ie.add(r,r,ie.fromVec2(i,c,0)),o++}),ie.scale(r,r,1/o),s.forEach(c=>{n=Math.max(n,$h.squaredDistance(r,c))}),n=Math.sqrt(n)}return t=[r,n],rt.set(e,t),t},ZP=e=>{let t=rt.get(e);if(t!==void 0)return t;let r=ie.create(),n=0,s=Zh.toSides(e);if(s.length>0){let o=0,i=ie.create();s.forEach(c=>{ie.add(r,r,ie.fromVec2(i,c[0],0)),o++}),ie.scale(r,r,1/o),s.forEach(c=>{n=Math.max(n,$h.squaredDistance(r,c[0]))}),n=Math.sqrt(n)}return t=[r,n],rt.set(e,t),t},XP=e=>{let t=rt.get(e);if(t!==void 0)return t;let r=ie.create(),n=0,s=Xh.toPolygons(e);if(s.length>0){let o=0;s.forEach(i=>{Dh.toPoints(i).forEach(c=>{ie.add(r,r,c),o++})}),ie.scale(r,r,1/o),s.forEach(i=>{Dh.toPoints(i).forEach(c=>{n=Math.max(n,ie.squaredDistance(r,c))})}),n=Math.sqrt(n)}return t=[r,n],rt.set(e,t),t},LP=(...e)=>{e=DP(e);let t=e.map(r=>Lh.isA(r)?$P(r):Zh.isA(r)?ZP(r):Xh.isA(r)?XP(r):[[0,0,0],0]);return t.length===1?t[0]:t};Yh.exports=LP});var Wh=u((SV,Hh)=>{var YP=z(),UP=Me(),HP=(...e)=>{e=YP(e);let t=e.map(r=>{let n=UP(r);return[n[0][0]+(n[1][0]-n[0][0])/2,n[0][1]+(n[1][1]-n[0][1])/2,n[0][2]+(n[1][2]-n[0][2])/2]});return t.length===1?t[0]:t};Hh.exports=HP});var Jh=u((TV,Qh)=>{var WP=z(),me=F(),_h=B(),Kh=C(),wr=new WeakMap,_P=e=>{let t=wr.get(e);if(t!==void 0)return t;let r=_h.toSides(e),n=0,s=0,o=0;if(r.length>0){for(let c=0;c<r.length;c++){let a=r[c][0],l=r[c][1],f=a[0]*l[1]-a[1]*l[0];n+=f,s+=(a[0]+l[0])*f,o+=(a[1]+l[1])*f}n/=2;let i=1/(n*6);s*=i,o*=i}return t=me.fromValues(s,o,0),wr.set(e,t),t},KP=e=>{let t=wr.get(e);if(t!==void 0)return t;t=me.create();let r=Kh.toPolygons(e);if(r.length===0)return t;let n=0,s=me.create();return r.forEach(o=>{let i=o.vertices;for(let c=0;c<i.length-2;c++){me.cross(s,i[c+1],i[c+2]);let a=me.dot(i[0],s)/6;n+=a,me.add(s,i[0],i[c+1]),me.add(s,s,i[c+2]);let l=me.scale(s,s,1/4*a);me.add(t,t,l)}}),me.scale(t,t,1/n),wr.set(e,t),t},QP=(...e)=>{e=WP(e);let t=e.map(r=>_h.isA(r)?_P(r):Kh.isA(r)?KP(r):[0,0,0]);return t.length===1?t[0]:t};Qh.exports=QP});var e2=u((kV,jh)=>{var JP=z(),jP=Me(),eA=(...e)=>{e=JP(e);let t=e.map(r=>{let n=jP(r);return[n[1][0]-n[0][0],n[1][1]-n[0][1],n[1][2]-n[0][2]]});return t.length===1?t[0]:t};jh.exports=eA});var ye=u((OV,t2)=>{var tA=z(),{geom2:rA,geom3:nA,path2:sA}=fr(),ks=Ss(),Os=Me(),oA=e=>ks(Os(e),2),iA=e=>ks(Os(e),2),cA=e=>ks(Os(e),3),aA=(...e)=>{if(e=tA(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>sA.isA(r)?oA(r):rA.isA(r)?iA(r):nA.isA(r)?cA(r):0);return t.length===1?t[0]:t};t2.exports=aA});var n2=u((NV,r2)=>{r2.exports={measureAggregateArea:bh(),measureAggregateBoundingBox:xr(),measureAggregateEpsilon:Rh(),measureAggregateVolume:Ih(),measureArea:Ms(),measureBoundingBox:Me(),measureBoundingSphere:Uh(),measureCenter:Wh(),measureCenterOfMass:Jh(),measureDimensions:e2(),measureEpsilon:ye(),measureVolume:Ts()}});var K=u((FV,s2)=>{var lA=(e,t)=>Array.isArray(e)&&e.length>=t?e.every(r=>Number.isFinite(r)):!1,uA=(e,t)=>Number.isFinite(e)&&e>t,fA=(e,t)=>Number.isFinite(e)&&e>=t;s2.exports={isNumberArray:lA,isGT:uA,isGTE:fA}});var c2=u((VV,i2)=>{var{EPS:o2,TAU:nt}=Z(),Ee=I(),hA=X(),{isGT:pA,isGTE:Ns,isNumberArray:dA}=K(),gA=e=>{let t={center:[0,0],radius:1,startAngle:0,endAngle:nt,makeTangent:!1,segments:32},{center:r,radius:n,startAngle:s,endAngle:o,makeTangent:i,segments:c}=Object.assign({},t,e);if(!dA(r,2))throw new Error("center must be an array of X and Y values");if(!pA(n,0))throw new Error("radius must be greater than zero");if(!Ns(s,0))throw new Error("startAngle must be positive");if(!Ns(o,0))throw new Error("endAngle must be positive");if(!Ns(c,4))throw new Error("segments must be four or more");s=s%nt,o=o%nt;let a=nt;s<o&&(a=o-s),s>o&&(a=o+(nt-s));let l=Math.acos((n*n+n*n-o2*o2)/(2*n*n)),f=Ee.clone(r),h,p=[];if(a<l)h=Ee.fromAngleRadians(Ee.create(),s),Ee.scale(h,h,n),Ee.add(h,h,f),p.push(h);else{let d=Math.max(1,Math.floor(c*(a/nt)))+1,m=d*.5/a;m>.25&&(m=.25);let g=i?d+2:d;for(let q=0;q<=g;q++){let w=q;i&&(w=(q-1)*(d-2*m)/d+m,w<0&&(w=0),w>d&&(w=d));let v=s+w*(a/d);h=Ee.fromAngleRadians(Ee.create(),v),Ee.scale(h,h,n),Ee.add(h,h,f),p.push(h)}}return hA.fromPoints({closed:!1},p)};i2.exports=gA});var Rs=u((RV,f2)=>{var{EPS:a2,TAU:Se}=Z(),Fs=I(),l2=B(),{sin:mA,cos:qA}=J(),{isGTE:Vs,isNumberArray:u2}=K(),xA=e=>{let t={center:[0,0],radius:[1,1],startAngle:0,endAngle:Se,segments:32},{center:r,radius:n,startAngle:s,endAngle:o,segments:i}=Object.assign({},t,e);if(!u2(r,2))throw new Error("center must be an array of X and Y values");if(!u2(n,2))throw new Error("radius must be an array of X and Y values");if(!n.every(d=>d>=0))throw new Error("radius values must be positive");if(!Vs(s,0))throw new Error("startAngle must be positive");if(!Vs(o,0))throw new Error("endAngle must be positive");if(!Vs(i,3))throw new Error("segments must be three or more");if(n[0]===0||n[1]===0)return l2.create();s=s%Se,o=o%Se;let c=Se;s<o&&(c=o-s),s>o&&(c=o+(Se-s));let a=Math.min(n[0],n[1]),l=Math.acos((a*a+a*a-a2*a2)/(2*a*a));if(c<l)throw new Error("startAngle and endAngle do not define a significant rotation");i=Math.floor(i*(c/Se));let f=Fs.clone(r),h=c/i,p=[];i=c<Se?i+1:i;for(let d=0;d<i;d++){let m=h*d+s,g=Fs.fromValues(n[0]*qA(m),n[1]*mA(m));Fs.add(g,f,g),p.push(g)}return c<Se&&p.push(f),l2.fromPoints(p)};f2.exports=xA});var zs=u((zV,h2)=>{var{TAU:wA}=Z(),vA=Rs(),{isGTE:yA}=K(),EA=e=>{let t={center:[0,0],radius:1,startAngle:0,endAngle:wA,segments:32},{center:r,radius:n,startAngle:s,endAngle:o,segments:i}=Object.assign({},t,e);if(!yA(n,0))throw new Error("radius must be positive");return n=[n,n],vA({center:r,radius:n,startAngle:s,endAngle:o,segments:i})};h2.exports=EA});var vr=u((BV,g2)=>{var p2=C(),PA=$(),{isNumberArray:d2}=K(),AA=e=>{let t={center:[0,0,0],size:[2,2,2]},{center:r,size:n}=Object.assign({},t,e);if(!d2(r,3))throw new Error("center must be an array of X, Y and Z values");if(!d2(n,3))throw new Error("size must be an array of width, depth and height values");if(!n.every(o=>o>=0))throw new Error("size values must be positive");return n[0]===0||n[1]===0||n[2]===0?p2.create():p2.create([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(o=>{let i=o[0].map(c=>[r[0]+n[0]/2*(2*!!(c&1)-1),r[1]+n[1]/2*(2*!!(c&2)-1),r[2]+n[2]/2*(2*!!(c&4)-1)]);return PA.create(i)}))};g2.exports=AA});var q2=u((CV,m2)=>{var bA=vr(),{isGTE:MA}=K(),SA=e=>{let t={center:[0,0,0],size:2},{center:r,size:n}=Object.assign({},t,e);if(!MA(n,0))throw new Error("size must be positive");return n=[n,n,n],bA({center:r,size:n})};m2.exports=SA});var Gs=u((GV,w2)=>{var{EPS:x2,TAU:Te}=Z(),j=F(),TA=C(),kA=$(),{sin:OA,cos:NA}=J(),{isGT:FA,isGTE:Bs,isNumberArray:Cs}=K(),VA=e=>{let t={center:[0,0,0],height:2,startRadius:[1,1],startAngle:0,endRadius:[1,1],endAngle:Te,segments:32},{center:r,height:n,startRadius:s,startAngle:o,endRadius:i,endAngle:c,segments:a}=Object.assign({},t,e);if(!Cs(r,3))throw new Error("center must be an array of X, Y and Z values");if(!FA(n,0))throw new Error("height must be greater then zero");if(!Cs(s,2))throw new Error("startRadius must be an array of X and Y values");if(!s.every(M=>M>=0))throw new Error("startRadius values must be positive");if(!Cs(i,2))throw new Error("endRadius must be an array of X and Y values");if(!i.every(M=>M>=0))throw new Error("endRadius values must be positive");if(i.every(M=>M===0)&&s.every(M=>M===0))throw new Error("at least one radius must be positive");if(!Bs(o,0))throw new Error("startAngle must be positive");if(!Bs(c,0))throw new Error("endAngle must be positive");if(!Bs(a,4))throw new Error("segments must be four or more");o=o%Te,c=c%Te;let l=Te;o<c&&(l=c-o),o>c&&(l=c+(Te-o));let f=Math.min(s[0],s[1],i[0],i[1]),h=Math.acos((f*f+f*f-x2*x2)/(2*f*f));if(l<h)throw new Error("startAngle and endAngle do not define a significant rotation");let p=Math.floor(a*(l/Te)),d=j.fromValues(0,0,-(n/2)),m=j.fromValues(0,0,n/2),g=j.subtract(j.create(),m,d),q=j.fromValues(1,0,0),w=j.fromValues(0,1,0),v=j.create(),E=j.create(),x=j.create(),P=(M,T,S)=>{let O=T*l+o;return j.scale(v,q,S[0]*NA(O)),j.scale(E,w,S[1]*OA(O)),j.add(v,v,E),j.scale(x,g,M),j.add(x,x,d),j.add(j.create(),v,x)},y=(...M)=>{let T=M.map(S=>j.add(j.create(),S,r));return kA.create(T)},A=[];for(let M=0;M<p;M++){let T=M/p,S=(M+1)/p;l===Te&&M===p-1&&(S=0),i[0]===s[0]&&i[1]===s[1]?(A.push(y(d,P(0,S,i),P(0,T,i))),A.push(y(P(0,S,i),P(1,S,i),P(1,T,i),P(0,T,i))),A.push(y(m,P(1,T,i),P(1,S,i)))):(s[0]>0&&s[1]>0&&A.push(y(d,P(0,S,s),P(0,T,s))),(s[0]>0||s[1]>0)&&A.push(y(P(0,T,s),P(0,S,s),P(1,T,i))),i[0]>0&&i[1]>0&&A.push(y(m,P(1,T,i),P(1,S,i))),(i[0]>0||i[1]>0)&&A.push(y(P(1,T,i),P(0,S,s),P(1,S,i))))}return l<Te&&(A.push(y(d,P(0,0,s),m)),A.push(y(P(0,0,s),P(1,0,i),m)),A.push(y(d,m,P(0,1,s))),A.push(y(P(0,1,s),m,P(1,1,i)))),TA.create(A)};w2.exports=VA});var Is=u((IV,v2)=>{var RA=C(),zA=Gs(),{isGTE:BA}=K(),CA=e=>{let t={center:[0,0,0],height:2,radius:1,segments:32},{center:r,height:n,radius:s,segments:o}=Object.assign({},t,e);if(!BA(s,0))throw new Error("radius must be positive");return n===0||s===0?RA.create():zA({center:r,height:n,startRadius:[s,s],endRadius:[s,s],segments:o})};v2.exports=CA});var Ds=u((DV,S2)=>{var{TAU:y2}=Z(),V=F(),E2=C(),P2=$(),{sin:A2,cos:b2}=J(),{isGTE:GA,isNumberArray:M2}=K(),IA=e=>{let t={center:[0,0,0],radius:[1,1,1],segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},{center:r,radius:n,segments:s,axes:o}=Object.assign({},t,e);if(!M2(r,3))throw new Error("center must be an array of X, Y and Z values");if(!M2(n,3))throw new Error("radius must be an array of X, Y and Z values");if(!n.every(m=>m>=0))throw new Error("radius values must be positive");if(!GA(s,4))throw new Error("segments must be four or more");if(n[0]===0||n[1]===0||n[2]===0)return E2.create();let i=V.scale(V.create(),V.normalize(V.create(),o[0]),n[0]),c=V.scale(V.create(),V.normalize(V.create(),o[1]),n[1]),a=V.scale(V.create(),V.normalize(V.create(),o[2]),n[2]),l=Math.round(s/4),f,h=[],p=V.create(),d=V.create();for(let m=0;m<=s;m++){let g=y2*m/s,q=V.add(V.create(),V.scale(p,i,b2(g)),V.scale(d,c,A2(g)));if(m>0){let w,v;for(let E=0;E<=l;E++){let x=y2/4*E/l,P=b2(x),y=A2(x);if(E>0){let A=[],b;b=V.subtract(V.create(),V.scale(p,f,w),V.scale(d,a,v)),A.push(V.add(b,b,r)),b=V.subtract(V.create(),V.scale(p,q,w),V.scale(d,a,v)),A.push(V.add(b,b,r)),E<l&&(b=V.subtract(V.create(),V.scale(p,q,P),V.scale(d,a,y)),A.push(V.add(b,b,r))),b=V.subtract(V.create(),V.scale(p,f,P),V.scale(d,a,y)),A.push(V.add(b,b,r)),h.push(P2.create(A)),A=[],b=V.add(V.create(),V.scale(p,f,w),V.scale(d,a,v)),A.push(V.add(V.create(),r,b)),b=V.add(b,V.scale(p,q,w),V.scale(d,a,v)),A.push(V.add(V.create(),r,b)),E<l&&(b=V.add(b,V.scale(p,q,P),V.scale(d,a,y)),A.push(V.add(V.create(),r,b))),b=V.add(b,V.scale(p,f,P),V.scale(d,a,y)),A.push(V.add(V.create(),r,b)),A.reverse(),h.push(P2.create(A))}w=P,v=y}}f=q}return E2.create(h)};S2.exports=IA});var $s=u(($V,k2)=>{var DA=C(),$A=$(),{isNumberArray:T2}=K(),ZA=e=>{let t={points:[],faces:[],colors:void 0,orientation:"outward"},{points:r,faces:n,colors:s,orientation:o}=Object.assign({},t,e);if(!(Array.isArray(r)&&Array.isArray(n)))throw new Error("points and faces must be arrays");if(r.length<3)throw new Error("three or more points are required");if(n.length<1)throw new Error("one or more faces are required");if(s){if(!Array.isArray(s))throw new Error("colors must be an array");if(s.length!==n.length)throw new Error("faces and colors must have the same length")}r.forEach((c,a)=>{if(!T2(c,3))throw new Error(`point ${a} must be an array of X, Y, Z values`)}),n.forEach((c,a)=>{if(c.length<3)throw new Error(`face ${a} must contain 3 or more indexes`);if(!T2(c,c.length))throw new Error(`face ${a} must be an array of numbers`)}),o!=="outward"&&n.forEach(c=>c.reverse());let i=n.map((c,a)=>{let l=$A.create(c.map(f=>r[f]));return s&&s[a]&&(l.color=s[a]),l});return DA.create(i)};k2.exports=ZA});var z2=u((ZV,R2)=>{var O2=L(),N2=F(),F2=C(),XA=$s(),{isGTE:V2}=K(),LA=e=>{let t={radius:1,frequency:6},{radius:r,frequency:n}=Object.assign({},t,e);if(!V2(r,0))throw new Error("radius must be positive");if(!V2(n,6))throw new Error("frequency must be six or more");if(r===0)return F2.create();n=Math.floor(n/6);let s=[[.850651,0,-.525731],[.850651,-0,.525731],[-.850651,-0,.525731],[-.850651,0,-.525731],[0,-.525731,.850651],[0,.525731,.850651],[0,.525731,-.850651],[0,-.525731,-.850651],[-.525731,-.850651,-0],[.525731,-.850651,-0],[.525731,.850651,0],[-.525731,.850651,0]],o=[[0,9,1],[1,10,0],[6,7,0],[10,6,0],[7,9,0],[5,1,4],[4,1,9],[5,10,1],[2,8,3],[3,11,2],[2,5,4],[4,8,2],[2,11,5],[3,7,6],[6,11,3],[8,7,3],[9,8,4],[11,10,5],[10,11,6],[8,9,7]],i=(p,d,m)=>{let g=p[0],q=p[1],w=p[2],v=m,E=[],x=[];for(let P=0;P<d;P++)for(let y=0;y<d-P;y++){let A=P/d,b=(P+1)/d,M=y/(d-P),T=(y+1)/(d-P),S=d-P-1?y/(d-P-1):1,O=[];O[0]=c(c(g,q,M),w,A),O[1]=c(c(g,q,T),w,A),O[2]=c(c(g,q,S),w,b);for(let D=0;D<3;D++){let R=N2.length(O[D]);for(let G=0;G<3;G++)O[D][G]/=R}if(E.push(O[0],O[1],O[2]),x.push([v,v+1,v+2]),v+=3,y<d-P-1){let D=d-P-1?(y+1)/(d-P-1):1;O[0]=c(c(g,q,T),w,A),O[1]=c(c(g,q,D),w,b),O[2]=c(c(g,q,S),w,b);for(let R=0;R<3;R++){let G=N2.length(O[R]);for(let N=0;N<3;N++)O[R][N]/=G}E.push(O[0],O[1],O[2]),x.push([v,v+1,v+2]),v+=3}}return{points:E,triangles:x,offset:v}},c=(p,d,m)=>{let g=1-m,q=[];for(let w=0;w<3;w++)q[w]=p[w]*g+d[w]*m;return q},a=[],l=[],f=0;for(let p=0;p<o.length;p++){let d=i([s[o[p][0]],s[o[p][1]],s[o[p][2]]],n,f);a=a.concat(d.points),l=l.concat(d.triangles),f=d.offset}let h=XA({points:a,faces:l,orientation:"inward"});return r!==1&&(h=F2.transform(O2.fromScaling(O2.create(),[r,r,r]),h)),h};R2.exports=LA});var C2=u((XV,B2)=>{var YA=X(),UA=e=>{if(!Array.isArray(e))throw new Error("points must be an array");return YA.fromPoints({},e)};B2.exports=UA});var I2=u((LV,G2)=>{var yr=B(),HA=e=>{let t={points:[],paths:[],orientation:"counterclockwise"},{points:r,paths:n,orientation:s}=Object.assign({},t,e);if(!(Array.isArray(r)&&Array.isArray(n)))throw new Error("points and paths must be arrays");let o=r;Array.isArray(r[0])&&(Array.isArray(r[0][0])||(o=[r])),o.forEach((f,h)=>{if(!Array.isArray(f))throw new Error("list of points "+h+" must be an array");if(f.length<3)throw new Error("list of points "+h+" must contain three or more points");f.forEach((p,d)=>{if(!Array.isArray(p))throw new Error("list of points "+h+", point "+d+" must be an array");if(p.length<2)throw new Error("list of points "+h+", point "+d+" must contain by X and Y values")})});let i=n;if(n.length===0){let f=0;i=o.map(h=>h.map(p=>f++))}let c=[];o.forEach(f=>f.forEach(h=>c.push(h)));let a=[];i.forEach(f=>{let h=f.map(d=>c[d]),p=yr.fromPoints(h);a=a.concat(yr.toSides(p))});let l=yr.create(a);return s==="clockwise"&&(l=yr.reverse(l)),l};G2.exports=HA});var Er=u((YV,Z2)=>{var ke=I(),D2=B(),{isNumberArray:$2}=K(),WA=e=>{let t={center:[0,0],size:[2,2]},{center:r,size:n}=Object.assign({},t,e);if(!$2(r,2))throw new Error("center must be an array of X and Y values");if(!$2(n,2))throw new Error("size must be an array of X and Y values");if(!n.every(c=>c>=0))throw new Error("size values must be positive");if(n[0]===0||n[1]===0)return D2.create();let s=[n[0]/2,n[1]/2],o=[s[0],-s[1]],i=[ke.subtract(ke.create(),r,s),ke.add(ke.create(),r,o),ke.add(ke.create(),r,s),ke.subtract(ke.create(),r,o)];return D2.fromPoints(i)};Z2.exports=WA});var K2=u((UV,_2)=>{var{EPS:Pr,TAU:zt}=Z(),Zs=I(),W=F(),X2=C(),st=$(),{sin:_A,cos:KA}=J(),{isGTE:L2,isNumberArray:Y2}=K(),QA=vr(),U2=(e,t,r,n,s,o)=>{let i=zt/4*s/n,c=KA(i),a=_A(i),l=n-s,f=r*c,h=t[2]-(r-r*a);o||(h=r-r*a-t[2]),f=f>Pr?f:0;let p=W.add(W.create(),e,[t[0]-r,t[1]-r,h]),d=W.add(W.create(),e,[r-t[0],t[1]-r,h]),m=W.add(W.create(),e,[r-t[0],r-t[1],h]),g=W.add(W.create(),e,[t[0]-r,r-t[1],h]),q=[],w=[],v=[],E=[];for(let x=0;x<=l;x++){let P=l>0?zt/4*x/l:0,y=Zs.fromAngleRadians(Zs.create(),P);Zs.scale(y,y,f);let A=W.fromVec2(W.create(),y);q.push(W.add(W.create(),p,A)),W.rotateZ(A,A,[0,0,0],zt/4),w.push(W.add(W.create(),d,A)),W.rotateZ(A,A,[0,0,0],zt/4),v.push(W.add(W.create(),m,A)),W.rotateZ(A,A,[0,0,0],zt/4),E.push(W.add(W.create(),g,A))}return o?[q,w,v,E]:(q.reverse(),w.reverse(),v.reverse(),E.reverse(),[E,v,w,q])},H2=(e,t)=>{let r=[];for(let n=0;n<e.length;n++){let s=e[n],o=t[n];for(let i=0;i<s.length-1;i++)r.push(st.create([s[i],s[i+1],o[i]])),i<o.length-1&&r.push(st.create([o[i],s[i+1],o[i+1]]))}return r},W2=(e,t)=>{let r=[];for(let n=0;n<e.length;n++){let s=e[n],o=t[n],i=s[s.length-1],c=o[o.length-1],a=(n+1)%e.length;s=e[a],o=t[a];let l=s[0],f=o[0];r.push(st.create([i,l,f,c]))}return r},JA=(e,t)=>{e=[e[3],e[2],e[1],e[0]],e=e.map(o=>o.slice().reverse());let r=[];e.forEach(o=>{o.forEach(i=>r.push(i))});let n=[];t.forEach(o=>{o.forEach(i=>n.push(i))});let s=[];for(let o=0;o<n.length;o++){let i=(o+1)%n.length;s.push(st.create([r[o],r[i],n[i],n[o]]))}return s},jA=e=>{let t={center:[0,0,0],size:[2,2,2],roundRadius:.2,segments:32},{center:r,size:n,roundRadius:s,segments:o}=Object.assign({},t,e);if(!Y2(r,3))throw new Error("center must be an array of X, Y and Z values");if(!Y2(n,3))throw new Error("size must be an array of X, Y and Z values");if(!n.every(l=>l>=0))throw new Error("size values must be positive");if(!L2(s,0))throw new Error("roundRadius must be positive");if(!L2(o,4))throw new Error("segments must be four or more");if(n[0]===0||n[1]===0||n[2]===0)return X2.create();if(s===0)return QA({center:r,size:n});if(n=n.map(l=>l/2),s>n[0]-Pr||s>n[1]-Pr||s>n[2]-Pr)throw new Error("roundRadius must be smaller than the radius of all dimensions");o=Math.floor(o/4);let i=null,c=null,a=[];for(let l=0;l<=o;l++){let f=U2(r,n,s,o,l,!0),h=U2(r,n,s,o,l,!1);if(l===0&&(a=a.concat(JA(h,f))),i&&(a=a.concat(H2(i,f),W2(i,f))),c&&(a=a.concat(H2(c,h),W2(c,h))),l===o){let p=f.map(d=>d[0]);a.push(st.create(p)),p=h.map(d=>d[0]),a.push(st.create(p))}i=f,c=h}return X2.create(a)};_2.exports=jA});var rp=u((HV,tp)=>{var{EPS:eb,TAU:Q2}=Z(),k=F(),J2=C(),tb=$(),{sin:j2,cos:ep}=J(),{isGTE:Ar,isNumberArray:rb}=K(),nb=Is(),sb=e=>{let t={center:[0,0,0],height:2,radius:1,roundRadius:.2,segments:32},{center:r,height:n,radius:s,roundRadius:o,segments:i}=Object.assign({},t,e);if(!rb(r,3))throw new Error("center must be an array of X, Y and Z values");if(!Ar(n,0))throw new Error("height must be positive");if(!Ar(s,0))throw new Error("radius must be positive");if(!Ar(o,0))throw new Error("roundRadius must be positive");if(o>s)throw new Error("roundRadius must be smaller than the radius");if(!Ar(i,4))throw new Error("segments must be four or more");if(n===0||s===0)return J2.create();if(o===0)return nb({center:r,height:n,radius:s});let c=[0,0,-(n/2)],a=[0,0,n/2],l=k.subtract(k.create(),a,c),f=k.length(l);if(2*o>f-eb)throw new Error("height must be larger than twice roundRadius");let h;Math.abs(l[0])>Math.abs(l[1])?h=k.fromValues(0,1,0):h=k.fromValues(1,0,0);let p=k.scale(k.create(),k.normalize(k.create(),l),o),d=k.scale(k.create(),k.normalize(k.create(),k.cross(k.create(),p,h)),s),m=k.scale(k.create(),k.normalize(k.create(),k.cross(k.create(),d,p)),s);k.add(c,c,p),k.subtract(a,a,p);let g=Math.floor(.25*i),q=y=>{let A=y.map(b=>k.add(b,b,r));return tb.create(A)},w=[],v=k.create(),E=k.create(),x;for(let y=0;y<=i;y++){let A=Q2*y/i,b=k.add(k.create(),k.scale(v,d,ep(A)),k.scale(E,m,j2(A)));if(y>0){let M=[];M.push(k.add(k.create(),c,b)),M.push(k.add(k.create(),c,x)),M.push(k.add(k.create(),a,x)),M.push(k.add(k.create(),a,b)),w.push(q(M));let T,S;for(let O=0;O<=g;O++){let D=Q2/4*O/g,R=ep(D),G=j2(D);if(O>0){M=[];let N;N=k.add(k.create(),c,k.subtract(v,k.scale(v,x,T),k.scale(E,p,S))),M.push(N),N=k.add(k.create(),c,k.subtract(v,k.scale(v,b,T),k.scale(E,p,S))),M.push(N),O<g&&(N=k.add(k.create(),c,k.subtract(v,k.scale(v,b,R),k.scale(E,p,G))),M.push(N)),N=k.add(k.create(),c,k.subtract(v,k.scale(v,x,R),k.scale(E,p,G))),M.push(N),w.push(q(M)),M=[],N=k.add(k.create(),k.scale(v,x,T),k.scale(E,p,S)),k.add(N,N,a),M.push(N),N=k.add(k.create(),k.scale(v,b,T),k.scale(E,p,S)),k.add(N,N,a),M.push(N),O<g&&(N=k.add(k.create(),k.scale(v,b,R),k.scale(E,p,G)),k.add(N,N,a),M.push(N)),N=k.add(k.create(),k.scale(v,x,R),k.scale(E,p,G)),k.add(N,N,a),M.push(N),M.reverse(),w.push(q(M))}T=R,S=G}}x=b}return J2.create(w)};tp.exports=sb});var ap=u((WV,cp)=>{var{EPS:np,TAU:br}=Z(),U=I(),sp=B(),{isGTE:op,isNumberArray:ip}=K(),ob=Er(),ib=e=>{let t={center:[0,0],size:[2,2],roundRadius:.2,segments:32},{center:r,size:n,roundRadius:s,segments:o}=Object.assign({},t,e);if(!ip(r,2))throw new Error("center must be an array of X and Y values");if(!ip(n,2))throw new Error("size must be an array of X and Y values");if(!n.every(g=>g>=0))throw new Error("size values must be positive");if(!op(s,0))throw new Error("roundRadius must be positive");if(!op(o,4))throw new Error("segments must be four or more");if(n[0]===0||n[1]===0)return sp.create();if(s===0)return ob({center:r,size:n});if(n=n.map(g=>g/2),s>n[0]-np||s>n[1]-np)throw new Error("roundRadius must be smaller than the radius of all dimensions");let i=Math.floor(o/4),c=U.add(U.create(),r,[n[0]-s,n[1]-s]),a=U.add(U.create(),r,[s-n[0],n[1]-s]),l=U.add(U.create(),r,[s-n[0],s-n[1]]),f=U.add(U.create(),r,[n[0]-s,s-n[1]]),h=[],p=[],d=[],m=[];for(let g=0;g<=i;g++){let q=br/4*g/i,w=U.fromAngleRadians(U.create(),q);U.scale(w,w,s),h.push(U.add(U.create(),c,w)),U.rotate(w,w,U.create(),br/4),p.push(U.add(U.create(),a,w)),U.rotate(w,w,U.create(),br/4),d.push(U.add(U.create(),l,w)),U.rotate(w,w,U.create(),br/4),m.push(U.add(U.create(),f,w))}return sp.fromPoints(h.concat(p,d,m))};cp.exports=ib});var Xs=u((_V,lp)=>{var cb=Ds(),{isGTE:ab}=K(),lb=e=>{let t={center:[0,0,0],radius:1,segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},{center:r,radius:n,segments:s,axes:o}=Object.assign({},t,e);if(!ab(n,0))throw new Error("radius must be positive");return n=[n,n,n],cb({center:r,radius:n,segments:s,axes:o})};lp.exports=lb});var fp=u((KV,up)=>{var ub=Er(),{isGTE:fb}=K(),hb=e=>{let t={center:[0,0],size:2},{center:r,size:n}=Object.assign({},t,e);if(!fb(n,0))throw new Error("size must be positive");return n=[n,n],ub({center:r,size:n})};up.exports=hb});var gp=u((QV,dp)=>{var{TAU:pp}=Z(),Bt=I(),pb=B(),{isGT:db,isGTE:Mr,isNumberArray:gb}=K(),mb=(e,t)=>e>0&&t>1&&t<e/2?Math.cos(Math.PI*t/e)/Math.cos(Math.PI*(t-1)/e):0,hp=(e,t,r,n)=>{let s=pp/e,o=[];for(let i=0;i<e;i++){let c=Bt.fromAngleRadians(Bt.create(),s*i+r);Bt.scale(c,c,t),Bt.add(c,n,c),o.push(c)}return o},qb=e=>{let t={center:[0,0],vertices:5,outerRadius:1,innerRadius:0,density:2,startAngle:0},{center:r,vertices:n,outerRadius:s,innerRadius:o,density:i,startAngle:c}=Object.assign({},t,e);if(!gb(r,2))throw new Error("center must be an array of X and Y values");if(!Mr(n,2))throw new Error("vertices must be two or more");if(!db(s,0))throw new Error("outerRadius must be greater than zero");if(!Mr(o,0))throw new Error("innerRadius must be greater than zero");if(!Mr(c,0))throw new Error("startAngle must be greater than zero");if(n=Math.floor(n),i=Math.floor(i),c=c%pp,o===0){if(!Mr(i,2))throw new Error("density must be two or more");o=s*mb(n,i)}let a=Bt.clone(r),l=hp(n,s,c,a),f=hp(n,o,c+Math.PI/n,a),h=[];for(let p=0;p<n;p++)h.push(l[p]),h.push(f[p]);return pb.fromPoints(h)};dp.exports=qb});var ot=u((JV,yp)=>{var xb=z(),mp=L(),qp=he(),xp=B(),wp=C(),vp=X(),Sr=(e,...t)=>{let r={origin:[0,0,0],normal:[0,0,1]},{origin:n,normal:s}=Object.assign({},r,e);if(t=xb(t),t.length===0)throw new Error("wrong number of arguments");let o=qp.fromNormalAndPoint(qp.create(),s,n);if(Number.isNaN(o[0]))throw new Error("the given origin and normal do not define a proper plane");let i=mp.mirrorByPlane(mp.create(),o),c=t.map(a=>vp.isA(a)?vp.transform(i,a):xp.isA(a)?xp.transform(i,a):wp.isA(a)?wp.transform(i,a):a);return c.length===1?c[0]:c},wb=(...e)=>Sr({normal:[1,0,0]},e),vb=(...e)=>Sr({normal:[0,1,0]},e),yb=(...e)=>Sr({normal:[0,0,1]},e);yp.exports={mirror:Sr,mirrorX:wb,mirrorY:vb,mirrorZ:yb}});var Ls=u((jV,Pp)=>{var Ep=he(),$e=F(),Eb=e=>{let t=e.edges;if(t.length<3)throw new Error("slices must have 3 or more edges to calculate a plane");let r=t.reduce((i,c)=>$e.add($e.create(),i,c[0]),$e.create());$e.scale(r,r,1/t.length);let n,s=0;t.forEach(i=>{if(!$e.equals(i[0],i[1])){let c=$e.squaredDistance(r,i[0]);c>s&&(n=i,s=c)}});let o=t.find(i=>$e.equals(i[1],n[0]));return Ep.fromPoints(Ep.create(),o[0],n[0],n[1])};Pp.exports=Eb});var Oe=u((eR,Ap)=>{var Pb=e=>(e||(e=[]),{edges:e});Ap.exports=Pb});var Sp=u((tR,Mp)=>{var Ab=Oe(),bp=F(),bb=(...e)=>{let t,r;return e.length===1?(t=Ab(),r=e[0]):(t=e[0],r=e[1]),t.edges=r.edges.map(n=>[bp.clone(n[0]),bp.clone(n[1])]),t};Mp.exports=bb});var kp=u((rR,Tp)=>{var Mb=F(),Sb=(e,t)=>{let r=e.edges,n=t.edges;return r.length!==n.length?!1:r.reduce((o,i,c)=>{let a=n[c],l=Mb.squaredDistance(i[0],a[0]);return o&&l<Number.EPSILON},!0)};Tp.exports=Sb});var Np=u((nR,Op)=>{var Tr=F(),Tb=Oe(),kb=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");if(e.length<3)throw new Error("the given points must contain THREE or more points");let t=[],r=e[e.length-1];return e.forEach(n=>{n.length===2&&t.push([Tr.fromVec2(Tr.create(),r),Tr.fromVec2(Tr.create(),n)]),n.length===3&&t.push([r,n]),r=n}),Tb(t)};Op.exports=kb});var Vp=u((sR,Fp)=>{var kr=F(),Ob=Oe(),Nb=e=>{if(!Array.isArray(e))throw new Error("the given sides must be an array");let t=[];return e.forEach(r=>{t.push([kr.fromVec2(kr.create(),r[0]),kr.fromVec2(kr.create(),r[1])])}),Ob(t)};Fp.exports=Nb});var zp=u((oR,Rp)=>{var Fb=e=>!!(e&&typeof e=="object"&&"edges"in e&&Array.isArray(e.edges));Rp.exports=Fb});var Cp=u((iR,Bp)=>{var Vb=Oe(),Rb=(...e)=>{let t,r;return e.length===1?(t=Vb(),r=e[0]):(t=e[0],r=e[1]),t.edges=r.edges.map(n=>[n[1],n[0]]),t};Bp.exports=Rb});var Ip=u((cR,Gp)=>{var zb=e=>e.edges;Gp.exports=zb});var $p=u((aR,Dp)=>{var Bb=(e,t)=>{let r,n,s,o,i,c=1;do{n=e,e=null;let a=null;for(i=0;n;){i++,s=n;let l=0;for(r=0;r<c&&(l++,s=s.nextZ,!!s);r++);let f=c;for(;l>0||f>0&&s;)l!==0&&(f===0||!s||t(n)<=t(s))?(o=n,n=n.nextZ,l--):(o=s,s=s.nextZ,f--),a?a.nextZ=o:e=o,o.prevZ=a,a=o;n=s}a.nextZ=null,c*=2}while(i>1);return e};Dp.exports=Bb});var Ys=u((lR,Zp)=>{var Cb=$p(),Or=class{constructor(t,r,n){this.i=t,this.x=r,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}},Gb=(e,t,r,n)=>{let s=new Or(e,t,r);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s},Ib=e=>{e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)};Zp.exports={Node:Or,insertNode:Gb,removeNode:Ib,sortLinked:Cb}});var Nr=u((uR,Xp)=>{var Db=(e,t,r,n,s,o,i,c)=>(s-i)*(t-c)-(e-i)*(o-c)>=0&&(e-i)*(n-c)-(r-i)*(t-c)>=0&&(r-i)*(o-c)-(s-i)*(n-c)>=0,$b=(e,t,r)=>(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y);Xp.exports={area:$b,pointInTriangle:Db}});var Us=u((fR,Wp)=>{var{Node:Lp,insertNode:Yp,removeNode:Vr}=Ys(),{area:ce}=Nr(),Zb=(e,t,r,n,s)=>{let o;if(s===Wb(e,t,r,n)>0)for(let i=t;i<r;i+=n)o=Yp(i,e[i],e[i+1],o);else for(let i=r-n;i>=t;i-=n)o=Yp(i,e[i],e[i+1],o);return o&&Rr(o,o.next)&&(Vr(o),o=o.next),o},Up=(e,t)=>{if(!e)return e;t||(t=e);let r=e,n;do if(n=!1,!r.steiner&&(Rr(r,r.next)||ce(r.prev,r,r.next)===0)){if(Vr(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t},Xb=(e,t,r)=>{let n=e;do{let s=n.prev,o=n.next.next;!Rr(s,o)&&Hp(s,n,n.next,o)&&Ct(s,o)&&Ct(o,s)&&(t.push(s.i/r),t.push(n.i/r),t.push(o.i/r),Vr(n),Vr(n.next),n=e=o),n=n.next}while(n!==e);return Up(n)},Lb=(e,t)=>{let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Hp(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1},Ct=(e,t)=>ce(e.prev,e,e.next)<0?ce(e,t,e.next)>=0&&ce(e,e.prev,t)>=0:ce(e,t,e.prev)<0||ce(e,e.next,t)<0,Yb=(e,t)=>{let r=e,n=!1,s=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&s<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n},Ub=(e,t)=>{let r=new Lp(e.i,e.x,e.y),n=new Lp(t.i,t.x,t.y),s=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=s,s.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n},Hb=(e,t)=>e.next.i!==t.i&&e.prev.i!==t.i&&!Lb(e,t)&&(Ct(e,t)&&Ct(t,e)&&Yb(e,t)&&(ce(e.prev,e,t.prev)||ce(e,t.prev,t))||Rr(e,t)&&ce(e.prev,e,e.next)>0&&ce(t.prev,t,t.next)>0),Hp=(e,t,r,n)=>{let s=Math.sign(ce(e,t,r)),o=Math.sign(ce(e,t,n)),i=Math.sign(ce(r,n,e)),c=Math.sign(ce(r,n,t));return!!(s!==o&&i!==c||s===0&&Fr(e,r,t)||o===0&&Fr(e,n,t)||i===0&&Fr(r,e,n)||c===0&&Fr(r,t,n))},Fr=(e,t,r)=>t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y),Wb=(e,t,r,n)=>{let s=0;for(let o=t,i=r-n;o<r;o+=n)s+=(e[i]-e[o])*(e[o+1]+e[i+1]),i=o;return s},Rr=(e,t)=>e.x===t.x&&e.y===t.y;Wp.exports={cureLocalIntersections:Xb,filterPoints:Up,isValidDiagonal:Hb,linkedPolygon:Zb,locallyInside:Ct,splitPolygon:Ub}});var Qp=u((hR,Kp)=>{var{filterPoints:Hs,linkedPolygon:_b,locallyInside:Kb,splitPolygon:Qb}=Us(),{area:_p,pointInTriangle:Jb}=Nr(),jb=(e,t,r,n)=>{let s=[];for(let o=0,i=t.length;o<i;o++){let c=t[o]*n,a=o<i-1?t[o+1]*n:e.length,l=_b(e,c,a,n,!1);l===l.next&&(l.steiner=!0),s.push(n8(l))}s.sort((o,i)=>o.x-i.x);for(let o=0;o<s.length;o++)r=e8(s[o],r),r=Hs(r,r.next);return r},e8=(e,t)=>{let r=t8(e,t);if(!r)return t;let n=Qb(r,e),s=Hs(r,r.next);return Hs(n,n.next),t===r?s:t},t8=(e,t)=>{let r=t,n=e.x,s=e.y,o=-1/0,i;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){let h=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(h<=n&&h>o){if(o=h,h===n){if(s===r.y)return r;if(s===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(n===o)return i;let c=i,a=i.x,l=i.y,f=1/0;r=i;do{if(n>=r.x&&r.x>=a&&n!==r.x&&Jb(s<l?n:o,s,a,l,s<l?o:n,s,r.x,r.y)){let h=Math.abs(s-r.y)/(n-r.x);Kb(r,e)&&(h<f||h===f&&(r.x>i.x||r.x===i.x&&r8(i,r)))&&(i=r,f=h)}r=r.next}while(r!==c);return i},r8=(e,t)=>_p(e.prev,e,t.prev)<0&&_p(t.next,e,e.next)<0,n8=e=>{let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r};Kp.exports=jb});var jp=u((pR,Jp)=>{var s8=Qp(),{removeNode:o8,sortLinked:i8}=Ys(),{cureLocalIntersections:c8,filterPoints:zr,isValidDiagonal:a8,linkedPolygon:l8,splitPolygon:u8}=Us(),{area:Ze,pointInTriangle:Gt}=Nr(),f8=(e,t,r=2)=>{let n=t&&t.length,s=n?t[0]*r:e.length,o=l8(e,0,s,r,!0),i=[];if(!o||o.next===o.prev)return i;let c,a,l,f,h;if(n&&(o=s8(e,t,o,r)),e.length>80*r){c=l=e[0],a=f=e[1];for(let p=r;p<s;p+=r){let d=e[p],m=e[p+1];d<c&&(c=d),m<a&&(a=m),d>l&&(l=d),m>f&&(f=m)}h=Math.max(l-c,f-a),h=h!==0?1/h:0}return It(o,i,r,c,a,h),i},It=(e,t,r,n,s,o,i)=>{if(!e)return;!i&&o&&g8(e,n,s,o);let c=e,a,l;for(;e.prev!==e.next;){if(a=e.prev,l=e.next,o?p8(e,n,s,o):h8(e)){t.push(a.i/r),t.push(e.i/r),t.push(l.i/r),o8(e),e=l.next,c=l.next;continue}if(e=l,e===c){i?i===1?(e=c8(zr(e),t,r),It(e,t,r,n,s,o,2)):i===2&&d8(e,t,r,n,s,o):It(zr(e),t,r,n,s,o,1);break}}},h8=e=>{let t=e.prev,r=e,n=e.next;if(Ze(t,r,n)>=0)return!1;let s=e.next.next;for(;s!==e.prev;){if(Gt(t.x,t.y,r.x,r.y,n.x,n.y,s.x,s.y)&&Ze(s.prev,s,s.next)>=0)return!1;s=s.next}return!0},p8=(e,t,r,n)=>{let s=e.prev,o=e,i=e.next;if(Ze(s,o,i)>=0)return!1;let c=s.x<o.x?s.x<i.x?s.x:i.x:o.x<i.x?o.x:i.x,a=s.y<o.y?s.y<i.y?s.y:i.y:o.y<i.y?o.y:i.y,l=s.x>o.x?s.x>i.x?s.x:i.x:o.x>i.x?o.x:i.x,f=s.y>o.y?s.y>i.y?s.y:i.y:o.y>i.y?o.y:i.y,h=Ws(c,a,t,r,n),p=Ws(l,f,t,r,n),d=e.prevZ,m=e.nextZ;for(;d&&d.z>=h&&m&&m.z<=p;){if(d!==e.prev&&d!==e.next&&Gt(s.x,s.y,o.x,o.y,i.x,i.y,d.x,d.y)&&Ze(d.prev,d,d.next)>=0||(d=d.prevZ,m!==e.prev&&m!==e.next&&Gt(s.x,s.y,o.x,o.y,i.x,i.y,m.x,m.y)&&Ze(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&Gt(s.x,s.y,o.x,o.y,i.x,i.y,d.x,d.y)&&Ze(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;m&&m.z<=p;){if(m!==e.prev&&m!==e.next&&Gt(s.x,s.y,o.x,o.y,i.x,i.y,m.x,m.y)&&Ze(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0},d8=(e,t,r,n,s,o)=>{let i=e;do{let c=i.next.next;for(;c!==i.prev;){if(i.i!==c.i&&a8(i,c)){let a=u8(i,c);i=zr(i,i.next),a=zr(a,a.next),It(i,t,r,n,s,o),It(a,t,r,n,s,o);return}c=c.next}i=i.next}while(i!==e)},g8=(e,t,r,n)=>{let s=e;do s.z===null&&(s.z=Ws(s.x,s.y,t,r,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,i8(s,o=>o.z)},Ws=(e,t,r,n,s)=>(e=32767*(e-r)*s,t=32767*(t-n)*s,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1);Jp.exports=f8});var td=u((dR,ed)=>{var{area:m8}=Qe(),{toOutlines:q8}=B(),{arePointsInside:x8}=ur(),w8=e=>{let t=q8(e),r=[],n=[];t.forEach((i,c)=>{let a=m8(i);a<0?n.push(c):a>0&&r.push(c)});let s=[],o=[];return r.forEach((i,c)=>{let a=t[i];s[c]=[],n.forEach((l,f)=>{let h=t[l];x8([h[0]],{vertices:a})&&(s[c].push(l),o[f]||(o[f]=[]),o[f].push(c))})}),n.forEach((i,c)=>{if(o[c]&&o[c].length>1){let a=v8(o[c],l=>s[l].length);o[c].forEach((l,f)=>{f!==a&&(s[l]=s[l].filter(h=>h!==i))})}}),s.map((i,c)=>({solid:t[r[c]],holes:i.map(a=>t[a])}))},v8=(e,t)=>{let r,n;return e.forEach((s,o)=>{let i=t(s);(n===void 0||i<n)&&(r=o,n=i)}),r};ed.exports=w8});var sd=u((gR,nd)=>{var y8=B(),rd=he(),E8=I(),te=F(),P8=Ls(),A8=td(),_s=class{constructor(t){this.plane=P8(t);let r=te.orthogonal(te.create(),this.plane),n=te.cross(te.create(),this.plane,r);this.v=te.normalize(n,n),this.u=te.cross(te.create(),this.v,this.plane),this.basisMap=new Map;let s=t.edges.map(i=>i.map(c=>this.to2D(c))),o=y8.create(s);this.roots=A8(o)}to2D(t){let r=E8.fromValues(te.dot(t,this.u),te.dot(t,this.v));return this.basisMap.set(r,t),r}to3D(t){let r=this.basisMap.get(t);if(r)return r;{console.log("Warning: point not in original slice");let n=te.scale(te.create(),this.u,t[0]),s=te.scale(te.create(),this.v,t[1]),o=te.scale(te.create(),rd,rd[3]),i=te.add(n,n,o);return te.add(s,s,i)}}};nd.exports=_s});var id=u((mR,od)=>{var b8=$(),M8=jp(),S8=sd(),T8=e=>{let t=new S8(e),r=[];return t.roots.forEach(({solid:n,holes:s})=>{let o=n.length,i=[];s.forEach((h,p)=>{i.push(o),o+=h.length});let c=[n,...s].flat(),a=c.flat(),l=h=>t.to3D(c[h]),f=M8(a,i);for(let h=0;h<f.length;h+=3){let p=f.slice(h,h+3).map(l);r.push(b8.fromPointsAndPlane(p,t.plane))}}),r};od.exports=T8});var ld=u((qR,ad)=>{var cd=F(),k8=e=>e.reduce((t,r)=>t+=`[${cd.toString(r[0])}, ${cd.toString(r[1])}], `,""),O8=e=>`[${k8(e.edges)}]`;ad.exports=O8});var fd=u((xR,ud)=>{var Br=F(),N8=Oe(),F8=(e,t)=>{let r=t.edges.map(n=>[Br.transform(Br.create(),n[0],e),Br.transform(Br.create(),n[1],e)]);return N8(r)};ud.exports=F8});var Xe=u((wR,hd)=>{hd.exports={calculatePlane:Ls(),clone:Sp(),create:Oe(),equals:kp(),fromPoints:Np(),fromSides:Vp(),isA:zp(),reverse:Cp(),toEdges:Ip(),toPolygons:id(),toString:ld(),transform:fd()}});var gd=u((vR,dd)=>{var pd=F(),V8=Oe(),R8=e=>{if(!e.edges)return e;let t=e.edges,r=new Map,n=new Map;t=t.filter(i=>!pd.equals(i[0],i[1])),t.forEach(i=>{let c=i[0].toString(),a=i[1].toString();r.set(c,i[0]),r.set(a,i[1]),n.set(c,(n.get(c)||0)+1),n.set(a,(n.get(a)||0)-1)});let s=[],o=[];return n.forEach((i,c)=>{i<0&&s.push(c),i>0&&o.push(c)}),s.forEach(i=>{let c=r.get(i),a=1/0,l;o.forEach(f=>{let h=r.get(f),p=pd.distance(c,h);p<a&&(a=p,l=h)}),console.warn(`slice.repair: repairing vertex gap ${c} to ${l} distance ${a}`),t=t.map(f=>f[0].toString()===i?[l,f[1]]:f[1].toString()===i?[f[0],l]:f)}),V8(t)};dd.exports=R8});var yd=u((yR,vd)=>{var{EPS:md}=Z(),it=F(),Cr=$(),qd=Xe(),Ks=(e,t)=>e===t?e:e<t?Ks(t,e):t===1?1:t===0?e:Ks(t,e%t),z8=(e,t)=>e*t/Ks(e,t),xd=(e,t)=>{let r=e/t.length;if(r===1)return t;let n=it.fromValues(r,r,r),s=[];return t.forEach(o=>{let i=it.subtract(it.create(),o[1],o[0]);it.divide(i,i,n);let c=o[0];for(let a=1;a<=r;++a){let l=it.add(it.create(),c,i);s.push([c,l]),c=l}}),s},wd=md*md/2*Math.sin(Math.PI/3),B8=(e,t)=>{let r=qd.toEdges(e),n=qd.toEdges(t);if(r.length!==n.length){let o=z8(r.length,n.length);o!==r.length&&(r=xd(o,r)),o!==n.length&&(n=xd(o,n))}let s=[];return r.forEach((o,i)=>{let c=n[i],a=Cr.create([o[0],o[1],c[1]]),l=Cr.measureArea(a);Number.isFinite(l)&&l>wd&&s.push(a);let f=Cr.create([o[0],c[1],c[0]]),h=Cr.measureArea(f);Number.isFinite(h)&&h>wd&&s.push(f)}),s};vd.exports=B8});var Dt=u((ER,bd)=>{var Ed=L(),Pd=B(),C8=C(),Qs=$(),Ne=Xe(),G8=gd(),Ad=yd(),I8=(e,t,r)=>{let n=null;return Pd.isA(r)&&(n=Ne.fromSides(Pd.toSides(r))),Qs.isA(r)&&(n=Ne.fromPoints(Qs.toPoints(r))),e===0||e===1?Ne.transform(Ed.fromTranslation(Ed.create(),[0,0,e]),n):null},D8=(e,t)=>{let r={numberOfSlices:2,capStart:!0,capEnd:!0,close:!1,repair:!0,callback:I8},{numberOfSlices:n,capStart:s,capEnd:o,close:i,repair:c,callback:a}=Object.assign({},r,e);if(n<2)throw new Error("numberOfSlices must be 2 or more");c&&(t=G8(t));let l=n-1,f=null,h=null,p=null,d=[];for(let m=0;m<n;m++){let g=a(m/l,m,t);if(g){if(!Ne.isA(g))throw new Error("the callback function must return slice objects");if(Ne.toEdges(g).length===0)throw new Error("the callback function must return slices with one or more edges");p&&(d=d.concat(Ad(p,g))),m===0&&(f=g),m===n-1&&(h=g),p=g}}if(o){let m=Ne.toPolygons(h);d=d.concat(m)}if(s){let m=Ne.toPolygons(f).map(Qs.invert);d=d.concat(m)}return!s&&!o&&i&&!Ne.equals(h,f)&&(d=d.concat(Ad(h,f))),C8.create(d)};bd.exports=D8});var js=u((PR,Md)=>{var{TAU:fe}=Z(),$t=L(),{mirrorX:$8}=ot(),Gr=B(),Js=Xe(),Z8=Dt(),X8=(e,t)=>{let r={segments:12,startAngle:0,angle:fe,overflow:"cap"},{segments:n,startAngle:s,angle:o,overflow:i}=Object.assign({},r,e);if(n<3)throw new Error("segments must be greater then 3");s=Math.abs(s)>fe?s%fe:s,o=Math.abs(o)>fe?o%fe:o;let c=s+o;if(c=Math.abs(c)>fe?c%fe:c,c<s){let v=s;s=c,c=v}let a=c-s;if(a<=0&&(a=fe),Math.abs(a)<fe){let v=fe/n;n=Math.floor(Math.abs(a)/v),Math.abs(a)>n*v&&n++}let l=Gr.toSides(t);if(l.length===0)throw new Error("the given geometry cannot be empty");let f=l.filter(v=>v[0][0]<0),h=l.filter(v=>v[0][0]>=0);f.length>0&&h.length>0&&i==="cap"&&(f.length>h.length?(l=l.map(v=>{let E=v[0],x=v[1];return E=[Math.min(E[0],0),E[1]],x=[Math.min(x[0],0),x[1]],[E,x]}),t=Gr.create(l),t=$8(t)):h.length>=f.length&&(l=l.map(v=>{let E=v[0],x=v[1];return E=[Math.max(E[0],0),E[1]],x=[Math.max(x[0],0),x[1]],[E,x]}),t=Gr.create(l)));let d=a/n,m=Math.abs(a)<fe,g=Js.fromSides(Gr.toSides(t));Js.reverse(g,g);let q=$t.create(),w=(v,E,x)=>{let P=d*E+s;return a===fe&&E===n&&(P=s),$t.multiply(q,$t.fromZRotation(q,P),$t.fromXRotation($t.create(),fe/4)),Js.transform(q,x)};return e={numberOfSlices:n+1,capStart:m,capEnd:m,close:!m,callback:w},Z8(e,g)};Md.exports=X8});var ct=u((AR,Nd)=>{var L8=z(),Sd=L(),Td=B(),kd=C(),Od=X(),Ir=(e,...t)=>{if(!Array.isArray(e))throw new Error("angles must be an array");if(t=L8(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(0);let r=e[2],n=e[1],s=e[0],o=Sd.fromTaitBryanRotation(Sd.create(),r,n,s),i=t.map(c=>Od.isA(c)?Od.transform(o,c):Td.isA(c)?Td.transform(o,c):kd.isA(c)?kd.transform(o,c):c);return i.length===1?i[0]:i},Y8=(e,...t)=>Ir([e,0,0],t),U8=(e,...t)=>Ir([0,e,0],t),H8=(e,...t)=>Ir([0,0,e],t);Nd.exports={rotate:Ir,rotateX:Y8,rotateY:U8,rotateZ:H8}});var Fe=u((bR,Bd)=>{var W8=z(),Fd=L(),Vd=B(),Rd=C(),zd=X(),Dr=(e,...t)=>{if(!Array.isArray(e))throw new Error("offset must be an array");if(t=W8(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(0);let r=Fd.fromTranslation(Fd.create(),e),n=t.map(s=>zd.isA(s)?zd.transform(r,s):Vd.isA(s)?Vd.transform(r,s):Rd.isA(s)?Rd.transform(r,s):s);return n.length===1?n[0]:n},_8=(e,...t)=>Dr([e,0,0],t),K8=(e,...t)=>Dr([0,e,0],t),Q8=(e,...t)=>Dr([0,0,e],t);Bd.exports={translate:Dr,translateX:_8,translateY:K8,translateZ:Q8}});var Gd=u((MR,Cd)=>{var{TAU:J8}=Z(),j8=js(),{rotate:e6}=ct(),{translate:t6}=Fe(),r6=zs(),{isGT:eo,isGTE:to}=K(),n6=e=>{let t={innerRadius:1,innerSegments:32,outerRadius:4,outerSegments:32,innerRotation:0,startAngle:0,outerRotation:J8},{innerRadius:r,innerSegments:n,outerRadius:s,outerSegments:o,innerRotation:i,startAngle:c,outerRotation:a}=Object.assign({},t,e);if(!eo(r,0))throw new Error("innerRadius must be greater than zero");if(!to(n,3))throw new Error("innerSegments must be three or more");if(!eo(s,0))throw new Error("outerRadius must be greater than zero");if(!to(o,3))throw new Error("outerSegments must be three or more");if(!to(c,0))throw new Error("startAngle must be positive");if(!eo(a,0))throw new Error("outerRotation must be greater than zero");if(r>=s)throw new Error("inner circle is too large to rotate about the outer circle");let l=r6({radius:r,segments:n});return i!==0&&(l=e6([0,0,i],l)),l=t6([s,0],l),j8({startAngle:c,angle:a,segments:o},l)};Cd.exports=n6});var Dd=u((SR,Id)=>{var{NEPS:at}=Z(),Zt=I(),s6=B(),{isNumberArray:o6}=K(),ro=(e,t,r)=>Math.acos((e*e+t*t-r*r)/(2*e*t)),i6=(e,t,r)=>t>at?Math.sqrt(e*e+r*r-2*e*r*Math.cos(t)):Math.sqrt((e-r)*(e-r)+e*r*t*t*(1-t*t/12)),c6=e=>{if(Math.abs(e[0]+e[1]+e[2]-Math.PI)>at)throw new Error("AAA triangles require angles that sum to PI");let r=e[0],n=e[1],s=Math.PI-r-n,o=1,i=o/Math.sin(s)*Math.sin(r),c=o/Math.sin(s)*Math.sin(n);return lt(r,n,s,i,c,o)},a6=e=>{let t=e[0],r=e[1],n=Math.PI+at-t-r;if(n<at)throw new Error("AAS triangles require angles that sum to PI");let s=e[2],o=s/Math.sin(t)*Math.sin(r),i=s/Math.sin(t)*Math.sin(n);return lt(t,r,n,s,o,i)},l6=e=>{let t=e[0],r=e[2],n=Math.PI+at-t-r;if(n<at)throw new Error("ASA triangles require angles that sum to PI");let s=e[1],o=s/Math.sin(n)*Math.sin(t),i=s/Math.sin(n)*Math.sin(r);return lt(t,r,n,o,i,s)},u6=e=>{let t=e[0],r=e[1],n=e[2],s=i6(t,r,n),o=ro(s,t,n),i=Math.PI-o-r;return lt(o,r,i,n,s,t)},f6=e=>{let t=e[0],r=e[1],n=e[2],s=Math.asin(r*Math.sin(n)/t),o=Math.PI-s-n,i=t/Math.sin(n)*Math.sin(o);return lt(s,o,n,r,i,t)},h6=e=>{let t=e[1],r=e[2],n=e[0];if(t+r<=n||r+n<=t||n+t<=r)throw new Error("SSS triangle is incorrect, as the longest side is longer than the sum of the other sides");let s=ro(r,n,t),o=ro(n,t,r),i=Math.PI-s-o;return lt(s,o,i,t,r,n)},lt=(e,t,r,n,s,o)=>{let i=Zt.fromValues(0,0),c=Zt.fromValues(o,0),a=Zt.fromValues(n,0);return Zt.add(a,Zt.rotate(a,a,[0,0],Math.PI-t),c),s6.fromPoints([i,c,a])},p6=e=>{let t={type:"SSS",values:[1,1,1]},{type:r,values:n}=Object.assign({},t,e);if(typeof r!="string")throw new Error("triangle type must be a string");if(r=r.toUpperCase(),!((r[0]==="A"||r[0]==="S")&&(r[1]==="A"||r[1]==="S")&&(r[2]==="A"||r[2]==="S")))throw new Error("triangle type must contain three letters; A or S");if(!o6(n,3))throw new Error("triangle values must contain three values");if(!n.every(s=>s>0))throw new Error("triangle values must be greater than zero");switch(r){case"AAA":return c6(n);case"AAS":return a6(n);case"ASA":return l6(n);case"SAS":return u6(n);case"SSA":return f6(n);case"SSS":return h6(n);default:throw new Error("invalid triangle type, try again")}};Id.exports=p6});var Zd=u((TR,$d)=>{$d.exports={arc:c2(),circle:zs(),cube:q2(),cuboid:vr(),cylinder:Is(),cylinderElliptic:Gs(),ellipse:Rs(),ellipsoid:Ds(),geodesicSphere:z2(),line:C2(),polygon:I2(),polyhedron:$s(),rectangle:Er(),roundedCuboid:K2(),roundedCylinder:rp(),roundedRectangle:ap(),sphere:Xs(),square:fp(),star:gp(),torus:Gd(),triangle:Dd()}});var Ld=u((kR,Xd)=>{Xd.exports={height:14,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]}});var no=u((OR,Yd)=>{var d6=Ld(),g6={xOffset:0,yOffset:0,input:"?",align:"left",font:d6,height:14,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0},m6=(e,t)=>{!t&&typeof e=="string"&&(e={input:e}),e=e||{};let r=Object.assign({},g6,e);return r.input=t||r.input,r};Yd.exports=m6});var so=u((NR,Ud)=>{var q6=no(),x6=(e,t)=>{let{xOffset:r,yOffset:n,input:s,font:o,height:i,extrudeOffset:c}=q6(e,t),a=s.charCodeAt(0);(!a||!o[a])&&(a=63);let l=[].concat(o[a]),f=(i-c)/o.height,h=c/2,p=l.shift()*f,d=[],m=[];for(let g=0,q=l.length;g<q;g+=2){let w=f*l[g]+r,v=f*l[g+1]+n+h;if(l[g]!==void 0){m.push([w,v]);continue}d.push(m),m=[],g--}return m.length&&d.push(m),{width:p,height:i,segments:d}};Ud.exports=x6});var _d=u((FR,Wd)=>{var w6=so(),v6=no(),Hd=(e,t)=>{let{x:r,y:n}=Object.assign({x:0,y:0},e||{}),s=t.segments,o=null,i=null;for(let c=0,a=s.length;c<a;c++){o=s[c];for(let l=0,f=o.length;l<f;l++)i=o[l],o[l]=[i[0]+r,i[1]+n]}return t},y6=(e,t)=>{let{xOffset:r,yOffset:n,input:s,font:o,height:i,align:c,extrudeOffset:a,lineSpacing:l,letterSpacing:f}=v6(e,t),[h,p]=[r,n],d,m,g,q,w,v,E={width:0,segments:[]},x=[],P=[],y=0,A=h,b=()=>{x.push(E),y=Math.max(y,E.width),E={width:0,segments:[]}};for(d=0,m=s.length;d<m;d++){if(g=s[d],q=w6({xOffset:h,yOffset:p,font:o,height:i,extrudeOffset:a},g),g===`
`){h=A,p-=q.height*l,b();continue}w=q.width*f,E.width+=w,h+=w,g!==" "&&(E.segments=E.segments.concat(q.segments))}for(E.segments.length&&b(),d=0,m=x.length;d<m;d++)E=x[d],y>E.width&&(v=y-E.width,c==="right"?E=Hd({x:v},E):c==="center"&&(E=Hd({x:v/2},E))),P=P.concat(E.segments);return P};Wd.exports=y6});var Qd=u((VR,Kd)=>{Kd.exports={vectorChar:so(),vectorText:_d()}});var ut=u((RR,Jd)=>{var E6=B(),P6=C(),A6=X(),b6=e=>{let t;for(let r of e){let n=0;if(E6.isA(r)&&(n=1),P6.isA(r)&&(n=2),A6.isA(r)&&(n=3),t&&n!==t)return!1;t=n}return!0};Jd.exports=b6});var e5=u((zR,jd)=>{var M6=e=>e*.017453292519943295;jd.exports=M6});var oo=u((BR,t5)=>{var S6=(e,t)=>e-t;t5.exports=S6});var n5=u((CR,r5)=>{var T6=(e,t,r)=>{let n=0,s=e.length;for(;s>n;){let o=Math.floor((n+s)/2),i=e[o];r(t,i)>0?n=o+1:s=o}e.splice(n,0,t)};r5.exports=T6});var i5=u((GR,o5)=>{var{TAU:s5}=Z(),k6=(e,t,r)=>{let n=t>0?e*s5/t:0,s=r>0?s5/r:0;return Math.ceil(Math.max(n,s,4))};o5.exports=k6});var a5=u((IR,c5)=>{var O6=e=>e*57.29577951308232;c5.exports=O6});var io=u((DR,l5)=>{l5.exports={areAllShapesTheSameType:ut(),degToRad:e5(),flatten:z(),fnNumberSort:oo(),insertSorted:n5(),radiusToSegments:i5(),radToDeg:a5()}});var $r=u(($R,f5)=>{var u5=I(),N6=B(),F6=(e,t)=>{if(t.vertices.length<4)return null;let r=[],n=t.vertices.filter((i,c)=>i[2]>0?(r.push(c),!0):!1);if(n.length!==2)throw new Error("Assertion failed: fromFakePolygon: not enough points found");let s=n.map(i=>{let c=Math.round(i[0]/e)*e+0,a=Math.round(i[1]/e)*e+0;return u5.fromValues(c,a)});if(u5.equals(s[0],s[1]))return null;let o=r[1]-r[0];if(o===1||o===3)o===1&&s.reverse();else throw new Error("Assertion failed: fromFakePolygon: unknown index ordering");return s},V6=(e,t)=>{let r=t.map(n=>F6(e,n)).filter(n=>n!==null);return N6.create(r)};f5.exports=V6});var Zr=u((ZR,h5)=>{var Ve=F(),R6=B(),z6=C(),B6=$(),C6=(e,t,r)=>{let n=[Ve.fromVec2(Ve.create(),r[0],e),Ve.fromVec2(Ve.create(),r[1],e),Ve.fromVec2(Ve.create(),r[1],t),Ve.fromVec2(Ve.create(),r[0],t)];return B6.create(n)},G6=(e,t)=>{let n=R6.toSides(t).map(o=>C6(e.z0,e.z1,o));return z6.create(n)};h5.exports=G6});var m5=u((XR,g5)=>{var p5=L(),I6=I(),Q=F(),d5=function(e,t){arguments.length<2&&(t=Q.orthogonal(Q.create(),e)),this.v=Q.normalize(Q.create(),Q.cross(Q.create(),e,t)),this.u=Q.cross(Q.create(),this.v,e),this.plane=e,this.planeorigin=Q.scale(Q.create(),e,e[3])};d5.prototype={getProjectionMatrix:function(){return p5.fromValues(this.u[0],this.v[0],this.plane[0],0,this.u[1],this.v[1],this.plane[1],0,this.u[2],this.v[2],this.plane[2],0,0,0,-this.plane[3],1)},getInverseProjectionMatrix:function(){let e=Q.scale(Q.create(),this.plane,this.plane[3]);return p5.fromValues(this.u[0],this.u[1],this.u[2],0,this.v[0],this.v[1],this.v[2],0,this.plane[0],this.plane[1],this.plane[2],0,e[0],e[1],e[2],1)},to2D:function(e){return I6.fromValues(Q.dot(e,this.u),Q.dot(e,this.v))},to3D:function(e){let t=Q.scale(Q.create(),this.u,e[0]),r=Q.scale(Q.create(),this.v,e[1]),n=Q.add(t,t,this.planeorigin);return Q.add(r,r,n)}};g5.exports=d5});var w5=u((LR,x5)=>{var{EPS:Pe}=Z(),Re=gr(),pe=I(),D6=m5(),ft=ws(),{insertSorted:$6,fnNumberSort:Z6}=io(),q5=$(),X6=e=>{if(e.length<2)return e;let t=[],r=e.length,n=q5.plane(e[0]),s=new D6(n),o=[],i=[],c=new Map,a=new Map,l=new Map,f=10/Pe;for(let m=0;m<r;m++){let g=e[m],q=[],w=g.vertices.length,v=-1;if(w>0){let E,x;for(let P=0;P<w;P++){let y=s.to2D(g.vertices[P]),A=Math.floor(y[1]*f),b;l.has(A)?b=l.get(A):l.has(A+1)?b=l.get(A+1):l.has(A-1)?b=l.get(A-1):(b=y[1],l.set(A,y[1])),y=pe.fromValues(y[0],b),q.push(y);let M=y[1];(P===0||M<E)&&(E=M,v=P),(P===0||M>x)&&(x=M);let T=a.get(M);T||(T={},a.set(M,T)),T[m]=!0}if(E>=x)q=[],w=0,v=-1;else{let P=c.get(E);P||(P=[],c.set(E,P)),P.push(m)}}q.reverse(),v=w-v-1,o.push(q),i.push(v)}let h=[];a.forEach((m,g)=>h.push(g)),h.sort(Z6);let p=[],d=[];for(let m=0;m<h.length;m++){let g=[],q=h[m],w=a.get(q);for(let E=0;E<p.length;++E){let x=p[E],P=x.polygonindex;if(w[P]){let y=o[P],A=y.length,b=x.leftvertexindex,M=x.rightvertexindex;for(;;){let S=b+1;if(S>=A&&(S=0),y[S][1]!==q)break;b=S}let T=M-1;if(T<0&&(T=A-1),y[T][1]===q&&(M=T),b!==x.leftvertexindex&&b===M)p.splice(E,1),--E;else{x.leftvertexindex=b,x.rightvertexindex=M,x.topleft=y[b],x.topright=y[M];let S=b+1;S>=A&&(S=0),x.bottomleft=y[S];let O=M-1;O<0&&(O=A-1),x.bottomright=y[O]}}}let v;if(m>=h.length-1)p=[],v=null;else{v=Number(h[m+1]);let E=.5*(q+v),x=c.get(q);for(let P in x){let y=x[P],A=o[y],b=A.length,M=i[y],T=M;for(;;){let G=T+1;if(G>=b&&(G=0),A[G][1]!==q||G===M)break;T=G}let S=M;for(;;){let G=S-1;if(G<0&&(G=b-1),A[G][1]!==q||G===T)break;S=G}let O=T+1;O>=b&&(O=0);let D=S-1;D<0&&(D=b-1);let R={polygonindex:y,leftvertexindex:T,rightvertexindex:S,topleft:A[T],topright:A[S],bottomleft:A[O],bottomright:A[D]};$6(p,R,(G,N)=>{let ee=ft(G.topleft,G.bottomleft,E),ne=ft(N.topleft,N.bottomleft,E);return ee>ne?1:ee<ne?-1:0})}}for(let E in p){let x=p[E],P=ft(x.topleft,x.bottomleft,q),y=pe.fromValues(P,q);P=ft(x.topright,x.bottomright,q);let A=pe.fromValues(P,q);P=ft(x.topleft,x.bottomleft,v);let b=pe.fromValues(P,v);P=ft(x.topright,x.bottomright,v);let M=pe.fromValues(P,v),T={topleft:y,topright:A,bottomleft:b,bottomright:M,leftline:Re.fromPoints(Re.create(),y,b),rightline:Re.fromPoints(Re.create(),M,A)};if(g.length>0){let S=g[g.length-1],O=pe.distance(T.topleft,S.topright),D=pe.distance(T.bottomleft,S.bottomright);O<Pe&&D<Pe&&(T.topleft=S.topleft,T.leftline=S.leftline,T.bottomleft=S.bottomleft,g.splice(g.length-1,1))}g.push(T)}if(m>0){let E=new Set,x=new Set;for(let P=0;P<g.length;P++){let y=g[P];for(let A=0;A<d.length;A++)if(!x.has(A)){let b=d[A];if(pe.distance(b.bottomleft,y.topleft)<Pe&&pe.distance(b.bottomright,y.topright)<Pe){x.add(A);let M=Re.direction(y.leftline),T=Re.direction(b.leftline),S=M[0]-T[0],O=Re.direction(y.rightline),D=Re.direction(b.rightline),R=O[0]-D[0],G=Math.abs(S)<Pe,N=Math.abs(R)<Pe,ee=G||S>=0,ne=N||R>=0;ee&&ne&&(y.outpolygon=b.outpolygon,y.leftlinecontinues=G,y.rightlinecontinues=N,E.add(A));break}}}for(let P=0;P<d.length;P++)if(!E.has(P)){let y=d[P];y.outpolygon.rightpoints.push(y.bottomright),pe.distance(y.bottomright,y.bottomleft)>Pe&&y.outpolygon.leftpoints.push(y.bottomleft),y.outpolygon.leftpoints.reverse();let b=y.outpolygon.rightpoints.concat(y.outpolygon.leftpoints).map(T=>s.to3D(T)),M=q5.fromPointsAndPlane(b,n);M.vertices.length&&t.push(M)}}for(let E=0;E<g.length;E++){let x=g[E];x.outpolygon?(x.leftlinecontinues||x.outpolygon.leftpoints.push(x.topleft),x.rightlinecontinues||x.outpolygon.rightpoints.push(x.topright)):(x.outpolygon={leftpoints:[],rightpoints:[]},x.outpolygon.leftpoints.push(x.topleft),pe.distance(x.topleft,x.topright)>Pe&&x.outpolygon.rightpoints.push(x.topright))}d=g}return t};x5.exports=X6});var ht=u((YR,y5)=>{var v5=C(),L6=$(),{NEPS:Y6}=Z(),U6=w5(),H6=e=>{if(e.isRetesselated)return e;let t=v5.toPolygons(e).map((o,i)=>({vertices:o.vertices,plane:L6.plane(o),index:i})),r=W6(t),n=[];r.forEach(o=>{if(Array.isArray(o)){let i=U6(o);n.push(...i)}else n.push(o)});let s=v5.create(n);return s.isRetesselated=!0,s},W6=e=>{let t=[e],r=[];for(let s=3;s>=0;s--){let o=[],i=s===3?15e-9:Y6;t.forEach(c=>{c.sort(_6(s,i));let a=0;for(let l=1;l<c.length;l++)c[l].plane[s]-c[a].plane[s]>i&&(l-a===1?r.push(c[a]):o.push(c.slice(a,l)),a=l);c.length-a===1?r.push(c[a]):o.push(c.slice(a))}),t=o}let n=[];return t.forEach(s=>{s[0]&&(n[s[0].index]=s)}),r.forEach(s=>{n[s.index]=s}),n},_6=(e,t)=>(r,n)=>r.plane[e]-n.plane[e]>t?1:n.plane[e]-r.plane[e]>t?-1:0;y5.exports=H6});var Xr=u((UR,P5)=>{var{EPS:pt}=Z(),E5=Me(),K6=(e,t)=>{if(e.polygons.length===0||t.polygons.length===0)return!1;let r=E5(e),n=r[0],s=r[1],o=E5(t),i=o[0],c=o[1];return!(i[0]-s[0]>pt||n[0]-c[0]>pt||i[1]-s[1]>pt||n[1]-c[1]>pt||i[2]-s[2]>pt||n[2]-c[2]>pt)};P5.exports=K6});var M5=u((HR,b5)=>{var A5=he(),Q6=$(),co=class e{constructor(t){this.plane=null,this.front=null,this.back=null,this.polygontreenodes=[],this.parent=t}invert(){let t=[this],r;for(let n=0;n<t.length;n++){r=t[n],r.plane&&(r.plane=A5.flip(A5.create(),r.plane)),r.front&&t.push(r.front),r.back&&t.push(r.back);let s=r.front;r.front=r.back,r.back=s}}clipPolygons(t,r){let n={node:this,polygontreenodes:t},s,o=[];do{if(s=n.node,t=n.polygontreenodes,s.plane){let i=s.plane,c=[],a=[],l=r?c:a,f=t.length;for(let p=0;p<f;p++){let d=t[p];d.isRemoved()||d.splitByPlane(i,l,c,a,c)}s.front&&a.length>0&&o.push({node:s.front,polygontreenodes:a});let h=c.length;if(s.back&&h>0)o.push({node:s.back,polygontreenodes:c});else for(let p=0;p<h;p++)c[p].remove()}n=o.pop()}while(n!==void 0)}clipTo(t,r){let n=this,s=[];do n.polygontreenodes.length>0&&t.rootnode.clipPolygons(n.polygontreenodes,r),n.front&&s.push(n.front),n.back&&s.push(n.back),n=s.pop();while(n!==void 0)}addPolygonTreeNodes(t){let r={node:this,polygontreenodes:t},n=[];do{let s=r.node,o=r.polygontreenodes;if(o.length===0){r=n.pop();continue}if(!s.plane){let l=0;l=Math.floor(o.length/2);let f=o[l].getPolygon();s.plane=Q6.plane(f)}let i=[],c=[],a=o.length;for(let l=0;l<a;++l)o[l].splitByPlane(s.plane,s.polygontreenodes,c,i,c);i.length>0&&(s.front||(s.front=new e(s)),a===i.length&&c.length===0?s.front.polygontreenodes=i:n.push({node:s.front,polygontreenodes:i})),c.length>0&&(s.back||(s.back=new e(s)),a===c.length&&i.length===0?s.back.polygontreenodes=c:n.push({node:s.back,polygontreenodes:c})),r=n.pop()}while(r!==void 0)}};b5.exports=co});var T5=u((WR,S5)=>{var dt=F(),J6=(e,t,r)=>{let n=dt.subtract(dt.create(),r,t),s=(e[3]-dt.dot(e,t))/dt.dot(e,n);return Number.isNaN(s)&&(s=0),s>1&&(s=1),s<0&&(s=0),dt.scale(n,n,s),dt.add(n,t,n),n};S5.exports=J6});var O5=u((_R,k5)=>{var{EPS:Lr}=Z(),j6=he(),Yr=F(),ao=$(),e7=T5(),t7=(e,t)=>{let r={type:null,front:null,back:null},n=t.vertices,s=n.length,o=ao.plane(t);if(j6.equals(o,e))r.type=0;else{let i=!1,c=!1,a=[],l=-Lr;for(let f=0;f<s;f++){let h=Yr.dot(e,n[f])-e[3],p=h<l;a.push(p),h>Lr&&(i=!0),h<l&&(c=!0)}if(!i&&!c){let f=Yr.dot(e,o);r.type=f>=0?0:1}else if(!c)r.type=2;else if(!i)r.type=3;else{r.type=4;let f=[],h=[],p=a[0];for(let m=0;m<s;m++){let g=n[m],q=m+1;q>=s&&(q=0);let w=a[q];if(p===w)p?h.push(g):f.push(g);else{let v=n[q],E=e7(e,g,v);p?(h.push(g),h.push(E),f.push(E)):(f.push(g),f.push(E),h.push(E))}p=w}let d=Lr*Lr;if(h.length>=3){let m=h[h.length-1];for(let g=0;g<h.length;g++){let q=h[g];Yr.squaredDistance(q,m)<d&&(h.splice(g,1),g--),m=q}}if(f.length>=3){let m=f[f.length-1];for(let g=0;g<f.length;g++){let q=f[g];Yr.squaredDistance(q,m)<d&&(f.splice(g,1),g--),m=q}}f.length>=3&&(r.front=ao.fromPointsAndPlane(f,o)),h.length>=3&&(r.back=ao.fromPointsAndPlane(h,o))}}return r};k5.exports=t7});var V5=u((KR,F5)=>{var{EPS:r7}=Z(),n7=F(),N5=$(),s7=O5(),lo=class e{constructor(t,r){this.parent=t,this.children=[],this.polygon=r,this.removed=!1}addPolygons(t){if(!this.isRootNode())throw new Error("Assertion failed");let r=this;t.forEach(n=>{r.addChild(n)})}remove(){if(!this.removed){this.removed=!0,this.polygon=null;let t=this.parent.children,r=t.indexOf(this);if(r<0)throw new Error("Assertion failed");t.splice(r,1),this.parent.recursivelyInvalidatePolygon()}}isRemoved(){return this.removed}isRootNode(){return!this.parent}invert(){if(!this.isRootNode())throw new Error("Assertion failed");this.invertSub()}getPolygon(){if(!this.polygon)throw new Error("Assertion failed");return this.polygon}getPolygons(t){let r=[this],n=[r],s,o,i,c;for(s=0;s<n.length;++s)for(r=n[s],o=0,i=r.length;o<i;o++)c=r[o],c.polygon?t.push(c.polygon):c.children.length>0&&n.push(c.children)}splitByPlane(t,r,n,s,o){if(this.children.length){let i=[this.children],c,a,l,f,h;for(c=0;c<i.length;c++)for(h=i[c],a=0,l=h.length;a<l;a++)f=h[a],f.children.length>0?i.push(f.children):f._splitByPlane(t,r,n,s,o)}else this._splitByPlane(t,r,n,s,o)}_splitByPlane(t,r,n,s,o){let i=this.polygon;if(i){let c=N5.measureBoundingSphere(i),a=c[3]+r7,l=c,f=n7.dot(t,l)-t[3];if(f>a)s.push(this);else if(f<-a)o.push(this);else{let h=s7(t,i);switch(h.type){case 0:r.push(this);break;case 1:n.push(this);break;case 2:s.push(this);break;case 3:o.push(this);break;case 4:if(h.front){let p=this.addChild(h.front);s.push(p)}if(h.back){let p=this.addChild(h.back);o.push(p)}break}}}}addChild(t){let r=new e(this,t);return this.children.push(r),r}invertSub(){let t=[this],r=[t],n,s,o,i;for(n=0;n<r.length;n++)for(t=r[n],s=0,o=t.length;s<o;s++)i=t[s],i.polygon&&(i.polygon=N5.invert(i.polygon)),i.children.length>0&&r.push(i.children)}recursivelyInvalidatePolygon(){this.polygon=null,this.parent&&this.parent.recursivelyInvalidatePolygon()}clear(){let t=[this],r=[t];for(let n=0;n<r.length;++n){t=r[n];let s=t.length;for(let o=0;o<s;o++){let i=t[o];i.polygon&&(i.polygon=null),i.parent&&(i.parent=null),i.children.length>0&&r.push(i.children),i.children=[]}}}toString(){let t="",r=[this],n=[r],s,o,i,c;for(s=0;s<n.length;++s){r=n[s];let a=" ".repeat(s);for(o=0,i=r.length;o<i;o++)c=r[o],t+=`${a}PolygonTreeNode (${c.isRootNode()}): ${c.children.length}`,c.polygon?t+=`
 ${a}polygon: ${c.polygon.vertices}
`:t+=`
`,c.children.length>0&&n.push(c.children)}return t}};F5.exports=lo});var z5=u((QR,R5)=>{var o7=M5(),i7=V5(),uo=class{constructor(t){this.polygonTree=new i7,this.rootnode=new o7(null),t&&this.addPolygons(t)}invert(){this.polygonTree.invert(),this.rootnode.invert()}clipTo(t,r=!1){this.rootnode.clipTo(t,r)}allPolygons(){let t=[];return this.polygonTree.getPolygons(t),t}addPolygons(t){let r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=this.polygonTree.addChild(t[n]);this.rootnode.addPolygonTreeNodes(r)}clear(){this.polygonTree.clear()}toString(){return"Tree: "+this.polygonTree.toString("")}};R5.exports=uo});var Ur=u((JR,B5)=>{B5.exports={Tree:z5()}});var I5=u((jR,G5)=>{var Hr=C(),c7=Xr(),{Tree:C5}=Ur(),a7=(e,t)=>{if(!c7(e,t))return Hr.create();let r=new C5(Hr.toPolygons(e)),n=new C5(Hr.toPolygons(t));r.invert(),n.clipTo(r),n.invert(),r.clipTo(n),n.clipTo(r),r.addPolygons(n.allPolygons()),r.invert();let s=r.allPolygons();return Hr.create(s)};G5.exports=a7});var fo=u((ez,D5)=>{var l7=z(),u7=ht(),f7=I5(),h7=(...e)=>{e=l7(e);let t=e.shift();return e.forEach(r=>{t=f7(t,r)}),t=u7(t),t};D5.exports=h7});var Z5=u((tz,$5)=>{var p7=z(),d7=C(),g7=ye(),m7=$r(),q7=Zr(),x7=fo(),w7=(...e)=>{e=p7(e);let t=e.map(s=>q7({z0:-1,z1:1},s)),r=x7(t),n=g7(r);return m7(n,d7.toPolygons(r))};$5.exports=w7});var L5=u((rz,X5)=>{var v7=z(),y7=ut(),E7=B(),P7=C(),A7=Z5(),b7=fo(),M7=(...e)=>{if(e=v7(e),e.length===0)throw new Error("wrong number of arguments");if(!y7(e))throw new Error("only intersect of the types are supported");let t=e[0];return E7.isA(t)?A7(e):P7.isA(t)?b7(e):t};X5.exports=M7});var H5=u((nz,U5)=>{var ho=F(),S7=ye(),Y5=C(),T7=e=>e.sort((t,r)=>t-r).filter((t,r,n)=>!r||t!==n[r-1]),k7=(e,t,r)=>{let n=`${t}`,s=e.get(n);s===void 0?e.set(n,[r]):s.push(r)},O7=(e,t)=>{let r=`${t}`;return e.get(r)},N7=e=>{let t=S7(e),r=Y5.toPolygons(e),n=r.length,s=new Map,o=ho.create();r.forEach((f,h)=>{f.vertices.forEach(p=>{k7(s,ho.snap(o,p,t),h)})});let i=r.map(f=>{let h=[];return f.vertices.forEach(p=>{h=h.concat(O7(s,ho.snap(o,p,t)))}),{e:1,d:T7(h)}});s.clear();let c=0,a=i.length;for(let f=0;f<a;f++){let h=i[f];if(h.e>0){let p=new Array(n);p[f]=!0;do c=0,p.forEach((d,m)=>{let g=i[m];if(g.e>0){g.e=-1;for(let q=0;q<g.d.length;q++)p[g.d[q]]=!0;c++}});while(c>0);h.indexes=p}}let l=[];for(let f=0;f<a;f++)if(i[f].indexes){let h=[];i[f].indexes.forEach((p,d)=>h.push(r[d])),l.push(Y5.create(h))}return l};U5.exports=N7});var _5=u((sz,W5)=>{var F7=z(),V7=C(),R7=H5(),z7=(...e)=>{if(e=F7(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>V7.isA(r)?R7(r):r);return t.length===1?t[0]:t};W5.exports=z7});var J5=u((oz,Q5)=>{var Wr=C(),B7=Xr(),{Tree:K5}=Ur(),C7=(e,t)=>{if(!B7(e,t))return Wr.clone(e);let r=new K5(Wr.toPolygons(e)),n=new K5(Wr.toPolygons(t));r.invert(),r.clipTo(n),n.clipTo(r,!0),r.addPolygons(n.allPolygons()),r.invert();let s=r.allPolygons();return Wr.create(s)};Q5.exports=C7});var po=u((iz,j5)=>{var G7=z(),I7=ht(),D7=J5(),$7=(...e)=>{e=G7(e);let t=e.shift();return e.forEach(r=>{t=D7(t,r)}),t=I7(t),t};j5.exports=$7});var tg=u((cz,eg)=>{var Z7=z(),X7=C(),L7=ye(),Y7=$r(),U7=Zr(),H7=po(),W7=(...e)=>{e=Z7(e);let t=e.map(s=>U7({z0:-1,z1:1},s)),r=H7(t),n=L7(r);return Y7(n,X7.toPolygons(r))};eg.exports=W7});var ng=u((az,rg)=>{var _7=z(),K7=ut(),Q7=B(),J7=C(),j7=tg(),eM=po(),tM=(...e)=>{if(e=_7(e),e.length===0)throw new Error("wrong number of arguments");if(!K7(e))throw new Error("only subtract of the types are supported");let t=e[0];return Q7.isA(t)?j7(e):J7.isA(t)?eM(e):t};rg.exports=tM});var go=u((lz,og)=>{var gt=C(),rM=Xr(),{Tree:sg}=Ur(),nM=(e,t)=>{if(!rM(e,t))return sM(e,t);let r=new sg(gt.toPolygons(e)),n=new sg(gt.toPolygons(t));r.clipTo(n,!1),n.clipTo(r),n.invert(),n.clipTo(r),n.invert();let s=r.allPolygons().concat(n.allPolygons());return gt.create(s)},sM=(e,t)=>{let r=gt.toPolygons(e);return r=r.concat(gt.toPolygons(t)),gt.create(r)};og.exports=nM});var mo=u((uz,ig)=>{var oM=z(),iM=ht(),cM=go(),aM=(...e)=>{e=oM(e);let t;for(t=1;t<e.length;t+=2)e.push(cM(e[t-1],e[t]));let r=e[t-1];return r=iM(r),r};ig.exports=aM});var qo=u((fz,cg)=>{var lM=z(),uM=C(),fM=ye(),hM=$r(),pM=Zr(),dM=mo(),gM=(...e)=>{e=lM(e);let t=e.map(s=>pM({z0:-1,z1:1},s)),r=dM(t),n=fM(r);return hM(n,uM.toPolygons(r))};cg.exports=gM});var _r=u((hz,ag)=>{var mM=z(),qM=ut(),xM=B(),wM=C(),vM=qo(),yM=mo(),EM=(...e)=>{if(e=mM(e),e.length===0)throw new Error("wrong number of arguments");if(!qM(e))throw new Error("only unions of the same type are supported");let t=e[0];return xM.isA(t)?vM(e):wM.isA(t)?yM(e):t};ag.exports=EM});var ug=u((pz,lg)=>{lg.exports={intersect:L5(),scission:_5(),subtract:ng(),union:_r()}});var Lt=u((dz,hg)=>{var{EPS:PM,TAU:AM}=Z(),fg=vs(),Xt=gr(),H=I(),bM=Ot(),MM=(e,t)=>{let r={delta:1,corners:"edge",closed:!1,segments:16},{delta:n,corners:s,closed:o,segments:i}=Object.assign({},r,e);if(Math.abs(n)<PM)return t;let c=e.closed?bM(t):1;c===0&&(c=1);let a=c>0&&n>=0||c<0&&n<0;n=Math.abs(n);let l=null,f=[],h=[],p=H.create(),d=t.length;for(let m=0;m<d;m++){let g=(m+1)%d,q=t[m],w=t[g];a?H.subtract(p,q,w):H.subtract(p,w,q),H.normal(p,p),H.normalize(p,p),H.scale(p,p,n);let v=H.add(H.create(),q,p),E=H.add(H.create(),w,p),x=[v,E];if(l!=null&&(o||!o&&g!==0)){let P=fg(l[0],l[1],x[0],x[1]);P?(f.pop(),x[0]=P):h.push({c:q,s0:l,s1:x})}l=[v,E],!(g===0&&!o)&&(f.push(x[0]),f.push(x[1]))}if(o&&l!=null){let m=f[0],g=f[1],q=fg(l[0],l[1],m,g);if(q)f[0]=q,f.pop();else{let w=t[0],v=[m,g];h.push({c:w,s0:l,s1:v})}}if(s==="edge"){let m=new Map;f.forEach((w,v)=>m.set(w,v));let g=Xt.create(),q=Xt.create();h.forEach(w=>{Xt.fromPoints(g,w.s0[0],w.s0[1]),Xt.fromPoints(q,w.s1[0],w.s1[1]);let v=Xt.intersectPointOfLines(g,q);if(Number.isFinite(v[0])&&Number.isFinite(v[1])){let E=w.s0[1],x=m.get(E);f[x]=v,f[(x+1)%f.length]=void 0}else{let E=w.s1[0],x=m.get(E);f[x]=void 0}}),f=f.filter(w=>w!==void 0)}if(s==="round"){let m=Math.floor(i/4),g=H.create();h.forEach(q=>{let w=H.angle(H.subtract(g,q.s1[0],q.c));if(w-=H.angle(H.subtract(g,q.s0[1],q.c)),a&&w<0&&(w=w+Math.PI,w<0&&(w=w+Math.PI)),!a&&w>0&&(w=w-Math.PI,w>0&&(w=w-Math.PI)),w!==0){m=Math.floor(i*(Math.abs(w)/AM));let v=w/m,E=H.angle(H.subtract(g,q.s0[1],q.c)),x=[];for(let P=1;P<m;P++){let y=E+v*P,A=H.fromAngleRadians(H.create(),y);H.scale(A,A,n),H.add(A,A,q.c),x.push(A)}if(x.length>0){let P=q.s0[1],y=f.findIndex(A=>H.equals(P,A));y=(y+1)%f.length,f.splice(y,0,...x)}}else{let v=q.s1[0],E=f.findIndex(x=>H.equals(v,x));f.splice(E,1)}})}return f};hg.exports=MM});var dg=u((gz,pg)=>{var Kr=B(),SM=Lt(),TM=(e,t)=>{let r={delta:1,corners:"edge",segments:16},{delta:n,corners:s,segments:o}=Object.assign({},r,e);if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');let a=Kr.toOutlines(t).map(l=>(e={delta:n,corners:s,closed:!0,segments:o},SM(e,l))).reduce((l,f)=>l.concat(Kr.toSides(Kr.fromPoints(f))),[]);return Kr.create(a)};pg.exports=TM});var qg=u((mz,mg)=>{var gg=L(),kM=F(),OM=C(),Yt=$(),NM=(e,t)=>{kM.dot(Yt.plane(t),e)>0&&(t=Yt.invert(t));let n=[t],s=Yt.transform(gg.fromTranslation(gg.create(),e),t),o=t.vertices.length;for(let i=0;i<o;i++){let c=i<o-1?i+1:0,a=Yt.create([t.vertices[i],s.vertices[i],s.vertices[c],t.vertices[c]]);n.push(a)}return n.push(Yt.invert(s)),OM.create(n)};mg.exports=NM});var vg=u((qz,wg)=>{var{EPS:FM,TAU:xo}=Z(),xg=L(),Y=F(),VM=oo(),wo=C(),Le=$(),RM=Xs(),zM=ht(),vo=go(),BM=qg(),CM=(e,t,r)=>{let n=t.toString();if(e.has(n))e.get(n)[1].push(r);else{let s=[t,[r]];e.set(n,s)}},GM=(e,t,r)=>{let n=t[0].toString(),s=t[1].toString(),o=n<s?`${n},${s}`:`${s},${n}`;if(e.has(o))e.get(o)[1].push(r);else{let i=[t,[r]];e.set(o,i)}},yo=(e,t)=>{e.findIndex(n=>n===t)<0&&e.push(t)},IM=(e,t)=>{let r={delta:1,segments:12},{delta:n,segments:s}=Object.assign({},r,e),o=wo.create(),i=new Map,c=new Map,a=Y.create(),l=Y.create();return wo.toPolygons(t).forEach((h,p)=>{let d=Y.scale(Y.create(),Le.plane(h),2*n),m=Le.transform(xg.fromTranslation(xg.create(),Y.scale(Y.create(),d,-.5)),h),g=BM(d,m);o=vo(o,g);let q=h.vertices;for(let w=0;w<q.length;w++){CM(i,q[w],Le.plane(h));let v=(w+1)%q.length,E=[q[w],q[v]];GM(c,E,Le.plane(h))}}),c.forEach(h=>{let p=h[0],d=h[1],m=p[0],g=p[1],q=Y.subtract(Y.create(),g,m);Y.normalize(q,q);let w=d[0],v=Y.cross(Y.create(),w,q),E=[];for(let S=0;S<s;S++)yo(E,S*xo/s);for(let S=0,O=d.length;S<O;S++){let D=d[S],R=Y.dot(v,D),G=Y.dot(w,D),N=Math.atan2(R,G);N<0&&(N+=xo),yo(E,N),N=Math.atan2(-R,-G),N<0&&(N+=xo),yo(E,N)}E=E.sort(VM);let x=E.length,P,y,A=[],b=[],M=[];for(let S=-1;S<x;S++){let O=E[S<0?S+x:S],D=Math.sin(O),R=Math.cos(O);Y.scale(a,w,R*n),Y.scale(l,v,D*n),Y.add(a,a,l);let G=Y.add(Y.create(),m,a),N=Y.add(Y.create(),g,a),ee=!1;if(S>=0&&Y.distance(G,P)<FM&&(ee=!0),!ee){if(S>=0){A.push(G),b.push(N);let ne=[y,N,G,P],Ae=Le.create(ne);M.push(Ae)}P=G,y=N}}b.reverse(),M.push(Le.create(A)),M.push(Le.create(b));let T=wo.create(M);o=vo(o,T)}),i.forEach(h=>{let p=h[0],d=h[1],m=d[0],g=null,q=0;for(let x=1;x<d.length;x++){let P=d[x],y=Y.cross(a,m,P),A=Y.length(y);A>.05&&A>q&&(q=A,g=P)}g||(g=Y.orthogonal(a,m));let w=Y.cross(a,m,g);Y.normalize(w,w);let v=Y.cross(l,w,m),E=RM({center:[p[0],p[1],p[2]],radius:n,segments:s,axes:[m,w,v]});o=vo(o,E)}),zM(o)};wg.exports=IM});var Eg=u((xz,yg)=>{var DM=C(),$M=_r(),ZM=vg(),XM=(e,t)=>{let r={delta:1,corners:"round",segments:12},{delta:n,corners:s,segments:o}=Object.assign({},r,e);if(s!=="round")throw new Error('corners must be "round" for 3D geometries');if(DM.toPolygons(t).length===0)throw new Error("the given geometry cannot be empty");e={delta:n,corners:s,segments:o};let c=ZM(e,t);return $M(t,c)};yg.exports=XM});var bg=u((wz,Ag)=>{var LM=Ot(),ae=I(),mt=B(),Ut=X(),Pg=Lt(),YM=e=>{let{external:t,internal:r}=e;LM(t)<0?t=t.reverse():r=r.reverse();let n=Ut.fromPoints({closed:!0},t),s=Ut.fromPoints({closed:!0},r),o=mt.toSides(mt.fromPoints(Ut.toPoints(n))),i=mt.toSides(mt.fromPoints(Ut.toPoints(s)));return o.push(...i),mt.create(o)},UM=(e,t,r,n)=>{let{points:s,external:o,internal:i}=e,c=Math.floor(t/2),a=[],l=[];if(r==="round"&&c>0){let h=Math.PI/c,p=s[s.length-1],d=ae.angle(ae.subtract(ae.create(),o[o.length-1],p)),m=s[0],g=ae.angle(ae.subtract(ae.create(),i[0],m));for(let q=1;q<c;q++){let w=d+h*q,v=ae.fromAngleRadians(ae.create(),w);ae.scale(v,v,n),ae.add(v,v,p),a.push(v),w=g+h*q,v=ae.fromAngleRadians(ae.create(),w),ae.scale(v,v,n),ae.add(v,v,m),l.push(v)}}let f=[];return f.push(...o,...a,...i.reverse(),...l),mt.fromPoints(f)},HM=(e,t)=>{e=Object.assign({},{delta:1,corners:"edge",segments:16},e);let{delta:n,corners:s,segments:o}=e;if(n<=0)throw new Error("the given delta must be positive for paths");if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');let i=t.isClosed,c=Ut.toPoints(t);if(c.length===0)throw new Error("the given geometry cannot be empty");let a={points:c,external:Pg({delta:n,corners:s,segments:o,closed:i},c),internal:Pg({delta:-n,corners:s,segments:o,closed:i},c)};return t.isClosed?YM(a):UM(a,o,s,n)};Ag.exports=HM});var Qr=u((vz,Mg)=>{var WM=z(),_M=B(),KM=C(),QM=X(),JM=dg(),jM=Eg(),eS=bg(),tS=(e,...t)=>{if(t=WM(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>QM.isA(n)?eS(e,n):_M.isA(n)?JM(e,n):KM.isA(n)?jM(e,n):n);return r.length===1?r[0]:r};Mg.exports=tS});var kg=u((yz,Tg)=>{var Jr=B(),Sg=ur(),rS=Lt(),nS=(e,t)=>{let r={delta:1,corners:"edge",segments:0},{delta:n,corners:s,segments:o}=Object.assign({},r,e);if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');let i=Jr.toOutlines(t),a=i.map(l=>(e={delta:i.reduce((p,d)=>p+Sg.arePointsInside(l,Sg.create(d)),0)%2===0?n:-n,corners:s,closed:!0,segments:o},rS(e,l))).reduce((l,f)=>l.concat(Jr.toSides(Jr.fromPoints(f))),[]);return Jr.create(a)};Tg.exports=nS});var Fg=u((Ez,Ng)=>{var Og=X(),sS=Lt(),oS=(e,t)=>{let r={delta:1,corners:"edge",closed:t.isClosed,segments:16},{delta:n,corners:s,closed:o,segments:i}=Object.assign({},r,e);if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');e={delta:n,corners:s,closed:o,segments:i};let c=sS(e,Og.toPoints(t));return Og.fromPoints({closed:o},c)};Ng.exports=oS});var Rg=u((Pz,Vg)=>{var iS=z(),cS=B(),aS=X(),lS=kg(),uS=Fg(),fS=(e,...t)=>{if(t=iS(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>aS.isA(n)?uS(e,n):cS.isA(n)?lS(e,n):n);return r.length===1?r[0]:r};Vg.exports=fS});var Bg=u((Az,zg)=>{zg.exports={expand:Qr(),offset:Rg()}});var Wt=u((bz,Cg)=>{var Ht=L(),Eo=F(),hS=B(),Po=Xe(),pS=Dt(),dS=(e,t)=>{let r={offset:[0,0,1],twistAngle:0,twistSteps:12,repair:!0},{offset:n,twistAngle:s,twistSteps:o,repair:i}=Object.assign({},r,e);if(o<1)throw new Error("twistSteps must be 1 or more");s===0&&(o=1);let c=Eo.clone(n),a=hS.toSides(t);if(a.length===0)throw new Error("the given geometry cannot be empty");let l=Po.fromSides(a);c[2]<0&&Po.reverse(l,l);let f=Ht.create(),h=(p,d,m)=>{let g=d/o*s,q=Eo.scale(Eo.create(),c,d/o);return Ht.multiply(f,Ht.fromZRotation(f,g),Ht.fromTranslation(Ht.create(),q)),Po.transform(f,m)};return e={numberOfSlices:o+1,capStart:!0,capEnd:!0,repair:i,callback:h},pS(e,l)};Cg.exports=dS});var Ig=u((Mz,Gg)=>{var gS=B(),mS=X(),qS=Wt(),xS=(e,t)=>{if(!t.isClosed)throw new Error("extruded path must be closed");let r=mS.toPoints(t),n=gS.fromPoints(r);return qS(e,n)};Gg.exports=xS});var $g=u((Sz,Dg)=>{var wS=z(),vS=B(),yS=X(),ES=Wt(),PS=Ig(),AS=(e,...t)=>{let r={height:1,twistAngle:0,twistSteps:1,repair:!0},{height:n,twistAngle:s,twistSteps:o,repair:i}=Object.assign({},r,e);if(t=wS(t),t.length===0)throw new Error("wrong number of arguments");e={offset:[0,0,n],twistAngle:s,twistSteps:o,repair:i};let c=t.map(a=>yS.isA(a)?PS(e,a):vS.isA(a)?ES(e,a):a);return c.length===1?c[0]:c};Dg.exports=AS});var Xg=u((Tz,Zg)=>{var bS=X(),MS=Qr(),SS=Wt(),TS=(e,t)=>{let r={size:1,height:1},{size:n,height:s}=Object.assign({},r,e);if(e.delta=n,e.offset=[0,0,s],bS.toPoints(t).length===0)throw new Error("the given geometry cannot be empty");let i=MS(e,t);return SS(e,i)};Zg.exports=TS});var Yg=u((kz,Lg)=>{var{area:kS}=Qe(),Ao=B(),OS=X(),NS=Qr(),FS=Wt(),VS=(e,t)=>{let r={size:1,height:1},{size:n,height:s}=Object.assign({},r,e);e.delta=n,e.offset=[0,0,s];let o=Ao.toOutlines(t);if(o.length===0)throw new Error("the given geometry cannot be empty");let c=o.map(l=>(kS(l)<0&&l.reverse(),NS(e,OS.fromPoints({closed:!0},l)))).reduce((l,f)=>l.concat(Ao.toSides(f)),[]),a=Ao.create(c);return FS(e,a)};Lg.exports=VS});var Hg=u((Oz,Ug)=>{var RS=z(),zS=B(),BS=X(),CS=Xg(),GS=Yg(),IS=(e,...t)=>{let r={size:1,height:1},{size:n,height:s}=Object.assign({},r,e);if(t=RS(t),t.length===0)throw new Error("wrong number of arguments");if(n<=0)throw new Error("size must be positive");if(s<=0)throw new Error("height must be positive");let o=t.map(i=>BS.isA(i)?CS(e,i):zS.isA(i)?GS(e,i):i);return o.length===1?o[0]:o};Ug.exports=IS});var _g=u((Nz,Wg)=>{var{TAU:_t}=Z(),bo=Xe(),qe=L(),DS=Dt(),$S=B(),ZS=(e,t)=>{let r={angle:_t,startAngle:0,pitch:10,endOffset:0,segmentsPerRotation:32},{angle:n,endOffset:s,segmentsPerRotation:o,startAngle:i}=Object.assign({},r,e),c;if(!e.pitch&&e.height?c=e.height/(n/_t):c=e.pitch?e.pitch:r.pitch,o<3)throw new Error("The number of segments per rotation needs to be at least 3.");let l=$S.toSides(t);if(l.length===0)throw new Error("the given geometry cannot be empty");let f=l.filter(w=>w[0][0]>=0),h=bo.fromSides(l);f.length===0&&(h=bo.reverse(h));let p=Math.round(o/_t*Math.abs(n)),d=p>=2?p:2,m=qe.create(),g,q=(w,v,E)=>{let x=i+n/d*v,P=s/d*v,y=(x-i)/_t*c;return qe.multiply(m,qe.fromTranslation(qe.create(),[P,0,y*Math.sign(n)]),qe.fromXRotation(qe.create(),-_t/4*Math.sign(n))),g=qe.create(),qe.multiply(g,qe.fromZRotation(qe.create(),x),m),bo.transform(g,E)};return DS({numberOfSlices:d+1,callback:q},h)};Wg.exports=ZS});var tm=u((Fz,em)=>{var XS=z(),Kg=dr(),Mo=he(),Qg=L(),Jg=B(),jg=C(),qt=$(),LS=ye(),YS=qo(),US=(e,t)=>{let r=Mo.fromNormalAndPoint(Mo.create(),e.axis,e.origin);if(Number.isNaN(r[0])||Number.isNaN(r[1])||Number.isNaN(r[2])||Number.isNaN(r[3]))throw new Error("project: invalid axis or origin");let n=LS(t),s=n*n*Math.sqrt(3)/4;if(n===0)return Jg.create();let o=jg.toPolygons(t),i=[];for(let a=0;a<o.length;a++){let l=o[a].vertices.map(p=>Mo.projectionOfPoint(r,p)),f=qt.create(l),h=qt.plane(f);Kg(r,h)&&(qt.measureArea(f)<s||i.push(f))}if(!Kg(r,[0,0,1])){let a=Qg.fromVectorRotation(Qg.create(),r,[0,0,1]);i=i.map(l=>qt.transform(a,l))}i=i.sort((a,l)=>qt.measureArea(l)-qt.measureArea(a));let c=i.map(a=>Jg.fromPoints(a.vertices));return YS(c)},HS=(e,...t)=>{let r={axis:[0,0,1],origin:[0,0,0]},{axis:n,origin:s}=Object.assign({},r,e);if(t=XS(t),t.length===0)throw new Error("wrong number of arguments");e={axis:n,origin:s};let o=t.map(i=>jg.isA(i)?US(e,i):i);return o.length===1?o[0]:o};em.exports=HS});var nm=u((Vz,rm)=>{rm.exports={extrudeFromSlices:Dt(),extrudeLinear:$g(),extrudeRectangular:Hg(),extrudeRotate:js(),extrudeHelical:_g(),project:tm(),slice:Xe()}});var jr=u((Rz,om)=>{var sm=I(),WS=e=>{let t=sm.fromValues(1/0,1/0);e.forEach(s=>{(s[1]<t[1]||s[1]===t[1]&&s[0]<t[0])&&(t=s)});let r=[];e.forEach(s=>{let o=KS(s[1]-t[1],s[0]-t[0]),i=sm.squaredDistance(s,t);r.push({point:s,angle:o,distSq:i})}),r.sort((s,o)=>s.angle!==o.angle?s.angle-o.angle:s.distSq-o.distSq);let n=[];return r.forEach(s=>{let o=n.length;for(;o>1&&_S(n[o-2],n[o-1],s.point)<=Number.EPSILON;)n.pop(),o=n.length;n.push(s.point)}),n},_S=(e,t,r)=>(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0]),KS=(e,t)=>e===0&&t===0?-1/0:-t/e;om.exports=WS});var en=u((zz,lm)=>{var im=B(),cm=C(),am=X(),QS=e=>{let t=new Set,r=[],n=s=>{let o=s.toString();t.has(o)||(r.push(s),t.add(o))};return e.forEach(s=>{im.isA(s)?im.toPoints(s).forEach(n):cm.isA(s)?cm.toPoints(s).forEach(o=>o.forEach(n)):am.isA(s)&&am.toPoints(s).forEach(n)}),r};lm.exports=QS});var fm=u((Bz,um)=>{var JS=z(),jS=X(),e9=jr(),t9=en(),r9=(...e)=>{e=JS(e);let t=t9(e),r=e9(t);return jS.fromPoints({closed:!0},r)};um.exports=r9});var dm=u((Cz,pm)=>{var n9=z(),hm=B(),s9=jr(),o9=en(),i9=(...e)=>{e=n9(e);let t=o9(e),r=s9(t);return r.length<3?hm.create():hm.fromPoints(r)};pm.exports=i9});var So=u((Gz,gm)=>{var c9=$(),a9=Gn(),l9=e=>a9(e,{skipTriangulation:!0}).map(n=>{let s=n.map(o=>e[o]);return c9.create(s)});gm.exports=l9});var xm=u((Iz,qm)=>{var u9=z(),mm=C(),f9=en(),h9=So(),p9=(...e)=>{e=u9(e);let t=f9(e);return t.length===0?mm.create():mm.create(h9(t))};qm.exports=p9});var To=u((Dz,wm)=>{var d9=z(),g9=ut(),m9=B(),q9=C(),x9=X(),w9=fm(),v9=dm(),y9=xm(),E9=(...e)=>{if(e=d9(e),e.length===0)throw new Error("wrong number of arguments");if(!g9(e))throw new Error("only hulls of the same type are supported");let t=e[0];return x9.isA(t)?w9(e):m9.isA(t)?v9(e):q9.isA(t)?y9(e):t};wm.exports=E9});var ym=u(($z,vm)=>{var P9=z(),A9=_r(),b9=To(),M9=(...e)=>{if(e=P9(e),e.length<2)throw new Error("wrong number of arguments");let t=[];for(let r=1;r<e.length;r++)t.push(b9(e[r-1],e[r]));return A9(t)};vm.exports=M9});var Pm=u((Zz,Em)=>{Em.exports={hull:To(),hullChain:ym(),hullPoints2:jr(),hullPoints3:So()}});var Oo=u((Xz,bm)=>{var ko=F(),Am=$(),S9=(e,t)=>{let r=Math.abs(Am.measureArea(t));return Number.isFinite(r)&&r>e},T9=(e,t)=>{let r=t.map(s=>{let o=s.vertices.map(a=>ko.snap(ko.create(),a,e)),i=[];for(let a=0;a<o.length;a++){let l=(a+1)%o.length;ko.equals(o[a],o[l])||i.push(o[a])}let c=Am.create(i);return s.color&&(c.color=s.color),c}),n=e*e*Math.sqrt(3)/4;return r=r.filter(s=>S9(n,s)),r};bm.exports=T9});var Tm=u((Lz,Sm)=>{var k9=dr(),xt=F(),tn=$(),O9=e=>{let t=tn.toPoints(e),r=[];for(let n=0;n<t.length;n++){let s=(n+1)%t.length,o={v1:t[n],v2:t[s]};r.push(o)}for(let n=0;n<r.length;n++){let s=(n+1)%t.length;r[n].next=r[s],r[s].prev=r[n]}return r},N9=(e,t)=>{let r=`${t.v1}:${t.v2}`;e.set(r,t)},No=(e,t)=>{let r=`${t.v1}:${t.v2}`;e.delete(r)},F9=(e,t)=>{let r=`${t.v2}:${t.v1}`;return e.get(r)},V9=(e,t,r)=>{let n=e.prev.v1,s=e.prev.v2,o=t.next.v2,i=Mm(n,s,o,r);n=t.prev.v1,s=t.prev.v2,o=e.next.v2;let c=Mm(n,s,o,r);return[i,c]},R9=xt.create(),z9=xt.create(),Mm=(e,t,r,n)=>{let s=xt.subtract(R9,t,e),o=xt.subtract(z9,r,t);return xt.cross(s,s,o),xt.dot(s,n)},B9=e=>{let t,r=[];for(;e.next;){let n=e.next;r.push(e.v1),e.v1=null,e.v2=null,e.next=null,e.prev=null,e=n}return r.length>0&&(t=tn.create(r)),t},C9=e=>{if(e.length<2)return e;let t=e[0].plane,r=e.slice(),n=new Map;for(;r.length>0;){let o=r.shift(),i=O9(o);for(let c=0;c<i.length;c++){let a=i[c],l=F9(n,a);if(l){let f=V9(a,l,t);if(f[0]>=0&&f[1]>=0){let h=l.next,p=a.next;a.prev.next=l.next,a.next.prev=l.prev,l.prev.next=a.next,l.next.prev=a.prev,a.v1=null,a.v2=null,a.next=null,a.prev=null,No(n,l),l.v1=null,l.v2=null,l.next=null,l.prev=null;let d=(m,g,q)=>{let w={v1:q.v1,v2:g.v2,next:g.next,prev:q.prev};q.prev.next=w,g.next.prev=w,No(m,g),g.v1=null,g.v2=null,g.next=null,g.prev=null,No(m,q),q.v1=null,q.v2=null,q.next=null,q.prev=null};f[0]===0&&d(n,h,h.prev),f[1]===0&&d(n,p,p.prev)}}else a.next&&N9(n,a)}}let s=[];return n.forEach(o=>{let i=B9(o);i&&s.push(i)}),n.clear(),s},G9=(e,t)=>Math.abs(e[3]-t[3])<15e-8?k9(e,t):!1,I9=(e,t)=>{let r=[];t.forEach(s=>{let o=r.find(i=>G9(i[0],tn.plane(s)));o?o[1].push(s):r.push([tn.plane(s),[s]])});let n=[];return r.forEach(s=>{let o=s[1],i=C9(o);n=n.concat(i)}),n};Sm.exports=I9});var Fm=u((Yz,Nm)=>{var km=Z(),xe=F(),D9=$(),ze=!1,re=e=>`${e}`,Om=(e,t,r,n,s,o)=>{let i=re(n),c=re(s);if(ze&&i===c)throw new Error("assert failed");let a=`${i}/${c}`,l=`${c}/${i}`;if(e.has(l))return rn(e,t,r,s,n,null),null;let f={vertex0:n,vertex1:s,polygonindex:o};return e.has(a)?e.get(a).push(f):e.set(a,[f]),t.has(i)?t.get(i).push(a):t.set(i,[a]),r.has(c)?r.get(c).push(a):r.set(c,[a]),a},rn=(e,t,r,n,s,o)=>{let i=re(n),c=re(s),a=`${i}/${c}`;if(ze&&!e.has(a))throw new Error("assert failed");let l=-1,f=e.get(a);for(let h=0;h<f.length;h++){let p=f[h],d=re(p.vertex0);if(d===i&&(d=re(p.vertex1),d===c&&!(o!==null&&p.polygonindex!==o))){l=h;break}}if(ze&&l<0)throw new Error("assert failed");if(f.splice(l,1),f.length===0&&e.delete(a),l=t.get(i).indexOf(a),ze&&l<0)throw new Error("assert failed");if(t.get(i).splice(l,1),t.get(i).length===0&&t.delete(i),l=r.get(c).indexOf(a),ze&&l<0)throw new Error("assert failed");r.get(c).splice(l,1),r.get(c).length===0&&r.delete(c)},$9=e=>{let t=new Map;for(let r=0;r<e.length;r++){let n=e[r],s=n.vertices.length;if(s>=3){let o=n.vertices[0],i=re(o);for(let c=0;c<s;c++){let a=c+1;a===s&&(a=0);let l=n.vertices[a],f=re(l),h=`${i}/${f}`,p=`${f}/${i}`;if(t.has(p)){let d=t.get(p);d.splice(-1,1),d.length===0&&t.delete(p)}else{let d={vertex0:o,vertex1:l,polygonindex:r};t.has(h)?t.get(h).push(d):t.set(h,[d])}o=l,i=f}}else console.warn("warning: invalid polygon found during insertTjunctions")}if(t.size>0){let r=new Map,n=new Map,s=new Map;for(let[i,c]of t)s.set(i,!0),c.forEach(a=>{let l=re(a.vertex0),f=re(a.vertex1);r.has(l)?r.get(l).push(i):r.set(l,[i]),n.has(f)?n.get(f).push(i):n.set(f,[i])});let o=e.slice(0);for(;t.size!==0;){for(let c of t.keys())s.set(c,!0);let i=!1;for(;;){let c=Array.from(s.keys());if(c.length===0)break;let a=c[0],l=!0;if(t.has(a)){let f=t.get(a);if(ze&&f.length===0)throw new Error("assert failed");let h=f[0];for(let p=0;p<2;p++){let d=p===0?h.vertex0:h.vertex1,m=p===0?h.vertex1:h.vertex0,g=re(d),q=re(m),w=[];p===0?n.has(g)&&(w=n.get(g)):r.has(g)&&(w=r.get(g));for(let v=0;v<w.length;v++){let E=w[v],x=t.get(E)[0],P=p===0?x.vertex0:x.vertex1,y=p===0?x.vertex1:x.vertex0,A=re(P),b=re(y);if(ze&&b!==g)throw new Error("assert failed");if(A===q){rn(t,r,n,d,m,null),rn(t,r,n,m,d,null),l=!1,p=2,i=!0;break}else{let M=d,T=m,S=P,O=xe.subtract(xe.create(),S,M),D=xe.dot(xe.subtract(xe.create(),T,M),O)/xe.dot(O,O);if(D>0&&D<1){let R=xe.scale(xe.create(),O,D);if(xe.add(R,R,M),xe.squaredDistance(R,T)<km.EPS*km.EPS){let N=x.polygonindex,ee=o[N],ne=re(x.vertex1),Ae=-1;for(let jt=0;jt<ee.vertices.length;jt++)if(re(ee.vertices[jt])===ne){Ae=jt;break}if(ze&&Ae<0)throw new Error("assert failed");let wt=ee.vertices.slice(0);wt.splice(Ae,0,m);let Jt=D9.create(wt);o[N]=Jt,rn(t,r,n,x.vertex0,x.vertex1,N);let Ue=Om(t,r,n,x.vertex0,m,N),Io=Om(t,r,n,m,x.vertex1,N);Ue!==null&&s.set(Ue,!0),Io!==null&&s.set(Io,!0),l=!1,p=2,i=!0;break}}}}}}l&&s.delete(a)}if(!i)break}e=o}return t.clear(),e};Nm.exports=$9});var Rm=u((Uz,Vm)=>{var Fo=F(),Vo=$(),Z9=(e,t,r)=>{let n=t.vertices.length;if(n>3){if(n>4){let i=[0,0,0];t.vertices.forEach(c=>Fo.add(i,i,c)),Fo.snap(i,Fo.divide(i,i,[n,n,n]),e);for(let c=0;c<n;c++){let a=Vo.create([i,t.vertices[c],t.vertices[(c+1)%n]]);t.color&&(a.color=t.color),r.push(a)}return}let s=Vo.create([t.vertices[0],t.vertices[1],t.vertices[2]]),o=Vo.create([t.vertices[0],t.vertices[2],t.vertices[3]]);t.color&&(s.color=t.color,o.color=t.color),r.push(s,o);return}r.push(t)},X9=(e,t)=>{let r=[];return t.forEach(n=>{Z9(e,n,r)}),r};Vm.exports=X9});var Cm=u((Hz,Bm)=>{var L9=z(),Y9=ye(),U9=B(),zm=C(),H9=X(),W9=Oo(),_9=Tm(),K9=Fm(),Q9=Rm(),J9=(e,t)=>t,j9=(e,t)=>t,eT=(e,t)=>{let r={snap:!1,simplify:!1,triangulate:!1},{snap:n,simplify:s,triangulate:o}=Object.assign({},r,e),i=Y9(t),c=zm.toPolygons(t);n&&(c=W9(i,c)),s&&(c=_9(i,c)),o&&(c=K9(c),c=Q9(i,c));let a=Object.assign({},t);return a.polygons=c,a},tT=(e,...t)=>{if(t=L9(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>{if(H9.isA(n))return J9(e,n);if(U9.isA(n))return j9(e,n);if(zm.isA(n))return eT(e,n);throw new Error("invalid geometry")});return r.length===1?r[0]:r};Bm.exports=tT});var Im=u((Wz,Gm)=>{var rT=z(),Ye=I(),Ro=B(),zo=C(),Bo=X(),Co=ye(),nT=Oo(),sT=e=>{let t=Co(e),n=Bo.toPoints(e).map(s=>Ye.snap(Ye.create(),s,t));return Bo.create(n)},oT=e=>{let t=Co(e),n=Ro.toSides(e).map(s=>[Ye.snap(Ye.create(),s[0],t),Ye.snap(Ye.create(),s[1],t)]);return n=n.filter(s=>!Ye.equals(s[0],s[1])),Ro.create(n)},iT=e=>{let t=Co(e),r=zo.toPolygons(e),n=nT(t,r);return zo.create(n)},cT=(...e)=>{if(e=rT(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>Bo.isA(r)?sT(r):Ro.isA(r)?oT(r):zo.isA(r)?iT(r):r);return t.length===1?t[0]:t};Gm.exports=cT});var $m=u((_z,Dm)=>{Dm.exports={generalize:Cm(),snap:Im(),retessellate:ht()}});var Xm=u((Kz,Zm)=>{var aT=(e,t,r)=>{for(e=e.slice();e.length<r;)e.push(t);return e};Zm.exports=aT});var Wm=u((Qz,Hm)=>{var lT=z(),Lm=Xm(),Um=xr(),{translate:uT}=Fe(),fT=e=>{if(!Array.isArray(e.modes)||e.modes.length>3)throw new Error("align(): modes must be an array of length <= 3");if(e.modes=Lm(e.modes,"none",3),e.modes.filter(t=>["center","max","min","none"].includes(t)).length!==3)throw new Error('align(): all modes must be one of "center", "max" or "min"');if(!Array.isArray(e.relativeTo)||e.relativeTo.length>3)throw new Error("align(): relativeTo must be an array of length <= 3");if(e.relativeTo=Lm(e.relativeTo,0,3),e.relativeTo.filter(t=>Number.isFinite(t)||t==null).length!==3)throw new Error("align(): all relativeTo values must be a number, or null.");if(typeof e.grouped!="boolean")throw new Error("align(): grouped must be a boolean value.");return e},hT=(e,t,r)=>{for(let n=0;n<3;n++)e[n]==null&&(t[n]==="center"?e[n]=(r[0][n]+r[1][n])/2:t[n]==="max"?e[n]=r[1][n]:t[n]==="min"&&(e[n]=r[0][n]));return e},Ym=(e,t,r)=>{let n=Um(e),s=[0,0,0];for(let o=0;o<3;o++)t[o]==="center"?s[o]=r[o]-(n[0][o]+n[1][o])/2:t[o]==="max"?s[o]=r[o]-n[1][o]:t[o]==="min"&&(s[o]=r[o]-n[0][o]);return uT(s,e)},pT=(e,...t)=>{e=Object.assign({},{modes:["center","center","min"],relativeTo:[0,0,0],grouped:!1},e),e=fT(e);let{modes:n,relativeTo:s,grouped:o}=e;if(t=lT(t),t.length===0)throw new Error("align(): No geometries were provided to act upon");if(s.filter(i=>i==null).length){let i=Um(t);s=hT(s,n,i)}return o?t=Ym(t,n,s):t=t.map(i=>Ym(i,n,s)),t.length===1?t[0]:t};Hm.exports=pT});var Kt=u((Jz,_m)=>{var dT=z(),gT=B(),mT=C(),qT=X(),xT=Me(),{translate:wT}=Fe(),Go=(e,t)=>{let r={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:n,relativeTo:s}=Object.assign({},r,e),o=xT(t),i=[0,0,0];return n[0]&&(i[0]=s[0]-(o[0][0]+(o[1][0]-o[0][0])/2)),n[1]&&(i[1]=s[1]-(o[0][1]+(o[1][1]-o[0][1])/2)),n[2]&&(i[2]=s[2]-(o[0][2]+(o[1][2]-o[0][2])/2)),wT(i,t)},nn=(e,...t)=>{let r={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:n,relativeTo:s}=Object.assign({},r,e);if(t=dT(t),t.length===0)throw new Error("wrong number of arguments");if(s.length!==3)throw new Error("relativeTo must be an array of length 3");e={axes:n,relativeTo:s};let o=t.map(i=>qT.isA(i)||gT.isA(i)||mT.isA(i)?Go(e,i):i);return o.length===1?o[0]:o},vT=(...e)=>nn({axes:[!0,!1,!1]},e),yT=(...e)=>nn({axes:[!1,!0,!1]},e),ET=(...e)=>nn({axes:[!1,!1,!0]},e);_m.exports={center:nn,centerX:vT,centerY:yT,centerZ:ET}});var Qt=u((jz,eq)=>{var PT=z(),Km=L(),Qm=B(),Jm=C(),jm=X(),sn=(e,...t)=>{if(!Array.isArray(e))throw new Error("factors must be an array");if(t=PT(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(1);if(e[0]<=0||e[1]<=0||e[2]<=0)throw new Error("factors must be positive");let r=Km.fromScaling(Km.create(),e),n=t.map(s=>jm.isA(s)?jm.transform(r,s):Qm.isA(s)?Qm.transform(r,s):Jm.isA(s)?Jm.transform(r,s):s);return n.length===1?n[0]:n},AT=(e,...t)=>sn([e,1,1],t),bT=(e,...t)=>sn([1,e,1],t),MT=(e,...t)=>sn([1,1,e],t);eq.exports={scale:sn,scaleX:AT,scaleY:bT,scaleZ:MT}});var oq=u((eB,sq)=>{var ST=z(),tq=B(),rq=C(),nq=X(),TT=(e,...t)=>{if(t=ST(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>nq.isA(n)?nq.transform(e,n):tq.isA(n)?tq.transform(e,n):rq.isA(n)?rq.transform(e,n):n);return r.length===1?r[0]:r};sq.exports=TT});var cq=u((tB,iq)=>{iq.exports={align:Wm(),center:Kt().center,centerX:Kt().centerX,centerY:Kt().centerY,centerZ:Kt().centerZ,mirror:ot().mirror,mirrorX:ot().mirrorX,mirrorY:ot().mirrorY,mirrorZ:ot().mirrorZ,rotate:ct().rotate,rotateX:ct().rotateX,rotateY:ct().rotateY,rotateZ:ct().rotateZ,scale:Qt().scale,scaleX:Qt().scaleX,scaleY:Qt().scaleY,scaleZ:Qt().scaleZ,transform:oq(),translate:Fe().translate,translateX:Fe().translateX,translateY:Fe().translateY,translateZ:Fe().translateZ}});var kT=u((rB,aq)=>{aq.exports={colors:N0(),curves:_0(),geometries:fr(),maths:vh(),measurements:n2(),primitives:Zd(),text:Qd(),utils:io(),booleans:ug(),expansions:Bg(),extrusions:nm(),hulls:Pm(),modifiers:$m(),transforms:cq()}});export default kT();
